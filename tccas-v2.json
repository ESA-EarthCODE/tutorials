{"version":2,"kind":"Notebook","sha256":"95d36ac15b52777af5c599746dfe1ec1e8cb4f0258dea2ce33d227d7364b94d2","slug":"tccas-v2","location":"/PRR/TCCAS_v2.ipynb","dependencies":[],"frontmatter":{"title":"Generating STAC metadatas for the TCCAS dataset","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"pangeo","language":"python"},"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/ESA-EarthCODE/tutorials","subject":"EarthCODE Tutorials","numbering":{"title":{"offset":1}},"source_url":"https://github.com/ESA-EarthCODE/tutorials/blob/main/PRR/TCCAS_v2.ipynb","edit_url":"https://github.com/ESA-EarthCODE/tutorials/edit/main/PRR/TCCAS_v2.ipynb","exports":[{"format":"ipynb","filename":"TCCAS_v2.ipynb","url":"/tutorials/build/TCCAS_v2-8ddc6d2e8b34b270546eb9d671f76f5c.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This notebook shows how to generate a valid STAC collection, which is a requirement to upload research outcomes to the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hmFTEwVPSD"},{"type":"link","url":"https://eoresults.esa.int/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"ESA Project Results Repository (PRR)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"J1NVeNvWYc"}],"urlSource":"https://eoresults.esa.int/","key":"k3imZjpYFn"},{"type":"text","value":". It focuses on generating metadata for a project with multiple data files of different types.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nQauHO0sUK"}],"key":"KM3ykNGABg"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Check the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"qddedIFwlo"},{"type":"link","url":"https://earthcode.esa.int/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"EarthCODE documentation","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zysW1qat2w"}],"urlSource":"https://earthcode.esa.int/","key":"PuvMCbCRaR"},{"type":"text","value":", and ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"XuQdmunNTp"},{"type":"link","url":"https://esa-earthcode.github.io/tutorials/prr-stac-introduction","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"PRR STAC introduction example","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"eoy0pm1Em7"}],"urlSource":"https://esa-earthcode.github.io/tutorials/prr-stac-introduction","key":"dqVygqycZ9"},{"type":"text","value":" for a more general introduction to STAC and the ESA PRR.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"S2EAL0iiby"}],"key":"eVUuyTpD4l"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"The code below demonstrates how to perform the necessary steps using real data from the ESA project ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"vwSZygj8LZ"},{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Terrestrial Carbon Community Assimilation System (TCCAS)","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"F6HfqUu1l0"}],"key":"ZVyatj4WIj"},{"type":"text","value":". The focus of TCCAS is the combination of a diverse array of observational data streams with the D&B terrestrial biosphere model into a consistent picture of the terrestrial carbon, water, and energy cycles.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"i1lEDHIlut"}],"key":"tP6oMJsP16"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"üîó Check the project website: ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"fqGizEg1NS"},{"type":"link","url":"https://tccas.inversion-lab.com/index.html","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Terrestrial Carbon Community Assimilation System (TCCAS) ‚Äì Website","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"f1rquTKHfP"}],"urlSource":"https://tccas.inversion-lab.com/index.html","key":"WTDa2Wt77f"}],"key":"JUmSaLuGGa"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"üõ¢Ô∏è TCCAS Dataset: ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"xEJBvwC348"},{"type":"link","url":"https://tccas.inversion-lab.com/database/sodankylae.html","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Terrestrial Carbon Community Assimilation System (TCCAS) ‚Äì Data base: Sodankyl√§ and Lapland region","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"XHvQGNwEIg"}],"urlSource":"https://tccas.inversion-lab.com/database/sodankylae.html","key":"DHhDJInYsf"}],"key":"CthlH8e3fK"},{"type":"heading","depth":3,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Acknowledgment","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"nqxCKQM361"}],"identifier":"acknowledgment","label":"Acknowledgment","html_id":"acknowledgment","implicit":true,"key":"ZglIuduEuS"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"We gratefully acknowledge the ","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"fpWWsVHrTp"},{"type":"strong","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Terrestrial Carbon Community Assimilation System (TCCAS) team","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"HinIKG8ktJ"}],"key":"eWHnqDvg2H"},{"type":"text","value":" for providing access to the data used in this example, as well as support in creating it.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"YB1De2aZJW"}],"key":"gBLAzsqDsu"}],"key":"Ym3jJWzkVZ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# import libraries\nimport xarray as xr\nfrom pystac import Item, Collection\nimport pystac\nfrom datetime import datetime\nfrom shapely.geometry import box, mapping\nfrom xstac import xarray_to_stac\nimport glob\nimport json\nimport shapely\nimport numpy as np\nimport pandas as pd","key":"fGjQxd5QA7"},{"type":"output","id":"zX4pngcp9DuFiYb8ztt2T","data":[],"key":"gnOFJL7u1u"}],"key":"d2ZYKFABqb"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2. Define functions to be reused between regions","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Lqggp1GMSN"}],"identifier":"id-2-define-functions-to-be-reused-between-regions","label":"2. Define functions to be reused between regions","html_id":"id-2-define-functions-to-be-reused-between-regions","implicit":true,"key":"dZIGfXkQd4"}],"key":"IEkxFiMNhm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def add_insitu_data(collectionid, geometry, bbox, start_time, collection, insitu_href):\n    print(start_time)\n    item = Item(\n        id=f\"{collectionid}-insitu_package\",\n        geometry=geometry,\n        datetime=start_time,\n        bbox=bbox,\n        properties= {\n            \"license\": \"CC-BY-4.0\",\n            \"description\": 'Insitu package with FloX, VOD and Miscellaneous field datasets related to the TCCAS project. ',\n        }\n    )\n\n    # 3. add an asset (the actual link to the file)\n    item.add_asset(\n                key=f'Insitu package', # title can be arbitrary\n                asset=pystac.Asset(\n                    href=f'./{collectionid}/{insitu_href}',\n                    media_type=\"application/tar+gzip\",\n                    roles=[\"data\"],\n                )\n    )\n\n    item.validate()\n    collection.add_item(item)","key":"msoAfIgh61"},{"type":"output","id":"S5yAocJOokpuFlA-FQPUZ","data":[],"key":"XgxHQ6NJmF"}],"key":"uvHXPPuRmI"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def add_documentation_item(collectionid, geometry, bbox, start_time, collection, ):\n    # add all the documentation under a single item\n    item = Item(\n        id=f\"{collectionid}-documentation\",\n        geometry=geometry,\n        datetime=start_time,\n        bbox=bbox,\n        properties= {\n            \"license\": \"CC-BY-4.0\",\n            \"description\": 'Documentation for the TCCAS project datasets.',\n        }\n    )\n\n    item.add_asset(\n                key=f'TCCAS user manual.', # title can be arbitrary\n                asset=pystac.Asset(\n                    href=f'./{collectionid}/TCCAS_manual.pdf',\n                    media_type=\"application/pdf\",\n                    roles=[\"documentation\"],\n                )\n    )\n\n    item.add_asset(\n                key=\"Satellite Data Uncertainty analysis Scientific Report\", # title can be arbitrary\n                asset=pystac.Asset(\n                    href=f'./{collectionid}/D7.pdf',\n                    media_type=\"application/pdf\",\n                    roles=[\"documentation\"],\n                )\n    )\n\n    item.add_asset(\n                key=\"Campaign Data User Manual\", # title can be arbitrary\n                asset=pystac.Asset(\n                    href=f'./{collectionid}/D11_CDUM-all_sites.pdf',\n                    media_type=\"application/pdf\",\n                    roles=[\"documentation\"],\n                )\n    )\n\n    collection.add_item(item)","key":"eNnU9m7YxL"},{"type":"output","id":"iOknxlQiy_w3YLmzaSUAB","data":[],"key":"DHvxkHUxaC"}],"key":"wM7vwf0JGf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# add an item with multiple model forcing assets\n\ndef create_model_forcing_item(collectionid, geometry, bbox, start_time, collection, model_forcing):\n\n    item = Item(\n        id=f\"{collectionid}-model_forcing\",\n        geometry=geometry,\n        datetime=start_time,\n        bbox=bbox,\n        properties= {\n            \"license\": \"CC-BY-4.0\",\n            \"description\": ' Regional and Site-level model forcing Data Sets for Sodankyl√§ and Lapland region, part of the TCCAS project.',\n        }\n    )\n\n    for k,v in model_forcing.items():\n        item.add_asset(\n                    key=k, # title can be arbitrary\n                    asset=pystac.Asset(\n                        href=f'./{collectionid}/{v}',\n                        media_type=\"application/x-netcdf\",\n                        roles=[\"data\"],\n                    )\n        )\n\n    item.validate()\n    collection.add_item(item)\n","key":"XKfKe5arr6"},{"type":"output","id":"MV-HbxDuXugAlvOxGwv60","data":[],"key":"KiD777IKuk"}],"key":"vD2whBlJtn"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# some attributes extracted from xarray are not json serialisable and have to be cast to other types.\ndef convert_to_json_serialisable(attrs):\n    attrs = attrs.copy()\n    for attr in attrs.keys():\n        if isinstance(attrs[attr], np.ndarray):\n            attrs[attr] = attrs[attr].tolist()\n        elif str(type(attrs[attr])).__contains__('numpy.int'):\n            attrs[attr] = int(attrs[attr])\n    return attrs","key":"qbApjDKb2O"},{"type":"output","id":"OK2FTwY1Q3f1a1OoP1rkj","data":[],"key":"kekBUEEmuG"}],"key":"YYJFaDbRm5"},{"type":"block","kind":"notebook-code","data":{"scrolled":true},"children":[{"type":"code","lang":"python","executable":true,"value":"def create_items_from_data(collectionid, geometry, bbox, collection, root_url, data_files, region):\n\n    for dataset_name, dataset_filepath in data_files.items():\n\n        # 1. open the netcdf file\n        ds = xr.open_dataset(root_url + dataset_filepath + '#mode=bytes')\n\n        if 'time' in ds.coords:\n            start_time = ds['time'][0].values\n            ts = (start_time - np.datetime64('1970-01-01T00:00:00Z')) / np.timedelta64(1, 's')\n            start_time = datetime.fromtimestamp(ts)\n\n            end_time = ds['time'][-1].values\n            ts = (end_time - np.datetime64('1970-01-01T00:00:00Z')) / np.timedelta64(1, 's')\n            end_time = datetime.fromtimestamp(ts)\n\n        elif 'yymmddHH' in ds.variables:\n            string_date = '-'.join(ds['yymmddHH'][0].values.astype(str)[:3])\n            start_time = datetime.strptime(string_date, '%Y-%m-%d')\n\n            string_date = '-'.join(ds['yymmddHH'][-1].values.astype(str)[:3])\n            end_time = datetime.strptime(string_date, '%Y-%m-%d')\n        else:\n            string_date = '-'.join(ds['yymmddHHMMSS'][0].values.astype(int).astype(str)[:3])\n            start_time = datetime.strptime(string_date, '%Y-%m-%d')\n\n            string_date = '-'.join(ds['yymmddHHMMSS'][0].values.astype(int).astype(str)[:3])\n            end_time = datetime.strptime(string_date, '%Y-%m-%d')\n\n        if 'description' in ds.attrs:\n            description = ds.attrs['description']\n        else:\n            description = f'Dataset with variables related to {dataset_name}.'\n            \n        template = {\n\n            \"id\": f\"{collection.id}-{dataset_name.lower().replace(' ', '_')}\",\n            \"type\": \"Feature\",\n            \"stac_version\": \"1.0.0\",\n            \"properties\": {\n                \"title\": dataset_name,\n                \"description\": description,\n                \"start_datetime\": start_time.strftime(\"%Y-%m-%dT%H:%M:%SZ\"),\n                \"end_datetime\": end_time.strftime(\"%Y-%m-%dT%H:%M:%SZ\"),\n                \"region\": region,\n            },\n            \"geometry\": geometry,\n            \"bbox\": bbox,\n            \"assets\": {\n                \"data\": {\n                    \"href\": f\"./{collectionid}/{dataset_filepath.split('/')[-1]}\",  # or local path\n                    \"type\": \"application/x-netcdf\",\n                    \"roles\": [\"data\"],\n                    \"title\": dataset_name\n                }\n            }\n        }\n\n        # remove numpy values from attrs:\n        for var in ds.variables:\n            ds[var].attrs = convert_to_json_serialisable(ds[var].attrs)\n\n        if 'lon' in ds.coords:\n            x_dim, y_dim = 'lon', 'lat'\n        if 'longitude' in ds.coords:\n            x_dim, y_dim ='longitude', 'latitude'\n        elif 'x' in ds.coords:\n            x_dim, y_dim = 'x', 'y'\n        else:\n            x_dim, y_dim = False, False\n        \n        # 3. Generate the STAC Item\n        item = xarray_to_stac(\n            ds,\n            template,\n            temporal_dimension=\"time\" if 'time' in ds.variables else False,\n            x_dimension=x_dim,\n            y_dimension=y_dim,  \n            reference_system=False\n        )\n\n        # validate and add the STAC Item to the collection\n        item.validate()\n\n        # manually add license after validation since its new\n        item.properties['license'] = ds.attrs['license']\n        collection.add_item(item)\n    ","key":"EFNmEeMoYC"},{"type":"output","id":"QAjXn9P94N0umirOIycGr","data":[],"key":"iUckbruqzm"}],"key":"AESsAo8aeY"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2.2 Define ‚ÄòSodankylae and Lapland‚Äô data and links","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yZubGAcGzo"}],"identifier":"id-2-2-define-sodankylae-and-lapland-data-and-links","label":"2.2 Define ‚ÄòSodankylae and Lapland‚Äô data and links","html_id":"id-2-2-define-sodankylae-and-lapland-data-and-links","implicit":true,"key":"mWQFEyuACn"}],"key":"p02ds3dJTN"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# define dataset names and base url. If the data is locally stored, then you have to adjust these paths.\n\n# create the parent collection\nroot_url = 'https://lcc.inversion-lab.com/data/eo/'\nregion = 'sodankylae'\ncollectionid = \"tccas-sodankylae\"\nbbox = [18.00, 65.00, 32.00, 69.00]\ngeometry = json.loads(json.dumps(shapely.box(*bbox).__geo_interface__))\ndata_time = pd.to_datetime('2021-12-31T00:00:00Z')\n\ndata_files = {\n    \"Fraction of absorbed Photosynthetic Active Radiation Leaf Area Index (JRC-TIP)\": \"/jrc-tip/jrctip_fapar-lai_sodankyla_20110101-20220105.nc\",\n    \"Brightness temperature (SMOS TB)\": \"smos/smos_l3tb/SMOS_L3TB__sodankyla.nc\",\n    \"Soil moisture and Vegetation Optical Depth (SMOS SM and SMOS L-VOD)\": \"smos/smosL2/smosL2_1D_v700_sodankyla_trans.nc\",\n    \"Solar Induced Chlorophyll Fluorescence (Sentinel 5P)\": \"sif/tropomi/Sodankyla_SIF_TROPOMI_final.nc4\",\n    \"Slope (ASCAT Slope)\": \"ascat/local_slope.final/ASCAT_slope_so.nc\",\n    \"Photochemical Reflectance Index (MODIS PRI)\": \"modis/final/PRI_ESTIMATE_SODANKYLA_SINUSOIDAL.nc\",\n    \"Land Surface Temperature (MODIS LST)\": \"modis/final/LST_ESTIMATE_SODANKYLA_SINUSOIDAL.nc\",\n    \"Solar Induced Chlorophyll Fluorescence (OCO-2 SIF)\": \"sif/oco2/Sodankyla_SIF_OCO2_final.nc4\",\n    \"Vegetation Optical Depth (AMSR-2 VOD)\": \"amsr2/final/AMSR2_so.nc\"\n} \n\nmodel_forcing = {\n    \"static-site-level\": \"FI-Sod_staticforcing.nc\",\n    \"time-dependent (ERA5) - site level\": \"FI-Sod_dynforcing-era5_20090101-20211231_with-lwdown.nc\",\n    \"time-dependent (in-situ) - site level\": \"FI-Sod_dynforcing-insitu_20090101-20211231_with-insitu-lwdown.nc\",\n    \"static-regional\": \"sodankyla-region_cgls-pft-crops-redistributed_staticforcing.nc\",\n    \"time-dependent (ERA5) - regional\": \"sodankyla-region_dynforcing_era5_2009-2021.nc\"\n}\n\n\n\n\n\ncollection = Collection.from_dict(\n    \n{\n  \"type\": \"Collection\",\n  \"id\": collectionid,\n  \"stac_version\": \"1.1.0\",\n  \"title\": \"Terrestrial Carbon Community Assimilation System: Database for Lapland and Sodankyla region\",\n  \"description\": \"The Terrestrial Carbon Community Assimilation System (TCCAS) is built around the coupled D&B terrestrial biosphere model. D&B has been newly developed based on the well-established DALEC and BETHY models and builds on the strengths of each component model. In particular, D&B combines the dynamic simulation of the carbon pools and canopy phenology of DALEC with the dynamic simulation of water pools, and the canopy model of photosynthesis and energy balance of BETHY. D&B includes a set of observation operators for optical as well as active and passive microwave observations. The focus of TCCAS is the combination of this diverse array of observational data streams with the D&B model into a consistent picture of the terrestrial carbon, water, and energy cycles. TCCAS applies a variational assimilation approach that adjusts a combination of initial pool sizes and process parameters to match the observational data streams. This dataset includes Satelite, Field and model forcing data sets for Sodankyl√§ and Lapland region.\",\n  \"extent\": {\n    \"spatial\": {\n      \"bbox\": [\n        [\n          18.00,\n          65.00,\n          32.00,\n          69.00\n        ]\n      ]\n    },\n    \"temporal\": {\n      \"interval\": [\n        [\n          \"2011-01-01T00:00:00Z\",\n          \"2021-12-31T00:00:00Z\"\n        ]\n      ]\n    }\n  },\n  \"license\": \"various\",\n  \"links\": []\n\n}\n\n)\n\ncollection # visualise the metadata of your collection ","key":"aefval3prn"},{"type":"output","id":"zUpVVO9m5wrR2U8AgNH8F","data":[{"output_type":"execute_result","execution_count":7,"metadata":{},"data":{"text/html":{"content":"\n\n<style>\n.pystac-summary {\n    cursor: pointer;\n    display: list-item;\n    list-style: revert;\n    margin-bottom: 0 !important;\n\n    .pystac-l {\n        padding-left: 0.5em;\n        color: rgb(64, 128, 128);\n        font-style: italic;\n    }\n}\n.pystac-row {\n    overflow-wrap: break-word;\n    padding-left: .825em;\n\n    .pystac-k {\n        display: inline-block;\n        margin: 0px 0.5em 0px 0px;\n    }\n    .pystac-v {\n        color: rgb(186, 33, 33);\n    }\n}\n.pystac-k {\n    color: rgb(0, 128, 0);\n    font-weight: 700;\n}\n</style>\n<div class=\"jp-RenderedJSON jp-mod-trusted jp-OutputArea-output\">\n    <div class=\"container\" style=\"line-height: normal;\">\n        <ul style=\"padding: 0px; margin: 0px; list-style: none; display: block;\">\n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"Collection\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">id</span>\n            <span class=\"pystac-v\">\"tccas-sodankylae\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">stac_version</span>\n            <span class=\"pystac-v\">\"1.1.0\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">description</span>\n            <span class=\"pystac-v\">\"The Terrestrial Carbon Community Assimilation System (TCCAS) is built around the coupled D&B terrestrial biosphere model. D&B has been newly developed based on the well-established DALEC and BETHY models and builds on the strengths of each component model. In particular, D&B combines the dynamic simulation of the carbon pools and canopy phenology of DALEC with the dynamic simulation of water pools, and the canopy model of photosynthesis and energy balance of BETHY. D&B includes a set of observation operators for optical as well as active and passive microwave observations. The focus of TCCAS is the combination of this diverse array of observational data streams with the D&B model into a consistent picture of the terrestrial carbon, water, and energy cycles. TCCAS applies a variational assimilation approach that adjusts a combination of initial pool sizes and process parameters to match the observational data streams. This dataset includes Satelite, Field and model forcing data sets for Sodankyl√§ and Lapland region.\"</span>\n        </li>\n    \n                \n            \n                \n                    <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">links</span><span class=\"pystac-l\">[] 0 items</span></summary>\n        \n    </details></li>\n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Terrestrial Carbon Community Assimilation System: Database for Lapland and Sodankyla region\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">extent</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">spatial</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">bbox</span><span class=\"pystac-l\">[] 1 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span><span class=\"pystac-l\">[] 4 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">0</span>\n            <span class=\"pystac-v\">18.0</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">1</span>\n            <span class=\"pystac-v\">65.0</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">2</span>\n            <span class=\"pystac-v\">32.0</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">3</span>\n            <span class=\"pystac-v\">69.0</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">temporal</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">interval</span><span class=\"pystac-l\">[] 1 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span><span class=\"pystac-l\">[] 2 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">0</span>\n            <span class=\"pystac-v\">\"2011-01-01T00:00:00Z\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">1</span>\n            <span class=\"pystac-v\">\"2021-12-31T00:00:00Z\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">license</span>\n            <span class=\"pystac-v\">\"various\"</span>\n        </li>\n    \n                \n            \n        </ul>\n    </div>\n</div>","content_type":"text/html"},"text/plain":{"content":"<Collection id=tccas-sodankylae>","content_type":"text/plain"}}}],"key":"TOI98FjrNL"}],"key":"Ion37gZ4S5"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"create_items_from_data(\n    collectionid,\n    geometry,\n    bbox,\n    collection,\n    root_url,\n    data_files,\n    region,\n)","key":"FehiHFozKB"},{"type":"output","id":"CDxb0gmuGMUay9O6FCm5N","data":[{"name":"stderr","output_type":"stream","text":"/tmp/ipykernel_119170/4235652563.py:12: UserWarning: no explicit representation of timezones available for np.datetime64\n  ts = (start_time - np.datetime64('1970-01-01T00:00:00Z')) / np.timedelta64(1, 's')\n/tmp/ipykernel_119170/4235652563.py:16: UserWarning: no explicit representation of timezones available for np.datetime64\n  ts = (end_time - np.datetime64('1970-01-01T00:00:00Z')) / np.timedelta64(1, 's')\n/tmp/ipykernel_119170/4235652563.py:8: FutureWarning: In a future version of xarray decode_timedelta will default to False rather than None. To silence this warning, set decode_timedelta to True, False, or a 'CFTimedeltaCoder' instance.\n  ds = xr.open_dataset(root_url + dataset_filepath + '#mode=bytes')\n/tmp/ipykernel_119170/4235652563.py:12: UserWarning: no explicit representation of timezones available for np.datetime64\n  ts = (start_time - np.datetime64('1970-01-01T00:00:00Z')) / np.timedelta64(1, 's')\n/tmp/ipykernel_119170/4235652563.py:16: UserWarning: no explicit representation of timezones available for np.datetime64\n  ts = (end_time - np.datetime64('1970-01-01T00:00:00Z')) / np.timedelta64(1, 's')\n"}],"key":"ShPcd3RzwJ"}],"key":"QudWyu6D1F"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# add a single item with all the in-situ data, since it comes in a single .tgz file\n\nadd_insitu_data(\n    collectionid,\n    geometry,\n    bbox,\n    data_time,\n    collection,\n    'sodankyla-insitu-package.tgz',\n)","key":"GriJfhwJv4"},{"type":"output","id":"amfEQq7MNyzHm9TxiF5nm","data":[{"name":"stdout","output_type":"stream","text":"2021-12-31 00:00:00+00:00\n"}],"key":"Z0vVP4sTvg"}],"key":"WkEUAC7KX9"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"create_model_forcing_item(\n    collectionid,\n    geometry,\n    bbox,\n    data_time,\n    collection,\n    model_forcing)","key":"aps1Z90rpM"},{"type":"output","id":"5lHNk1Ftu1dNh6aWHmmQE","data":[],"key":"urZDMRxouH"}],"key":"fMQIouVEZY"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"add_documentation_item(\n    collectionid,\n    geometry,\n    bbox,\n    data_time,\n    collection)","key":"bfaoPzZVOH"},{"type":"output","id":"dF63wYiyitqzP-478uoYc","data":[],"key":"SC7kItk8h0"}],"key":"PTUK05THSl"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# save the full self-contained collection\ncollection.normalize_and_save(\n    root_href=f'../../prr_preview/{collectionid}',\n    catalog_type=pystac.CatalogType.SELF_CONTAINED\n)","key":"Uj2vu8PAL4"},{"type":"output","id":"RuzTH59MTiuxB1XGt4Uom","data":[],"key":"UjEqGkXRt0"}],"key":"t0an6MFmc1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"collection","key":"rzIufC9Yuq"},{"type":"output","id":"Ga1LFa0iQ5ypNrhubAEp2","data":[{"output_type":"execute_result","execution_count":13,"metadata":{},"data":{"text/html":{"content":"\n\n<style>\n.pystac-summary {\n    cursor: pointer;\n    display: list-item;\n    list-style: revert;\n    margin-bottom: 0 !important;\n\n    .pystac-l {\n        padding-left: 0.5em;\n        color: rgb(64, 128, 128);\n        font-style: italic;\n    }\n}\n.pystac-row {\n    overflow-wrap: break-word;\n    padding-left: .825em;\n\n    .pystac-k {\n        display: inline-block;\n        margin: 0px 0.5em 0px 0px;\n    }\n    .pystac-v {\n        color: rgb(186, 33, 33);\n    }\n}\n.pystac-k {\n    color: rgb(0, 128, 0);\n    font-weight: 700;\n}\n</style>\n<div class=\"jp-RenderedJSON jp-mod-trusted jp-OutputArea-output\">\n    <div class=\"container\" style=\"line-height: normal;\">\n        <ul style=\"padding: 0px; margin: 0px; list-style: none; display: block;\">\n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"Collection\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">id</span>\n            <span class=\"pystac-v\">\"tccas-sodankylae\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">stac_version</span>\n            <span class=\"pystac-v\">\"1.1.0\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">description</span>\n            <span class=\"pystac-v\">\"The Terrestrial Carbon Community Assimilation System (TCCAS) is built around the coupled D&B terrestrial biosphere model. D&B has been newly developed based on the well-established DALEC and BETHY models and builds on the strengths of each component model. In particular, D&B combines the dynamic simulation of the carbon pools and canopy phenology of DALEC with the dynamic simulation of water pools, and the canopy model of photosynthesis and energy balance of BETHY. D&B includes a set of observation operators for optical as well as active and passive microwave observations. The focus of TCCAS is the combination of this diverse array of observational data streams with the D&B model into a consistent picture of the terrestrial carbon, water, and energy cycles. TCCAS applies a variational assimilation approach that adjusts a combination of initial pool sizes and process parameters to match the observational data streams. This dataset includes Satelite, Field and model forcing data sets for Sodankyl√§ and Lapland region.\"</span>\n        </li>\n    \n                \n            \n                \n                    <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">links</span><span class=\"pystac-l\">[] 14 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"root\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-sodankylae/collection.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Terrestrial Carbon Community Assimilation System: Database for Lapland and Sodankyla region\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">1</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-sodankylae/tccas-sodankylae-fraction_of_absorbed_photosynthetic_active_radiation_leaf_area_index_(jrc-tip)/tccas-sodankylae-fraction_of_absorbed_photosynthetic_active_radiation_leaf_area_index_(jrc-tip).json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">2</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-sodankylae/tccas-sodankylae-brightness_temperature_(smos_tb)/tccas-sodankylae-brightness_temperature_(smos_tb).json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">3</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-sodankylae/tccas-sodankylae-soil_moisture_and_vegetation_optical_depth_(smos_sm_and_smos_l-vod)/tccas-sodankylae-soil_moisture_and_vegetation_optical_depth_(smos_sm_and_smos_l-vod).json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">4</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-sodankylae/tccas-sodankylae-solar_induced_chlorophyll_fluorescence_(sentinel_5p)/tccas-sodankylae-solar_induced_chlorophyll_fluorescence_(sentinel_5p).json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">5</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-sodankylae/tccas-sodankylae-slope_(ascat_slope)/tccas-sodankylae-slope_(ascat_slope).json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">6</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-sodankylae/tccas-sodankylae-photochemical_reflectance_index_(modis_pri)/tccas-sodankylae-photochemical_reflectance_index_(modis_pri).json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">7</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-sodankylae/tccas-sodankylae-land_surface_temperature_(modis_lst)/tccas-sodankylae-land_surface_temperature_(modis_lst).json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">8</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-sodankylae/tccas-sodankylae-solar_induced_chlorophyll_fluorescence_(oco-2_sif)/tccas-sodankylae-solar_induced_chlorophyll_fluorescence_(oco-2_sif).json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">9</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-sodankylae/tccas-sodankylae-vegetation_optical_depth_(amsr-2_vod)/tccas-sodankylae-vegetation_optical_depth_(amsr-2_vod).json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">10</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-sodankylae/tccas-sodankylae-insitu_package/tccas-sodankylae-insitu_package.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">11</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-sodankylae/tccas-sodankylae-model_forcing/tccas-sodankylae-model_forcing.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">12</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-sodankylae/tccas-sodankylae-documentation/tccas-sodankylae-documentation.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">13</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"self\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-sodankylae/collection.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Terrestrial Carbon Community Assimilation System: Database for Lapland and Sodankyla region\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">extent</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">spatial</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">bbox</span><span class=\"pystac-l\">[] 1 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span><span class=\"pystac-l\">[] 4 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">0</span>\n            <span class=\"pystac-v\">18.0</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">1</span>\n            <span class=\"pystac-v\">65.0</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">2</span>\n            <span class=\"pystac-v\">32.0</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">3</span>\n            <span class=\"pystac-v\">69.0</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">temporal</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">interval</span><span class=\"pystac-l\">[] 1 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span><span class=\"pystac-l\">[] 2 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">0</span>\n            <span class=\"pystac-v\">\"2011-01-01T00:00:00Z\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">1</span>\n            <span class=\"pystac-v\">\"2021-12-31T00:00:00Z\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">license</span>\n            <span class=\"pystac-v\">\"various\"</span>\n        </li>\n    \n                \n            \n        </ul>\n    </div>\n</div>","content_type":"text/html"},"text/plain":{"content":"<Collection id=tccas-sodankylae>","content_type":"text/plain"}}}],"key":"OeGRE3WnZ8"}],"key":"n4ndy537IM"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2.2 Define ‚ÄòNetherlands region (including Reusel)‚Äô data and links","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CW8vC5o3gA"}],"identifier":"id-2-2-define-netherlands-region-including-reusel-data-and-links","label":"2.2 Define ‚ÄòNetherlands region (including Reusel)‚Äô data and links","html_id":"id-2-2-define-netherlands-region-including-reusel-data-and-links","implicit":true,"key":"QFOkK321DY"}],"key":"iMykBWDMP0"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# define dataset names and base url. If the data is locally stored, then you have to adjust these paths.\n\n# create the parent collection\nroot_url = 'https://lcc.inversion-lab.com/data/eo/'\nregion = 'netherlands'\ncollectionid = \"tccas-netherlands\"\nbbox = [4.502, 47.502, 11.477, 51.999]\ngeometry = json.loads(json.dumps(shapely.box(*bbox).__geo_interface__))\ndata_time = pd.to_datetime('2021-12-31T00:00:00Z')\n\ndata_files = {\n    \"Vegetation Optical Depth (SMOS)\": \"smos/smosL2/smosL2_1D_v700_reusel_trans.nc\",\n    \"Slope\": \"ascat/local_slope.final/ASCAT_slope_re.nc\",\n    \"Solar Induced Chlorophyll Fluorescence\": \"sif/tropomi/Reusel_SIF_TROPOMI_final.nc4\",\n    \"Soil moisture\": \"smos/smosL2/smosL2_1D_v700_reusel_trans.nc\",\n    \"Brightness temperature\": \"smos/smos_l3tb/SMOS_L3TB__reusel.nc\",\n    \"Vegetation Optical Depth\": \"amsr2/final/AMSR2_re.nc\",\n    \"Solar Induced Chlorophyll Fluorescence (OCO2)\": \"sif/oco2/Reusel_SIF_OCO2_final.nc4\",\n    \"Land Surface Temperature\": \"modis/final/LST_ESTIMATE_REUSEL_SINUSOIDAL.nc\",\n    \"Photochemical Reflectance Index\": \"modis/final/PRI_ESTIMATE_REUSEL_SINUSOIDAL.nc\"\n}\n\n\ncollection = Collection.from_dict(\n    \n{\n  \"type\": \"Collection\",\n  \"id\": collectionid,\n  \"stac_version\": \"1.1.0\",\n  \"title\": \"Terrestrial Carbon Community Assimilation System: Database for the Netherlands region (including Reusel)\",\n  \"description\": \"The Terrestrial Carbon Community Assimilation System (TCCAS) is built around the coupled D&B terrestrial biosphere model. D&B has been newly developed based on the well-established DALEC and BETHY models and builds on the strengths of each component model. In particular, D&B combines the dynamic simulation of the carbon pools and canopy phenology of DALEC with the dynamic simulation of water pools, and the canopy model of photosynthesis and energy balance of BETHY. D&B includes a set of observation operators for optical as well as active and passive microwave observations. The focus of TCCAS is the combination of this diverse array of observational data streams with the D&B model into a consistent picture of the terrestrial carbon, water, and energy cycles. TCCAS applies a variational assimilation approach that adjusts a combination of initial pool sizes and process parameters to match the observational data streams. This dataset includes Satelite, Field and model forcing data sets for the Netherlands region, including Reusel.\",\n  \"extent\": {\n    \"spatial\": {\n      \"bbox\": [\n         [4.502, 47.502, 11.477, 51.999]\n      ]\n    },\n    \"temporal\": {\n      \"interval\": [\n        [\n          \"2011-01-01T00:00:00Z\",\n          \"2021-12-31T00:00:00Z\"\n        ]\n      ]\n    }\n  },\n  \"license\": \"various\",\n  \"links\": []\n\n}\n\n)\n\ncollection # visualise the metadata of your collection ","key":"bWrdE7zf5Q"},{"type":"output","id":"nT08_uaxAtGmiQNB5-nEa","data":[{"output_type":"execute_result","execution_count":14,"metadata":{},"data":{"text/html":{"content":"\n\n<style>\n.pystac-summary {\n    cursor: pointer;\n    display: list-item;\n    list-style: revert;\n    margin-bottom: 0 !important;\n\n    .pystac-l {\n        padding-left: 0.5em;\n        color: rgb(64, 128, 128);\n        font-style: italic;\n    }\n}\n.pystac-row {\n    overflow-wrap: break-word;\n    padding-left: .825em;\n\n    .pystac-k {\n        display: inline-block;\n        margin: 0px 0.5em 0px 0px;\n    }\n    .pystac-v {\n        color: rgb(186, 33, 33);\n    }\n}\n.pystac-k {\n    color: rgb(0, 128, 0);\n    font-weight: 700;\n}\n</style>\n<div class=\"jp-RenderedJSON jp-mod-trusted jp-OutputArea-output\">\n    <div class=\"container\" style=\"line-height: normal;\">\n        <ul style=\"padding: 0px; margin: 0px; list-style: none; display: block;\">\n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"Collection\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">id</span>\n            <span class=\"pystac-v\">\"tccas-netherlands\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">stac_version</span>\n            <span class=\"pystac-v\">\"1.1.0\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">description</span>\n            <span class=\"pystac-v\">\"The Terrestrial Carbon Community Assimilation System (TCCAS) is built around the coupled D&B terrestrial biosphere model. D&B has been newly developed based on the well-established DALEC and BETHY models and builds on the strengths of each component model. In particular, D&B combines the dynamic simulation of the carbon pools and canopy phenology of DALEC with the dynamic simulation of water pools, and the canopy model of photosynthesis and energy balance of BETHY. D&B includes a set of observation operators for optical as well as active and passive microwave observations. The focus of TCCAS is the combination of this diverse array of observational data streams with the D&B model into a consistent picture of the terrestrial carbon, water, and energy cycles. TCCAS applies a variational assimilation approach that adjusts a combination of initial pool sizes and process parameters to match the observational data streams. This dataset includes Satelite, Field and model forcing data sets for the Netherlands region, including Reusel.\"</span>\n        </li>\n    \n                \n            \n                \n                    <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">links</span><span class=\"pystac-l\">[] 0 items</span></summary>\n        \n    </details></li>\n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Terrestrial Carbon Community Assimilation System: Database for the Netherlands region (including Reusel)\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">extent</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">spatial</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">bbox</span><span class=\"pystac-l\">[] 1 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span><span class=\"pystac-l\">[] 4 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">0</span>\n            <span class=\"pystac-v\">4.502</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">1</span>\n            <span class=\"pystac-v\">47.502</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">2</span>\n            <span class=\"pystac-v\">11.477</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">3</span>\n            <span class=\"pystac-v\">51.999</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">temporal</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">interval</span><span class=\"pystac-l\">[] 1 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span><span class=\"pystac-l\">[] 2 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">0</span>\n            <span class=\"pystac-v\">\"2011-01-01T00:00:00Z\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">1</span>\n            <span class=\"pystac-v\">\"2021-12-31T00:00:00Z\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">license</span>\n            <span class=\"pystac-v\">\"various\"</span>\n        </li>\n    \n                \n            \n        </ul>\n    </div>\n</div>","content_type":"text/html"},"text/plain":{"content":"<Collection id=tccas-netherlands>","content_type":"text/plain"}}}],"key":"BvruNlmnGc"}],"key":"D4JBPA01cM"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"create_items_from_data(\n    collectionid,\n    geometry,\n    bbox,\n    collection,\n    root_url,\n    data_files,\n    region,\n)","key":"UI8dw7lo6T"},{"type":"output","id":"KTErntFrEWV8QDEgrFNLt","data":[{"name":"stderr","output_type":"stream","text":"/tmp/ipykernel_119170/4235652563.py:8: FutureWarning: In a future version of xarray decode_timedelta will default to False rather than None. To silence this warning, set decode_timedelta to True, False, or a 'CFTimedeltaCoder' instance.\n  ds = xr.open_dataset(root_url + dataset_filepath + '#mode=bytes')\n/tmp/ipykernel_119170/4235652563.py:12: UserWarning: no explicit representation of timezones available for np.datetime64\n  ts = (start_time - np.datetime64('1970-01-01T00:00:00Z')) / np.timedelta64(1, 's')\n/tmp/ipykernel_119170/4235652563.py:16: UserWarning: no explicit representation of timezones available for np.datetime64\n  ts = (end_time - np.datetime64('1970-01-01T00:00:00Z')) / np.timedelta64(1, 's')\n"}],"key":"ZouQ0kvTxz"}],"key":"XiCeUuMbP2"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# add a single item with all the in-situ data, since it comes in a single .tgz file\n\nadd_insitu_data(\n    collectionid,\n    geometry,\n    bbox,\n    data_time,\n    collection,\n    'reusel-insitu-package.tgz',\n)","key":"YXnzrJm3g9"},{"type":"output","id":"hF8QgzykEE6XO4k_w-qD1","data":[{"name":"stdout","output_type":"stream","text":"2021-12-31 00:00:00+00:00\n"}],"key":"DWX3nEUtkR"}],"key":"FSHoGPoO5U"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"add_documentation_item(\n    collectionid,\n    geometry,\n    bbox,\n    data_time,\n    collection)","key":"Pl5KGCffMm"},{"type":"output","id":"EIlNvOWO8TwIJfGOFW0uM","data":[],"key":"ymmQnWZZed"}],"key":"HHWyeUuYRO"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# save the full self-contained collection\ncollection.normalize_and_save(\n    root_href=f'../../prr_preview/{collectionid}',\n    catalog_type=pystac.CatalogType.SELF_CONTAINED\n)","key":"f1tPp2BvIZ"},{"type":"output","id":"hMYZFiTQUxxPDCck-18_F","data":[],"key":"RfRbW9AbcF"}],"key":"D81lMvClsy"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"collection","key":"z7AvA2zoEi"},{"type":"output","id":"EhSWfmV0io9oYnZG_AXLv","data":[{"output_type":"execute_result","execution_count":19,"metadata":{},"data":{"text/html":{"content":"\n\n<style>\n.pystac-summary {\n    cursor: pointer;\n    display: list-item;\n    list-style: revert;\n    margin-bottom: 0 !important;\n\n    .pystac-l {\n        padding-left: 0.5em;\n        color: rgb(64, 128, 128);\n        font-style: italic;\n    }\n}\n.pystac-row {\n    overflow-wrap: break-word;\n    padding-left: .825em;\n\n    .pystac-k {\n        display: inline-block;\n        margin: 0px 0.5em 0px 0px;\n    }\n    .pystac-v {\n        color: rgb(186, 33, 33);\n    }\n}\n.pystac-k {\n    color: rgb(0, 128, 0);\n    font-weight: 700;\n}\n</style>\n<div class=\"jp-RenderedJSON jp-mod-trusted jp-OutputArea-output\">\n    <div class=\"container\" style=\"line-height: normal;\">\n        <ul style=\"padding: 0px; margin: 0px; list-style: none; display: block;\">\n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"Collection\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">id</span>\n            <span class=\"pystac-v\">\"tccas-netherlands\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">stac_version</span>\n            <span class=\"pystac-v\">\"1.1.0\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">description</span>\n            <span class=\"pystac-v\">\"The Terrestrial Carbon Community Assimilation System (TCCAS) is built around the coupled D&B terrestrial biosphere model. D&B has been newly developed based on the well-established DALEC and BETHY models and builds on the strengths of each component model. In particular, D&B combines the dynamic simulation of the carbon pools and canopy phenology of DALEC with the dynamic simulation of water pools, and the canopy model of photosynthesis and energy balance of BETHY. D&B includes a set of observation operators for optical as well as active and passive microwave observations. The focus of TCCAS is the combination of this diverse array of observational data streams with the D&B model into a consistent picture of the terrestrial carbon, water, and energy cycles. TCCAS applies a variational assimilation approach that adjusts a combination of initial pool sizes and process parameters to match the observational data streams. This dataset includes Satelite, Field and model forcing data sets for the Netherlands region, including Reusel.\"</span>\n        </li>\n    \n                \n            \n                \n                    <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">links</span><span class=\"pystac-l\">[] 13 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"root\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-netherlands/collection.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Terrestrial Carbon Community Assimilation System: Database for the Netherlands region (including Reusel)\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">1</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-netherlands/tccas-netherlands-vegetation_optical_depth_(smos)/tccas-netherlands-vegetation_optical_depth_(smos).json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">2</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-netherlands/tccas-netherlands-slope/tccas-netherlands-slope.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">3</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-netherlands/tccas-netherlands-solar_induced_chlorophyll_fluorescence/tccas-netherlands-solar_induced_chlorophyll_fluorescence.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">4</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-netherlands/tccas-netherlands-soil_moisture/tccas-netherlands-soil_moisture.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">5</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-netherlands/tccas-netherlands-brightness_temperature/tccas-netherlands-brightness_temperature.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">6</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-netherlands/tccas-netherlands-vegetation_optical_depth/tccas-netherlands-vegetation_optical_depth.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">7</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-netherlands/tccas-netherlands-solar_induced_chlorophyll_fluorescence_(oco2)/tccas-netherlands-solar_induced_chlorophyll_fluorescence_(oco2).json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">8</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-netherlands/tccas-netherlands-land_surface_temperature/tccas-netherlands-land_surface_temperature.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">9</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-netherlands/tccas-netherlands-photochemical_reflectance_index/tccas-netherlands-photochemical_reflectance_index.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">10</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-netherlands/tccas-netherlands-insitu_package/tccas-netherlands-insitu_package.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">11</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-netherlands/tccas-netherlands-documentation/tccas-netherlands-documentation.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">12</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"self\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/prr_preview/tccas-netherlands/collection.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Terrestrial Carbon Community Assimilation System: Database for the Netherlands region (including Reusel)\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">extent</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">spatial</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">bbox</span><span class=\"pystac-l\">[] 1 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span><span class=\"pystac-l\">[] 4 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">0</span>\n            <span class=\"pystac-v\">4.502</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">1</span>\n            <span class=\"pystac-v\">47.502</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">2</span>\n            <span class=\"pystac-v\">11.477</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">3</span>\n            <span class=\"pystac-v\">51.999</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">temporal</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">interval</span><span class=\"pystac-l\">[] 1 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span><span class=\"pystac-l\">[] 2 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">0</span>\n            <span class=\"pystac-v\">\"2011-01-01T00:00:00Z\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">1</span>\n            <span class=\"pystac-v\">\"2021-12-31T00:00:00Z\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">license</span>\n            <span class=\"pystac-v\">\"various\"</span>\n        </li>\n    \n                \n            \n        </ul>\n    </div>\n</div>","content_type":"text/html"},"text/plain":{"content":"<Collection id=tccas-netherlands>","content_type":"text/plain"}}}],"key":"hTin6mbFFH"}],"key":"a0f90nmwru"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2.2 Define ‚ÄòMajadas del Tietar and Iberian region‚Äô data and links","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Wd88SWL2Pd"}],"identifier":"id-2-2-define-majadas-del-tietar-and-iberian-region-data-and-links","label":"2.2 Define ‚ÄòMajadas del Tietar and Iberian region‚Äô data and links","html_id":"id-2-2-define-majadas-del-tietar-and-iberian-region-data-and-links","implicit":true,"key":"WMJ0z8nXvy"}],"key":"S7Vb58eyB1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# define dataset names and base url. If the data is locally stored, then you have to adjust these paths.\n\n\n# create the parent collection\nroot_url = 'https://lcc.inversion-lab.com/data/eo/'\nregion = 'iberia'\ncollectionid = \"tccas-iberia\"\nbbox = [-8.496, 38.501, -2.505, 42.997]\ngeometry = json.loads(json.dumps(shapely.box(*bbox).__geo_interface__))\ndata_time = pd.to_datetime('2021-12-31T00:00:00Z')\n\ndata_files = {\n    \"Vegetation Optical Depth (SMOS)\": \"smos/smosL2/smosL2_1D_v700_lasmajadas_trans.nc\",\n    \"Slope\": \"ascat/local_slope.final/ASCAT_slope_lm.nc\",\n    \"Solar Induced Chlorophyll Fluorescence\": \"sif/tropomi/Majadas_SIF_TROPOMI_final.nc4\",\n    \"Fraction of absorbed Photosynthetic Active Radiation, Leaf Area Index\": \"jrc-tip/jrctip_fapar-lai_majadas_20110101-20220105.nc\",\n    \"Soil moisture\": \"smos/smosL2/smosL2_1D_v700_lasmajadas_trans.nc\",\n    \"Brightness temperature\": \"smos/smos_l3tb/SMOS_L3TB__lasmajadas.nc\",\n    \"Vegetation Optical Depth\": \"amsr2/final/AMSR2_lm.nc\",\n    \"Land Surface Temperature\": \"modis/final/LST_ESTIMATE_MAJADAS_SINUSOIDAL.nc\",\n    \"Photochemical Reflectance Index\": \"modis/final/PRI_ESTIMATE_MAJADAS_SINUSOIDAL.nc\",\n    \"Solar Induced Chlorophyll Fluorescence (OCO2)\": \"sif/oco2/Majadas_SIF_OCO2_final.nc4\"\n}\n\nmodel_forcing = {\n    \"static\": \"ES-LM1_staticforcing.nc\",\n    \"time-dependent (ERA5)\": \"ES-LM1_dynforcing-era5_20090101-20211231_with-lwdown.nc\",\n    \"time-dependent (in-situ)\": \"ES-LM1_dynforcing-insitu_20140401-20220930_with-insitu-lwdown.nc\",\n    \"static-regional\": \"majadas-region_cgls-pft-moli2bare_staticforcing.nc\",\n    \"time-dependent (ERA5)-regional\": \"majadas-region_dynforcing_era5_2009-2021.nc\"\n}\n\n\n\ncollection = Collection.from_dict(\n    \n{\n  \"type\": \"Collection\",\n  \"id\": collectionid,\n  \"stac_version\": \"1.1.0\",\n  \"title\": \"Terrestrial Carbon Community Assimilation System: Database for Iberian region (including Majadas del Tietar)\",\n  \"description\": \"The Terrestrial Carbon Community Assimilation System (TCCAS) is built around the coupled D&B terrestrial biosphere model. D&B has been newly developed based on the well-established DALEC and BETHY models and builds on the strengths of each component model. In particular, D&B combines the dynamic simulation of the carbon pools and canopy phenology of DALEC with the dynamic simulation of water pools, and the canopy model of photosynthesis and energy balance of BETHY. D&B includes a set of observation operators for optical as well as active and passive microwave observations. The focus of TCCAS is the combination of this diverse array of observational data streams with the D&B model into a consistent picture of the terrestrial carbon, water, and energy cycles. TCCAS applies a variational assimilation approach that adjusts a combination of initial pool sizes and process parameters to match the observational data streams. This dataset includes Satelite, Field and model forcing data sets for the Iberian region, including Majadas del Tietar.\",\n  \"extent\": {\n    \"spatial\": {\n      \"bbox\": [\n        [-8.496, 38.501, -2.505, 42.997]\n      ]\n    },\n    \"temporal\": {\n      \"interval\": [\n        [\n          \"2011-01-01T00:00:00Z\",\n          \"2021-12-31T00:00:00Z\"\n        ]\n      ]\n    }\n  },\n  \"license\": \"various\",\n  \"links\": []\n\n}\n\n)\n\ncollection # visualise the metadata of your collection ","key":"UAwPDnXxq4"},{"type":"output","id":"xJXCJjBU9KYPtLKSkLpNE","data":[{"output_type":"execute_result","execution_count":20,"metadata":{},"data":{"text/html":{"content":"\n\n<style>\n.pystac-summary {\n    cursor: pointer;\n    display: list-item;\n    list-style: revert;\n    margin-bottom: 0 !important;\n\n    .pystac-l {\n        padding-left: 0.5em;\n        color: rgb(64, 128, 128);\n        font-style: italic;\n    }\n}\n.pystac-row {\n    overflow-wrap: break-word;\n    padding-left: .825em;\n\n    .pystac-k {\n        display: inline-block;\n        margin: 0px 0.5em 0px 0px;\n    }\n    .pystac-v {\n        color: rgb(186, 33, 33);\n    }\n}\n.pystac-k {\n    color: rgb(0, 128, 0);\n    font-weight: 700;\n}\n</style>\n<div class=\"jp-RenderedJSON jp-mod-trusted jp-OutputArea-output\">\n    <div class=\"container\" style=\"line-height: normal;\">\n        <ul style=\"padding: 0px; margin: 0px; list-style: none; display: block;\">\n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"Collection\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">id</span>\n            <span class=\"pystac-v\">\"tccas-iberia\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">stac_version</span>\n            <span class=\"pystac-v\">\"1.1.0\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">description</span>\n            <span class=\"pystac-v\">\"The Terrestrial Carbon Community Assimilation System (TCCAS) is built around the coupled D&B terrestrial biosphere model. D&B has been newly developed based on the well-established DALEC and BETHY models and builds on the strengths of each component model. In particular, D&B combines the dynamic simulation of the carbon pools and canopy phenology of DALEC with the dynamic simulation of water pools, and the canopy model of photosynthesis and energy balance of BETHY. D&B includes a set of observation operators for optical as well as active and passive microwave observations. The focus of TCCAS is the combination of this diverse array of observational data streams with the D&B model into a consistent picture of the terrestrial carbon, water, and energy cycles. TCCAS applies a variational assimilation approach that adjusts a combination of initial pool sizes and process parameters to match the observational data streams. This dataset includes Satelite, Field and model forcing data sets for the Iberian region, including Majadas del Tietar.\"</span>\n        </li>\n    \n                \n            \n                \n                    <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">links</span><span class=\"pystac-l\">[] 0 items</span></summary>\n        \n    </details></li>\n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Terrestrial Carbon Community Assimilation System: Database for Iberian region (including Majadas del Tietar)\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">extent</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">spatial</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">bbox</span><span class=\"pystac-l\">[] 1 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span><span class=\"pystac-l\">[] 4 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">0</span>\n            <span class=\"pystac-v\">-8.496</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">1</span>\n            <span class=\"pystac-v\">38.501</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">2</span>\n            <span class=\"pystac-v\">-2.505</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">3</span>\n            <span class=\"pystac-v\">42.997</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">temporal</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">interval</span><span class=\"pystac-l\">[] 1 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span><span class=\"pystac-l\">[] 2 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">0</span>\n            <span class=\"pystac-v\">\"2011-01-01T00:00:00Z\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">1</span>\n            <span class=\"pystac-v\">\"2021-12-31T00:00:00Z\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">license</span>\n            <span class=\"pystac-v\">\"various\"</span>\n        </li>\n    \n                \n            \n        </ul>\n    </div>\n</div>","content_type":"text/html"},"text/plain":{"content":"<Collection id=tccas-iberia>","content_type":"text/plain"}}}],"key":"A3OwJzbFqG"}],"key":"gE2Glog3A4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"create_items_from_data(\n    collectionid,\n    geometry,\n    bbox,\n    collection,\n    root_url,\n    data_files,\n    region,\n)","key":"SPxY8OVjoH"},{"type":"output","id":"1JeapctQutGUqqqrZeXoY","data":[{"name":"stderr","output_type":"stream","text":"/tmp/ipykernel_119170/4235652563.py:12: UserWarning: no explicit representation of timezones available for np.datetime64\n  ts = (start_time - np.datetime64('1970-01-01T00:00:00Z')) / np.timedelta64(1, 's')\n/tmp/ipykernel_119170/4235652563.py:16: UserWarning: no explicit representation of timezones available for np.datetime64\n  ts = (end_time - np.datetime64('1970-01-01T00:00:00Z')) / np.timedelta64(1, 's')\n/tmp/ipykernel_119170/4235652563.py:8: FutureWarning: In a future version of xarray decode_timedelta will default to False rather than None. To silence this warning, set decode_timedelta to True, False, or a 'CFTimedeltaCoder' instance.\n  ds = xr.open_dataset(root_url + dataset_filepath + '#mode=bytes')\n/tmp/ipykernel_119170/4235652563.py:12: UserWarning: no explicit representation of timezones available for np.datetime64\n  ts = (start_time - np.datetime64('1970-01-01T00:00:00Z')) / np.timedelta64(1, 's')\n/tmp/ipykernel_119170/4235652563.py:16: UserWarning: no explicit representation of timezones available for np.datetime64\n  ts = (end_time - np.datetime64('1970-01-01T00:00:00Z')) / np.timedelta64(1, 's')\n"}],"key":"C0IcrwvfAQ"}],"key":"oIzIvpiTNs"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# add a single item with all the in-situ data, since it comes in a single .tgz file\n\nadd_insitu_data(\n    collectionid,\n    geometry,\n    bbox,\n    data_time,\n    collection,\n    'lasmajadas-insitu-package.tgz',\n)","key":"R4rzAsq162"},{"type":"output","id":"8c_lhvcC_jgG8RV3MvKJ-","data":[{"name":"stdout","output_type":"stream","text":"2021-12-31 00:00:00+00:00\n"}],"key":"v91e4WcGFP"}],"key":"sy3A87R7wl"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"create_model_forcing_item(\n    collectionid,\n    geometry,\n    bbox,\n    data_time,\n    collection,\n    model_forcing)","key":"qfq6ALfu9A"},{"type":"output","id":"06DyH0D8bHl-lgkfiaKRg","data":[],"key":"HZqan15qOE"}],"key":"VQqlGtp6jS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"add_documentation_item(\n    collectionid,\n    geometry,\n    bbox,\n    data_time,\n    collection)","key":"sAD2qoj6de"},{"type":"output","id":"VlFRi3-Mqxg9kPevgbeVJ","data":[],"key":"ugo8H5qVGM"}],"key":"IorpMCHJKJ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# save the full self-contained collection\ncollection.normalize_and_save(\n    root_href=f'../../prr_preview/{collectionid}',\n    catalog_type=pystac.CatalogType.SELF_CONTAINED\n)","key":"c1qEIyaeID"},{"type":"output","id":"bXMdE-lwgWkjplJUxdmT3","data":[],"key":"nghV87FyDt"}],"key":"tik1ayutaA"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"collection","key":"WGvSFnu43X"},{"type":"output","id":"1pfuCFgnCMjlftrIHJH3h","data":[{"output_type":"execute_result","execution_count":26,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"50c8e876e0cd0738b6ec1ff937bc18f7","path":"/tutorials/build/50c8e876e0cd0738b6ec1ff937bc18f7.html"},"text/plain":{"content":"<Collection id=tccas-iberia>","content_type":"text/plain"}}}],"key":"tukqICS1ZW"}],"key":"Ls8nPvFOWp"}],"key":"Uer6w8v117"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Generating metadata for the SRAL Processing over Land Ice Dataset","url":"/creating-stac-catalog-from-prr-example","group":"EarthCODE Tutorials"},"next":{"title":"Generating STAC collections for the CareHeat project","url":"/careheat-v2","group":"EarthCODE Tutorials"}}},"domain":"http://localhost:3000"}