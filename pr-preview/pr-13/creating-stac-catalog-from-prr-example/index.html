<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Example from SRAL Processing over Land Ice Dataset - EarthCODE Examples</title><meta property="og:title" content="Example from SRAL Processing over Land Ice Dataset - EarthCODE Examples"/><meta name="generator" content="mystmd"/><meta name="description" content="desc"/><meta property="og:description" content="desc"/><meta name="keywords" content=""/><link rel="stylesheet" href="/pr-preview/pr-13/examples/build/_assets/app-5WKS5EPQ.css"/><link rel="stylesheet" href="/pr-preview/pr-13/examples/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/pr-preview/pr-13/examples/favicon.ico"/><link rel="stylesheet" href="/pr-preview/pr-13/examples/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="block px-2 py-1 text-black underline">Skip to article content</a></div><div class="bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="flex items-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="m-1"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/pr-preview/pr-13/examples/"><div class="p-1 mr-3 dark:bg-white dark:rounded"><img src="/pr-preview/pr-13/examples/build/EarthCODE_kv_transpa-8f872265d6d95f4f0c264af166ebb415.png" class="h-9" alt="EarthCODE Examples" height="2.25rem"/></div><span class="text-md sm:text-xl tracking-tight sm:mr-5">EarthCODE Examples</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R74op:" data-state="closed" class="flex items-center h-10 aspect-square sm:w-64 text-left text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="hidden sm:block grow">Search</span><div aria-hidden="true" class="items-center hidden mx-1 font-mono text-sm text-gray-400 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">âŒ˜</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white font-medium"></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="w-full px-1 dark:text-white"><a title="EarthCODE Examples" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/pr-preview/pr-13/examples/">EarthCODE Examples</a><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><a title="ESA Project Results Repository" class="block break-words focus:outline outline-blue-200 outline-2 rounded py-2 grow" href="/pr-preview/pr-13/examples/index-1">ESA Project Results Repository</a><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rmp8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rmp8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><a title="Open Science Catalog" class="block break-words focus:outline outline-blue-200 outline-2 rounded py-2 grow" href="/pr-preview/pr-13/examples/index-2">Open Science Catalog</a><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rup8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rup8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><a title="openEO" class="block break-words focus:outline outline-blue-200 outline-2 rounded py-2 grow" href="/pr-preview/pr-13/examples/index-3">openEO</a><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R16p8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R16p8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div></div></nav></div><div class="flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><article class="article content article-grid grid-gap"><main class="article-grid subgrid-gap col-screen"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="mb-8 pt-9"><div class="flex items-center h-6 mb-5 text-sm font-light"><div class="flex-none pr-2 smallcaps">EarthCODE Examples</div><div class="flex-grow"></div><a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener noreferrer" class="opacity-50 hover:opacity-100 text-inherit hover:text-inherit" aria-label="Content License: Creative Commons Attribution 4.0 International (CC-BY-4.0)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block mx-1"><title>Content License: Creative Commons Attribution 4.0 International (CC-BY-4.0)</title><path d="M12 2.2c2.7 0 5 1 7 2.9.9.9 1.6 2 2.1 3.1.5 1.2.7 2.4.7 3.8 0 1.3-.2 2.6-.7 3.8-.5 1.2-1.2 2.2-2.1 3.1-1 .9-2 1.7-3.2 2.2-1.2.5-2.5.7-3.7.7s-2.6-.3-3.8-.8c-1.2-.5-2.2-1.2-3.2-2.1s-1.6-2-2.1-3.2-.8-2.4-.8-3.7c0-1.3.2-2.5.7-3.7S4.2 6 5.1 5.1C7 3.2 9.3 2.2 12 2.2zM12 4c-2.2 0-4.1.8-5.6 2.3C5.6 7.1 5 8 4.6 9c-.4 1-.6 2-.6 3s.2 2.1.6 3c.4 1 1 1.8 1.8 2.6S8 19 9 19.4c1 .4 2 .6 3 .6s2.1-.2 3-.6c1-.4 1.9-1 2.7-1.8 1.5-1.5 2.3-3.3 2.3-5.6 0-1.1-.2-2.1-.6-3.1-.4-1-1-1.8-1.7-2.6C16.1 4.8 14.2 4 12 4zm-.1 6.4l-1.3.7c-.1-.3-.3-.5-.5-.6-.2-.1-.4-.2-.6-.2-.9 0-1.3.6-1.3 1.7 0 .5.1.9.3 1.3.2.3.5.5 1 .5.6 0 1-.3 1.2-.8l1.2.6c-.3.5-.6.9-1.1 1.1-.5.3-1 .4-1.5.4-.9 0-1.6-.3-2.1-.8-.5-.6-.8-1.3-.8-2.3 0-.9.3-1.7.8-2.2.6-.6 1.3-.8 2.1-.8 1.2 0 2.1.4 2.6 1.4zm5.6 0l-1.3.7c-.1-.3-.3-.5-.5-.6-.2-.1-.4-.2-.6-.2-.9 0-1.3.6-1.3 1.7 0 .5.1.9.3 1.3.2.3.5.5 1 .5.6 0 1-.3 1.2-.8l1.2.6c-.3.5-.6.9-1.1 1.1-.4.2-.9.3-1.4.3-.9 0-1.6-.3-2.1-.8s-.8-1.3-.8-2.2c0-.9.3-1.7.8-2.2.5-.5 1.2-.8 2-.8 1.2 0 2.1.4 2.6 1.4z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block mr-1"><title>Credit must be given to the creator</title><path d="M12 2.2c2.7 0 5 .9 6.9 2.8 1.9 1.9 2.8 4.2 2.8 6.9s-.9 5-2.8 6.8c-2 1.9-4.3 2.9-7 2.9-2.6 0-4.9-1-6.9-2.9-1.8-1.7-2.8-4-2.8-6.7s1-5 2.9-6.9C7 3.2 9.3 2.2 12 2.2zM12 4c-2.2 0-4.1.8-5.6 2.3C4.8 8 4 9.9 4 12c0 2.2.8 4 2.4 5.6C8 19.2 9.8 20 12 20c2.2 0 4.1-.8 5.7-2.4 1.5-1.5 2.3-3.3 2.3-5.6 0-2.2-.8-4.1-2.3-5.7C16.1 4.8 14.2 4 12 4zm2.6 5.6v4h-1.1v4.7h-3v-4.7H9.4v-4c0-.2.1-.3.2-.4.1-.2.2-.2.4-.2h4c.2 0 .3.1.4.2.2.1.2.2.2.4zm-4-2.5c0-.9.5-1.4 1.4-1.4s1.4.5 1.4 1.4c0 .9-.5 1.4-1.4 1.4s-1.4-.5-1.4-1.4z"></path></svg></a><a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener noreferrer" title="Code License: MIT License (MIT)" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="mx-1 inline-block opacity-60 hover:opacity-100 hover:text-[#599F46]"><path d="M13.2 15.6c1.4-.5 2.1-1.6 2.1-3.3S13.8 8.9 12 8.9c-1.9 0-3.3 1.6-3.3 3.3 0 1.8.8 3 2.2 3.4l-2.3 5.9c-3.1-.8-6.3-4.6-6.3-9.3 0-5.5 4.3-10 9.7-10s9.8 4.5 9.8 10c0 4.7-3.1 8.5-6.3 9.3l-2.3-5.9z"></path></svg></a><a href="https://github.com/ESA-EarthCODE/documentation/tree/main/examples" title="GitHub Repository: ESA-EarthCODE/documentation/tree/main/examples" target="_blank" rel="noopener noreferrer" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a><div class="inline-block mr-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block"><title>Jupyter Notebook</title><path d="M20.2 1.7c0 .8-.5 1.4-1.3 1.5-.8 0-1.4-.5-1.5-1.3 0-.8.5-1.4 1.3-1.5.8-.1 1.5.5 1.5 1.3zM12 17.9c-3.7 0-7-1.3-8.7-3.3 1.8 4.8 7.1 7.3 11.9 5.5 2.5-.9 4.5-2.9 5.5-5.5-1.7 2-4.9 3.3-8.7 3.3zM12 5.1c3.7 0 7 1.3 8.7 3.3-1.8-4.8-7.1-7.3-11.9-5.5-2.5.9-4.5 2.9-5.5 5.5 1.7-2 5-3.3 8.7-3.3zM6.9 21.8c.1 1-.7 1.8-1.7 1.9-1 .1-1.8-.7-1.9-1.7 0-1 .7-1.8 1.7-1.9 1-.1 1.8.7 1.9 1.7zM3.7 4.6c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1c0 .5-.4 1-1 1z"></path></svg></div><a href="https://github.com/ESA-EarthCODE/documentation/tree/main/examples/blob/HEAD/PRR/Creating STAC Catalog_from_PRR_example.ipynb" title="Edit This Page" target="_blank" rel="noopener noreferrer" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="inline-block mr-1 opacity-60 hover:opacity-100"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></a><div class="relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8top:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="mb-0">Example from SRAL Processing over Land Ice Dataset</h1></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><div id="OVzpEo0MWg" class="relative group/block"><p><strong>This is an example notebook for creating the STAC Items uploaded to ESA Project Results Repository and made available at</strong>: <a target="_blank" rel="noreferrer" href="https://eoresults.esa.int/browser/#/external/eoresults.esa.int/stac/collections/sentinel3-ampli-ice-sheet-elevation" class="">https://<wbr/>eoresults<wbr/>.esa<wbr/>.int<wbr/>/browser<wbr/>/<wbr/>#<wbr/>/external<wbr/>/eoresults<wbr/>.esa<wbr/>.int<wbr/>/stac<wbr/>/collections<wbr/>/sentinel3<wbr/>-ampli<wbr/>-ice<wbr/>-sheet<wbr/>-elevation</a></p><p>Dataset is also discoverable via Open Science Catalogue, providing access to created in this tutorial collection stored in ESA Project Results Repository (PRR).
<a target="_blank" rel="noreferrer" href="https://opensciencedata.esa.int/products/sentinel3-ampli-ice-sheet-elevation/collection" class="">https://<wbr/>opensciencedata<wbr/>.esa<wbr/>.int<wbr/>/products<wbr/>/sentinel3<wbr/>-ampli<wbr/>-ice<wbr/>-sheet<wbr/>-elevation<wbr/>/collection</a></p><p>It focuses on generating metadata for a project with a hundreads of items, each of which has hundreads of <code>netcdf</code> assets.</p><p>Check the <a target="_blank" rel="noreferrer" href="https://earthcode.esa.int/" class="">EarthCODE documentation</a>, and <a target="_blank" rel="noreferrer" href="https://esa-earthcode.github.io/examples/prr-stac-introduction" class="">PRR STAC introduction example</a> for a more general introduction to STAC and the ESA PRR.</p><p>The code below demonstrates how to perform the necessary steps using real data from the ESA project **SRAL Processing over Land Ice
**. With the focus of the project on improving Sentinel-3 altimetry performances over land ice.</p><p>ðŸ”— Check the : <a target="_blank" rel="noreferrer" href="https://eoresults.esa.int/d/sentinel3-ampli-ice-sheet-elevation/2025/05/07/sentinel-3-ampli-user-handbook/S3_AMPLI_User_Handbook.pdf" class="">User handbook</a></p><p>ðŸ”— Check the : <cite class="" data-state="closed"><a href="https://doi.org/10.57780/S3D-83AD619" target="_blank" rel="noreferrer" class="hover-link">Scientifc publication</a></cite></p><h3 id="steps-described-in-this-notebook" class="relative group"><span class="heading-text">Steps described in this notebook</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#steps-described-in-this-notebook" title="Link to this Section" aria-label="Link to this Section">Â¶</a></h3><p>This notebook presents the workflow for generating a PRR Collection for the entire dataset coming from the project. To create a valid STAC Items and Collection you should follow steps described below:</p><ol start="1"><li>Generate a root STAC Collection</li><li>Group your dataset files into STAC Items and STAC Assets</li><li>Add the Items to the collection</li><li>Save the normalised collection</li></ol><p>Due to the complexity of the project and the time it takes to process the data, the STAC Items are generated first and stored locally. They are added to the collection afterwards.
Furthermore, since we are working with thousands of files, we are using the links from the PRR directly. When the notebook was created originally all the files were available locally.</p><p>This notebook can be used as an example for following scenario(s):</p><ol start="1"><li>Creating the STAC Items from the files stored locally</li><li>Creating the STAC Items from files stored in the s3bucket or other cloud repository</li><li>Creating the STAC Items from files already ingested into PRR</li></ol><p>Of course if your files are locally stored, or stored in a different S3 Bucket the access to them (roor_url and items paths) should be adapted according to your dataset location.</p><blockquote><p>Note: Due to the original size of the dataset ~ 100GB, running this notebook end to end may take hours. We do advise therefore to trying it on your own datasets by changing file paths to be able to produe valid STAC Collaction and STAC Items.</p></blockquote></div><div id="XX5rg4zKtR" class="relative group/block"><h2 id="loading-libraries" class="relative group"><span class="heading-text">Loading Libraries</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#loading-libraries" title="Link to this Section" aria-label="Link to this Section">Â¶</a></h2></div><div id="D6gcqmh4I8" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import json
import time
import pystac
import rasterio
from shapely import box
import pandas as pd
import xarray as xr
from datetime import datetime
from dateutil.parser import isoparse
from dateutil import parser
from dateutil.parser import parse</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="fMlH9JMK_nSc7hCErj_aQ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="dhDTuq3o9z" class="relative group/block"><h2 id="id-2-load-product-files-stored-in-esa-project-results-repository" class="relative group"><span class="heading-text">2. Load Product files stored in ESA Project Results Repository</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-2-load-product-files-stored-in-esa-project-results-repository" title="Link to this Section" aria-label="Link to this Section">Â¶</a></h2></div><div id="SK2BFvWWjE" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">root_url = &#x27;https://eoresults.esa.int&#x27; # provide a root url for the datasets items </code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Wtw_RtPb4-IkztKlgjzX_" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="KZiXaen9Eg" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># get all items for the S3 AMPLI collection from the PRR STAC API
items = pystac.ItemCollection.from_file(&#x27;https://eoresults.esa.int/stac/collections/sentinel3-ampli-ice-sheet-elevation/items?limit=10_000&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="CXT47OBWVc-WYK9-Nbbp2" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="b3GE67UFu1" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># get the paths to all the data

# using a dictionary is faster than using pystac
items_dict = items.to_dict()
all_item_paths = []
for item in items_dict[&#x27;features&#x27;]:
    assets = item[&#x27;assets&#x27;]
    for asset_name, asset_dict in assets.items():
        if asset_dict[&#x27;roles&#x27;] == [&#x27;data&#x27;]:
            all_item_paths.append(asset_dict[&#x27;href&#x27;])</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="JgnA_EU4E9O2ercVSaa50" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="VuncpyNJSs" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Create a list of EO Missions and instruments as well as region of the dataset and cycles
instruments = [&#x27;sentinel-3a&#x27;, &#x27;sentinel-3b&#x27;]
regions = [&#x27;antarctica&#x27;, &#x27;greenland&#x27;]
cycles = [f&quot;cycle{str(i).zfill(3)}&quot; for i in range(5, 112)]  # Cycle005 to Cycle111</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="9D_h4aKIXYQ-ZpMKZZ8bJ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="xbwq6NsoCL" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Assign the instrument name based on the acronym used in the file name
renaming = {
    &#x27;S3A&#x27;: &#x27;sentinel-3a&#x27;,
    &#x27;S3B&#x27;: &#x27;sentinel-3b&#x27;,
    &#x27;ANT&#x27;: &#x27;antarctica&#x27;,
    &#x27;GRE&#x27;: &#x27;greenland&#x27;
}</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="ivz3nXyFrHj0jwsyXQo_-" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="SbGlNvZsnm" class="relative group/block"><p>Define geometries, which are the same for all items within the same region. If they are not, these have to be extracted from the assets inside the item.</p></div><div id="td426cS4td" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Define the spatial extent (bbox) for each region of interest
greenland_bbox = [-74.0, 59.0, -10.0, 84.0]
greenland_geometry = json.loads(json.dumps(box(*greenland_bbox).__geo_interface__))

antarctica_bbox = [-180.0, -90.0, 180.0, -60.0]
antarctica_geometry = json.loads(json.dumps(box(*antarctica_bbox).__geo_interface__))
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="fjoMLon9nYhNwM5zZ3VNm" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="F7L7WkdHfc" class="relative group/block"><h3 id="id-2-1-group-the-files-by-the-instruments-region-and-cycle-of-the-dataset" class="relative group"><span class="heading-text">2.1 Group the files by the instruments, region and cycle of the dataset</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-2-1-group-the-files-by-the-instruments-region-and-cycle-of-the-dataset" title="Link to this Section" aria-label="Link to this Section">Â¶</a></h3></div><div id="SRcc29a0Oz" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">data = []

for ipath in all_item_paths:
    splitname = ipath.split(&#x27;/&#x27;)[-1].split(&#x27;_&#x27;)
    instrument = splitname[0]
    cycle = splitname[9]
    region = splitname[-2]

    data.append((renaming[instrument], renaming[region], cycle, ipath))


filedata = pd.DataFrame(data, columns=[&#x27;instrument&#x27;, &#x27;region&#x27;, &#x27;cycle&#x27;, &#x27;path&#x27;])</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="eRaRnRmRz8GOumx-ssQsw" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="l70p3tqvDg" class="relative group/block"><h2 id="id-3-create-the-stac-items-with-the-metadata-from-the-original-files-loaded-from-the-prr" class="relative group"><span class="heading-text">3. Create the STAC Items with the metadata from the original files loaded from the PRR</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-3-create-the-stac-items-with-the-metadata-from-the-original-files-loaded-from-the-prr" title="Link to this Section" aria-label="Link to this Section">Â¶</a></h2></div><div id="lowpuJIS3r" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># group all files into items from the same instrument, region and cycle
for (instrument, region, cycle), links in filedata.groupby([&#x27;instrument&#x27;, &#x27;region&#x27;, &#x27;cycle&#x27;]):
    
    # open the metadata attributes for each file in the group
    datasets = [xr.open_dataset(root_url + link + &#x27;#mode=bytes&#x27;) for link in links[&#x27;path&#x27;]]


    # Define the Temporal extent
    first_item = datasets[0]
    last_item = datasets[-1]
    props = first_item.attrs
    props2 = last_item.attrs

    start_datetime = props.get(&quot;first_meas_time&quot;)
    end_datetime = props2.get(&quot;last_meas_time&quot;)

    # Define the geometry
    if props[&#x27;zone&#x27;] == &#x27;Antarctica&#x27;:
        bbox = antarctica_bbox
        geometry = antarctica_geometry
    elif props[&#x27;zone&#x27;] == &#x27;Greenland&#x27;:
        bbox = greenland_bbox
        geometry = greenland_geometry


    # Shared properties
    properties = {
        &quot;start_datetime&quot;: start_datetime,
        &quot;end_datetime&quot;: end_datetime,
        &quot;created&quot;: props.get(&quot;processing_date&quot;),
        &quot;description&quot;: f&quot;Sentinel-3 AMPLI Land Ice Level-2 product acquired by {instrument.capitalize()} platform derived from the SRAL altimeter in Earth Observation mode over {region} region.&quot;,
        &quot;conventions&quot;: props.get(&quot;Conventions&quot;),
        &quot;platform_name&quot;: props.get(&quot;platform_name&quot;),
        &quot;platform_serial_identifier&quot;: props.get(&quot;platform_serial_identifier&quot;),
        &quot;altimeter_sensor_name&quot;: props.get(&quot;altimeter_sensor_name&quot;),
        &quot;operational_mode&quot;: props.get(&quot;operational_mode&quot;),
        &quot;cycle_number&quot;: props.get(&quot;cycle_number&quot;),
        &quot;netcdf_version&quot;: props.get(&quot;netcdf_version&quot;),
        &quot;product_type&quot;: props.get(&quot;product_type&quot;),
        &quot;timeliness&quot;: props.get(&quot;timeliness&quot;),
        &quot;institution&quot;: props.get(&quot;institution&quot;),
        &quot;processing_level&quot;: props.get(&quot;processing_level&quot;),
        &quot;processor_name&quot;: props.get(&quot;processor_name&quot;),
        &quot;processor_version&quot;: props.get(&quot;processor_version&quot;),
        &quot;references&quot;: props.get(&quot;references&quot;),
        &quot;zone&quot;: props.get(&quot;zone&quot;),
    }


    # Create STAC item for the cycle
    item = pystac.Item(
        id=f&quot;sentinel-3{props.get(&quot;platform_serial_identifier&quot;).lower()}-{props.get(&quot;zone&quot;).lower()}-{cycle.lower()}&quot;,
        geometry=geometry,
        bbox=bbox,
        datetime=isoparse(start_datetime),
        properties=properties
    )

    item.stac_version = &quot;1.1.0&quot;
    item.stac_extensions = [
        &quot;https://stac-extensions.github.io/projection/v1.1.0/schema.json&quot;,
        &quot;https://stac-extensions.github.io/raster/v1.1.0/schema.json&quot;,
        &quot;https://stac-extensions.github.io/eo/v1.1.0/schema.json&quot;
    ]

    item.assets = {}

    # Add assets from that cycle
    for nc_href, ds in zip(links[&#x27;path&#x27;], datasets):

        asset_title = ds.attrs[&#x27;product_name&#x27;]
        extra_fields = {
            &quot;cycle_number&quot;: str(ds.attrs.get(&quot;cycle_number&quot;)),
            &quot;orbit_number&quot;: str(ds.attrs.get(&quot;orbit_number&quot;)),
            &quot;relative_orbit_number&quot;: str(ds.attrs.get(&quot;relative_orbit_number&quot;)),
            &quot;orbit_direction&quot;: ds.attrs.get(&quot;orbit_direction&quot;),
        }

        item.add_asset(
            key=asset_title,
            asset=pystac.Asset(
                href=nc_href,
                media_type=&quot;application/x-netcdf&quot;,
                roles=[&quot;data&quot;],
                extra_fields=extra_fields
            )
        )

    # Save STAC item per cycle
    json_filename = f&quot;sentinel-3{props.get(&quot;platform_serial_identifier&quot;).lower()}-{props.get(&quot;zone&quot;).lower()}-{cycle.lower()}.json&quot;
    item.save_object(dest_href=&#x27;examples/&#x27; + json_filename, include_self_link=False)
    print(f&quot; Saved {json_filename}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="faWSe8u60M0_xiCWtCaRA" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="N1MosdPr1L" class="relative group/block"><h3 id="id-3-1-import-documentation" class="relative group"><span class="heading-text">3.1  Import documentation</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-3-1-import-documentation" title="Link to this Section" aria-label="Link to this Section">Â¶</a></h3></div><div id="ns881cWI6v" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import pystac
from datetime import datetime
import os
from datetime import datetime, timezone

date_str = &quot;07/05/2025&quot;

# Convert to ISO format string (YYYY-MM-DD)
iso_like_str = datetime.strptime(date_str, &quot;%d/%m/%Y&quot;).strftime(&quot;%Y-%m-%d&quot;)

# Parse with isoparse and attach UTC timezone
dt_utc = isoparse(iso_like_str).replace(tzinfo=timezone.utc)

print(dt_utc.isoformat())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="A_hizPZFOsNhfmuDkkLIb" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="TKl5LuG3HH" class="relative group/block"><h3 id="id-3-2-create-stac-item-for-the-documentation-associated-to-the-dataset" class="relative group"><span class="heading-text">3.2  Create STAC Item for the documentation associated to the dataset</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-3-2-create-stac-item-for-the-documentation-associated-to-the-dataset" title="Link to this Section" aria-label="Link to this Section">Â¶</a></h3></div><div id="BrvQDlWFa4" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Basic metadata
doc_href = &quot;/d/S3_AMPLI_User_Handbook.pdf&quot;  # Relative or absolute href
doc_title = &quot;Sentinel-3 Altimetry over Land Ice: AMPLI level-2 Products&quot;
doc_description = &quot;User Handbook for Sentinel-3 Altimetry over Land Ice: AMPLI level-2 Products&quot;

# Create STAC item
item = pystac.Item(
    id=&quot;sentinel-3-ampli-user-handbook&quot;,
    geometry=None,
    bbox=None,
    datetime=dt_utc,
    properties={
        &quot;title&quot;: doc_title,
        &quot;description&quot;: doc_description,
        &quot;reference&quot;: &quot;CLS-ENV-MU-24-0389&quot;,
        &quot;issue_n&quot;: dt_utc.isoformat()
    }
)

# Add asset for the PDF
item.add_asset(
    key=&quot;documentation&quot;,
    asset=pystac.Asset(
        href=doc_href,
        media_type=&quot;application/pdf&quot;,
        roles=[&quot;documentation&quot;],
        title=doc_title
    )
)

# Save to file
item.set_self_href(&quot;examples/sentinel-3-ampli-user-handbook.json&quot;)
item.save_object(include_self_link=False)

print(&quot;ðŸ“„ STAC Item for documentation created: sentinel-3-ampli-user-handbook.json&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="7TQfsX-5UlBLJW5UQS76p" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="dACFuw4ta9" class="relative group/block"><h2 id="id-4-generate-valid-stac-collection" class="relative group"><span class="heading-text">4. Generate valid STAC collection</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-4-generate-valid-stac-collection" title="Link to this Section" aria-label="Link to this Section">Â¶</a></h2><p>Once all the assets are processed, create the parent collection for all Items created in the previous step.</p></div><div id="c0lpueqRGw" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">collection = pystac.Collection.from_dict(

{
  &quot;id&quot;: &quot;sentinel3-ampli-ice-sheet-elevation&quot;,
  &quot;type&quot;: &quot;Collection&quot;,
  &quot;links&quot;: [
  ],
  &quot;title&quot;: &quot;Sentinel-3 AMPLI Ice Sheet Elevation&quot;,
  &quot;extent&quot;: {
    &quot;spatial&quot;: {
      &quot;bbox&quot;: [
        [-180, -90, 180, 90]
      ]
    },
    &quot;temporal&quot;: {
      &quot;interval&quot;: [
        [
          &quot;2016-06-01T00:00:00Z&quot;,
          &quot;2024-05-09T00:00:00Z&quot;
        ]
      ]
    }
  },
  &quot;license&quot;: &quot;CC-BY-4.0&quot;,
  &quot;summaries&quot;: {
    &quot;references&quot;: [
      &quot;https://doi.org/10.5194/egusphere-2024-1323&quot;
    ],
    &quot;institution&quot;: [
      &quot;CNES&quot;
    ],
    &quot;platform_name&quot;: [
      &quot;SENTINEL-3&quot;
    ],
    &quot;processor_name&quot;: [
      &quot;Altimeter data Modelling and Processing for Land Ice (AMPLI)&quot;
    ],
    &quot;operational_mode&quot;: [
      &quot;Earth Observation&quot;
    ],
    &quot;processing_level&quot;: [
      &quot;2&quot;
    ],
    &quot;processor_version&quot;: [
      &quot;v1.0&quot;
    ],
    &quot;altimeter_sensor_name&quot;: [
      &quot;SRAL&quot;
    ]
  },
  &quot;description&quot;: &quot;Ice sheet elevation estimated along the Sentinel-3 satellite track, as retrieved with the Altimeter data Modelling and Processing for Land Ice (AMPLI). The products cover Antarctica and Greenland.&quot;,
  &quot;stac_version&quot;: &quot;1.1.0&quot;
}
)
collection</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="qdy0mPUiaGFj1BQVdbjmQ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="CqaMubG7xi" class="relative group/block"><h3 id="id-4-1-add-items-to-collection" class="relative group"><span class="heading-text">4.1. Add items to collection</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-4-1-add-items-to-collection" title="Link to this Section" aria-label="Link to this Section">Â¶</a></h3><p>Once the collection is created read all the items from disk and add the necassary links.</p></div><div id="ybfoeAZ30J" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import glob
for fpath in glob.glob(&#x27;examples/*&#x27;):
    collection.add_item(pystac.Item.from_file(fpath))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="DGLS9b38HD9SI-emjgIog" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="rL8Prx5vfO" class="relative group/block"><h3 id="id-4-2-save-the-normalised-collection" class="relative group"><span class="heading-text">4.2 Save the normalised collection</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-4-2-save-the-normalised-collection" title="Link to this Section" aria-label="Link to this Section">Â¶</a></h3></div><div id="JYFWmhJmfO" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># save the full self-contained collection
collection.normalize_and_save(
    root_href=&#x27;../data/example_catalog_ampli/&#x27;,
    catalog_type=pystac.CatalogType.SELF_CONTAINED
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="sVI4O24ca6B6kWwC4S7y8" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div><div class="flex flex-col w-full md:flex-row group/backmatter"><h2 id="acknowledgments" class="mt-5 text-base font-semibold group md:w-[200px] self-start md:flex-none opacity-90 group-hover/backmatter:opacity-100">Acknowledgments<a class="no-underline text-inherit hover:text-inherit ml-2 select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#acknowledgments" title="Link to Acknowledgments" aria-label="Link to Acknowledgments">Â¶</a></h2><div class="grow opacity-90 group-hover/backmatter:opacity-100 col-screen"><p>We gratefully acknowledge the <strong>SRAL Processing over Land Ice team</strong> for providing access to the data used in this example, as well as support in creating it.</p></div></div></div><section id="references" class="article-grid subgrid-gap col-screen"><div><header class="text-lg font-semibold text-stone-900 dark:text-white group">References<a class="no-underline text-inherit hover:text-inherit ml-2 select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#references" title="Link to References" aria-label="Link to References">Â¶</a></header></div><div class="pl-3 mb-8 text-xs text-stone-500 dark:text-stone-300"><ol><li class="break-words" id="cite-https://doi.org/10.57780/s3d-83ad619">European Space Agency. (2025). <i>Sentinel-3 AMPLI Ice Sheet Elevation</i>. European Space Agency. <a target="_blank" rel="noreferrer" href="https://doi.org/10.57780/S3D-83AD619">10.57780/S3D-83AD619</a></li></ol></div></section><div class="flex pt-10 mb-10 space-x-4"><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/pr-preview/pr-13/examples/example-tccas"><div class="flex h-full align-middle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:-translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg><div class="flex-grow text-right"><div class="text-xs text-gray-500 dark:text-gray-400">EarthCODE Examples</div>ESA Project Results Repository: Generating STAC collections with multiple assets</div></div></a><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/pr-preview/pr-13/examples/prr-stac-download-example"><div class="flex h-full align-middle"><div class="flex-grow"><div class="text-xs text-gray-500 dark:text-gray-400">EarthCODE Examples</div>ESA Project Results Repository (PRR) Data Access and Collections Preview</div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"></path></svg></div></a></div></main></article><script>((a,d)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let f=JSON.parse(sessionStorage.getItem(a)||"{}")[d||window.history.state.key];typeof f=="number"&&window.scrollTo(0,f)}catch(h){console.error(h),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/entry.client-UNPC4GT3.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/_shared/chunk-OCTKKCIL.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/_shared/chunk-UAI5KRM7.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/_shared/chunk-2NH4LW52.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/_shared/chunk-JSE36H2O.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/_shared/chunk-HBJK6BW3.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/_shared/chunk-HYMQ7M2K.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/_shared/chunk-OHOXABTA.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/_shared/chunk-C7FW3E47.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/_shared/chunk-3CVK3PYF.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/_shared/chunk-J6FHCSRC.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/_shared/chunk-ND43KHSX.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/root-IB5726YR.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/_shared/chunk-NBON2RSI.js"/><link rel="modulepreload" href="/pr-preview/pr-13/examples/build/routes/$-LXLHKVOR.js"/><script>window.__remixContext = {"url":"/creating-stac-catalog-from-prr-example","state":{"loaderData":{"root":{"config":{"version":2,"myst":"1.6.0","title":"EarthCODE Examples","options":{"favicon":"/pr-preview/pr-13/examples/build/EarthCODE_Favicon_32-8a530c5cba77ab7f3c4b15b085545cd2.png","logo":"/pr-preview/pr-13/examples/build/EarthCODE_kv_transpa-8f872265d6d95f4f0c264af166ebb415.png","logo_text":"EarthCODE Examples","style":"/pr-preview/pr-13/examples/build/esa-style-eff77136c3625808f448c152d1c5a781.css"},"nav":[],"actions":[],"projects":[{"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"subject":"EarthCODE Examples","title":"EarthCODE Examples","subtitle":"sub","description":"desc","github":"https://github.com/ESA-EarthCODE/documentation/tree/main/examples","id":"7459d850-c3ed-4933-a447-54e8d41b1409","toc":[{"file":"index.md"},{"children":[{"file":"PRR/PRR_STAC_introduction.ipynb"},{"file":"PRR/prr_zarr.ipynb"},{"file":"PRR/example_tccas.ipynb"},{"file":"PRR/Creating STAC Catalog_from_PRR_example.ipynb"},{"file":"PRR/PRR_STAC_download_example.ipynb"}],"file":"PRR/index.md","title":"ESA Project Results Repository (PRR)"},{"children":[{"file":"OSC/git_clerk_example.md"},{"file":"OSC/osc_pr_manual.ipynb"},{"file":"OSC/osc_pr_pystac.ipynb"},{"file":"OSC/deepcode_example.md"}],"file":"OSC/index.md","title":"Open Science Catalog (OSC)"},{"children":[{"file":"openeo/1_workflow.ipynb"},{"file":"openeo/2_experiment.ipynb"},{"file":"openeo/3_publication.md"},{"file":"openeo/4_reproduce.ipynb"}],"file":"openeo/index.md","title":"openEO"}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"index-1","title":"ESA Project Results Repository","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"prr-stac-introduction","title":"Generating a STAC Collection for the PRR","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"prr-zarr","title":"ESA Project Results Repository: Generating STAC collections with zarr files","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"example-tccas","title":"ESA Project Results Repository: Generating STAC collections with multiple assets","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"creating-stac-catalog-from-prr-example","title":"Example from SRAL Processing over Land Ice Dataset","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"prr-stac-download-example","title":"ESA Project Results Repository (PRR) Data Access and Collections Preview","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"index-2","title":"Open Science Catalog","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"git-clerk-example","title":"Git Clerk","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"osc-pr-manual","title":"Adding new content to Open Science Catalogue with Pull Request (PR)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"osc-pr-pystac","title":"Generating OSC information using pystac","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"index-3","title":"openEO","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"workflow","title":"Creating a workflow","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"experiment","title":"Creating an experiment","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"publication","title":"Publishing an experiment to EarthCODE","description":"","date":"","thumbnail":"/pr-preview/pr-13/examples/build/publishing_login-a508b1b9980ab059de791c3b8688af04.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"reproduce","title":"Reproducing an openEO Experiment published to the EarthCODE Open Science Catalogue","description":"","date":"","thumbnail":"/pr-preview/pr-13/examples/build/reproduce_editor_1-4bb555134138f8bc94eb822581ac8ed8.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static","BASE_URL":"/pr-preview/pr-13/examples"},"routes/$":{"config":{"version":2,"myst":"1.6.0","title":"EarthCODE Examples","options":{"favicon":"/pr-preview/pr-13/examples/build/EarthCODE_Favicon_32-8a530c5cba77ab7f3c4b15b085545cd2.png","logo":"/pr-preview/pr-13/examples/build/EarthCODE_kv_transpa-8f872265d6d95f4f0c264af166ebb415.png","logo_text":"EarthCODE Examples","style":"/pr-preview/pr-13/examples/build/esa-style-eff77136c3625808f448c152d1c5a781.css"},"nav":[],"actions":[],"projects":[{"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"subject":"EarthCODE Examples","title":"EarthCODE Examples","subtitle":"sub","description":"desc","github":"https://github.com/ESA-EarthCODE/documentation/tree/main/examples","id":"7459d850-c3ed-4933-a447-54e8d41b1409","toc":[{"file":"index.md"},{"children":[{"file":"PRR/PRR_STAC_introduction.ipynb"},{"file":"PRR/prr_zarr.ipynb"},{"file":"PRR/example_tccas.ipynb"},{"file":"PRR/Creating STAC Catalog_from_PRR_example.ipynb"},{"file":"PRR/PRR_STAC_download_example.ipynb"}],"file":"PRR/index.md","title":"ESA Project Results Repository (PRR)"},{"children":[{"file":"OSC/git_clerk_example.md"},{"file":"OSC/osc_pr_manual.ipynb"},{"file":"OSC/osc_pr_pystac.ipynb"},{"file":"OSC/deepcode_example.md"}],"file":"OSC/index.md","title":"Open Science Catalog (OSC)"},{"children":[{"file":"openeo/1_workflow.ipynb"},{"file":"openeo/2_experiment.ipynb"},{"file":"openeo/3_publication.md"},{"file":"openeo/4_reproduce.ipynb"}],"file":"openeo/index.md","title":"openEO"}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"index-1","title":"ESA Project Results Repository","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"prr-stac-introduction","title":"Generating a STAC Collection for the PRR","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"prr-zarr","title":"ESA Project Results Repository: Generating STAC collections with zarr files","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"example-tccas","title":"ESA Project Results Repository: Generating STAC collections with multiple assets","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"creating-stac-catalog-from-prr-example","title":"Example from SRAL Processing over Land Ice Dataset","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"prr-stac-download-example","title":"ESA Project Results Repository (PRR) Data Access and Collections Preview","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"index-2","title":"Open Science Catalog","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"git-clerk-example","title":"Git Clerk","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"osc-pr-manual","title":"Adding new content to Open Science Catalogue with Pull Request (PR)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"osc-pr-pystac","title":"Generating OSC information using pystac","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"index-3","title":"openEO","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"workflow","title":"Creating a workflow","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"experiment","title":"Creating an experiment","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"publication","title":"Publishing an experiment to EarthCODE","description":"","date":"","thumbnail":"/pr-preview/pr-13/examples/build/publishing_login-a508b1b9980ab059de791c3b8688af04.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"reproduce","title":"Reproducing an openEO Experiment published to the EarthCODE Open Science Catalogue","description":"","date":"","thumbnail":"/pr-preview/pr-13/examples/build/reproduce_editor_1-4bb555134138f8bc94eb822581ac8ed8.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"page":{"version":2,"kind":"Notebook","sha256":"ab761a989e0e0894544c518ecec1a3a0630b0d031642daa3847c40097e524e21","slug":"creating-stac-catalog-from-prr-example","location":"/PRR/Creating STAC Catalog_from_PRR_example.ipynb","dependencies":[],"frontmatter":{"title":"Example from SRAL Processing over Land Ice Dataset","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"pangeo","language":"python"},"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/ESA-EarthCODE/documentation/tree/main/examples","subject":"EarthCODE Examples","numbering":{"title":{"offset":1}},"edit_url":"https://github.com/ESA-EarthCODE/documentation/tree/main/examples/blob/HEAD/PRR/Creating STAC Catalog_from_PRR_example.ipynb","exports":[{"format":"ipynb","filename":"Creating STAC Catalog_from_PRR_example.ipynb","url":"/pr-preview/pr-13/examples/build/Creating STAC Catalo-13d6ed7cc13e9e0f31b4f0828eec61a9.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This is an example notebook for creating the STAC Items uploaded to ESA Project Results Repository and made available at","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xd5ZDUoHKN"}],"key":"UjSiqIpBl5"},{"type":"text","value":": ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SiyxQt7GzG"},{"type":"link","url":"https://eoresults.esa.int/browser/#/external/eoresults.esa.int/stac/collections/sentinel3-ampli-ice-sheet-elevation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"https://â€‹eoresultsâ€‹.esaâ€‹.intâ€‹/browserâ€‹/â€‹#â€‹/externalâ€‹/eoresultsâ€‹.esaâ€‹.intâ€‹/stacâ€‹/collectionsâ€‹/sentinel3â€‹-ampliâ€‹-iceâ€‹-sheetâ€‹-elevation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CCiDMhYDPG"}],"urlSource":"https://eoresults.esa.int/browser/#/external/eoresults.esa.int/stac/collections/sentinel3-ampli-ice-sheet-elevation","key":"RoFxTwPwMn"}],"key":"D2q4fjAC66"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Dataset is also discoverable via Open Science Catalogue, providing access to created in this tutorial collection stored in ESA Project Results Repository (PRR).\n","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"bLp0EW5I2e"},{"type":"link","url":"https://opensciencedata.esa.int/products/sentinel3-ampli-ice-sheet-elevation/collection","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"https://â€‹opensciencedataâ€‹.esaâ€‹.intâ€‹/productsâ€‹/sentinel3â€‹-ampliâ€‹-iceâ€‹-sheetâ€‹-elevationâ€‹/collection","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"EVoQo2ZkLa"}],"urlSource":"https://opensciencedata.esa.int/products/sentinel3-ampli-ice-sheet-elevation/collection","key":"fSD36dnGry"}],"key":"PyHEiZIEYD"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"It focuses on generating metadata for a project with a hundreads of items, each of which has hundreads of ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"Ebm995GZKE"},{"type":"inlineCode","value":"netcdf","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"XbhWdZyodo"},{"type":"text","value":" assets.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"qJSxWSGpZH"}],"key":"FnGc9KE6tt"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Check the ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"vZmRDlVeVX"},{"type":"link","url":"https://earthcode.esa.int/","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"EarthCODE documentation","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"fP8iMMvTBZ"}],"urlSource":"https://earthcode.esa.int/","key":"RJsloAP2bZ"},{"type":"text","value":", and ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"bXlOGwQP3F"},{"type":"link","url":"https://esa-earthcode.github.io/examples/prr-stac-introduction","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"PRR STAC introduction example","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"AnmrvTXywr"}],"urlSource":"https://esa-earthcode.github.io/examples/prr-stac-introduction","key":"kKZZAFC8Dk"},{"type":"text","value":" for a more general introduction to STAC and the ESA PRR.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"BnMDsI6E2v"}],"key":"ghvz7v8UXM"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"The code below demonstrates how to perform the necessary steps using real data from the ESA project **SRAL Processing over Land Ice\n**. With the focus of the project on improving Sentinel-3 altimetry performances over land ice.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"Zfv4qVbLKm"}],"key":"nLdFFtcf1S"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"ðŸ”— Check the : ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"tnArZE4FGf"},{"type":"link","url":"https://eoresults.esa.int/d/sentinel3-ampli-ice-sheet-elevation/2025/05/07/sentinel-3-ampli-user-handbook/S3_AMPLI_User_Handbook.pdf","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"User handbook","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"QEjNfa2zIN"}],"urlSource":"https://eoresults.esa.int/d/sentinel3-ampli-ice-sheet-elevation/2025/05/07/sentinel-3-ampli-user-handbook/S3_AMPLI_User_Handbook.pdf","key":"lFhBwnmaFk"}],"key":"D7aiQznkX5"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"ðŸ”— Check the : ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"UJAHG7PLIL"},{"type":"cite","url":"http://doi.org/https://doi.org/10.57780/s3d-83ad619","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Scientifc publication","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"mBWryzkKvM"}],"kind":"narrative","label":"https://doi.org/10.57780/s3d-83ad619","identifier":"http://doi.org/https://doi.org/10.57780/s3d-83ad619","enumerator":"1","key":"ENwEtM1Iq0"}],"key":"mITC2iQrzz"},{"type":"heading","depth":4,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Acknowledgment","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"BJvSFdmA70"}],"identifier":"acknowledgment","label":"Acknowledgment","html_id":"acknowledgment","implicit":true,"key":"ya4xx3cKwL"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"We gratefully acknowledge the ","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"USu94LoExx"},{"type":"strong","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"SRAL Processing over Land Ice team","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"KJh7gWviB7"}],"key":"anMsRlYrIO"},{"type":"text","value":" for providing access to the data used in this example, as well as support in creating it.","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"ISEljT7OCC"}],"key":"WX5zbyeVCr"},{"type":"heading","depth":3,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Steps described in this notebook","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"zfcqCGAike"}],"identifier":"steps-described-in-this-notebook","label":"Steps described in this notebook","html_id":"steps-described-in-this-notebook","implicit":true,"key":"drMdm29l7z"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"This notebook presents the workflow for generating a PRR Collection for the entire dataset coming from the project. To create a valid STAC Items and Collection you should follow steps described below:","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"SbjscKfu9p"}],"key":"w1Mwg1ISx8"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":27,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Generate a root STAC Collection","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"VNG93ZymLo"}],"key":"S2Ooqk8h3u"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Group your dataset files into STAC Items and STAC Assets","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"ZMtzYvpYa6"}],"key":"sG3UkMCYVu"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Add the Items to the collection","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"ePzVw551FC"}],"key":"Q61QfWOJzJ"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Save the normalised collection","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"tB5wbT2BwB"}],"key":"kwnAuNSYkt"}],"key":"uNV28Fjgi3"},{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Due to the complexity of the project and the time it takes to process the data, the STAC Items are generated first and stored locally. They are added to the collection afterwards.\nFurthermore, since we are working with thousands of files, we are using the links from the PRR directly. When the notebook was created originally all the files were available locally.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"DgLNecpSnj"}],"key":"p8pZpHT8qJ"},{"type":"paragraph","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"This notebook can be used as an example for following scenario(s):","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"k9dYKcvZIZ"}],"key":"lsbvgYnezQ"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":36,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"text","value":"Creating the STAC Items from the files stored locally","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"huk1jOeCRF"}],"key":"EEXbEufUKv"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"Creating the STAC Items from files stored in the s3bucket or other cloud repository","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"BuSIB019i9"}],"key":"u3uWteYa4m"},{"type":"listItem","spread":true,"position":{"start":{"line":38,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"Creating the STAC Items from files already ingested into PRR","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"EJO9YCBo1s"}],"key":"uB2YwW0TCk"}],"key":"bOxXFC0JeQ"},{"type":"paragraph","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"Of course if your files are locally stored, or stored in a different S3 Bucket the access to them (roor_url and items paths) should be adapted according to your dataset location.","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"F7M1zD0QGa"}],"key":"if5n6VbxpF"},{"type":"blockquote","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"Note: Due to the original size of the dataset ~ 100GB, running this notebook end to end may take hours. We do advise therefore to trying it on your own datasets by changing file paths to be able to produe valid STAC Collaction and STAC Items.","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"crLs6eYUcH"}],"key":"I1asuYzLQO"}],"key":"tc0ZGz7VBl"}],"key":"OVzpEo0MWg"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Loading Libraries","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iLrU3J1go2"}],"identifier":"loading-libraries","label":"Loading Libraries","html_id":"loading-libraries","implicit":true,"key":"zua8HrLk5d"}],"key":"XX5rg4zKtR"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import json\nimport time\nimport pystac\nimport rasterio\nfrom shapely import box\nimport pandas as pd\nimport xarray as xr\nfrom datetime import datetime\nfrom dateutil.parser import isoparse\nfrom dateutil import parser\nfrom dateutil.parser import parse","visibility":"show","key":"vbyfi8DRnU"},{"type":"output","id":"fMlH9JMK_nSc7hCErj_aQ","data":[],"visibility":"show","key":"lIM5zfGfjk"}],"visibility":"show","key":"D6gcqmh4I8"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2. Load Product files stored in ESA Project Results Repository","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XTw0jSsLMu"}],"identifier":"id-2-load-product-files-stored-in-esa-project-results-repository","label":"2. Load Product files stored in ESA Project Results Repository","html_id":"id-2-load-product-files-stored-in-esa-project-results-repository","implicit":true,"key":"jFuFAZNTXz"}],"key":"dhDTuq3o9z"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"root_url = 'https://eoresults.esa.int' # provide a root url for the datasets items ","key":"azXImAEBO3"},{"type":"output","id":"Wtw_RtPb4-IkztKlgjzX_","data":[],"key":"xxJVOsEhr0"}],"key":"SK2BFvWWjE"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# get all items for the S3 AMPLI collection from the PRR STAC API\nitems = pystac.ItemCollection.from_file('https://eoresults.esa.int/stac/collections/sentinel3-ampli-ice-sheet-elevation/items?limit=10_000')","key":"behUoy0Tuf"},{"type":"output","id":"CXT47OBWVc-WYK9-Nbbp2","data":[],"key":"GLYPVVQtwf"}],"key":"KZiXaen9Eg"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# get the paths to all the data\n\n# using a dictionary is faster than using pystac\nitems_dict = items.to_dict()\nall_item_paths = []\nfor item in items_dict['features']:\n    assets = item['assets']\n    for asset_name, asset_dict in assets.items():\n        if asset_dict['roles'] == ['data']:\n            all_item_paths.append(asset_dict['href'])","key":"WkZuFbFWqw"},{"type":"output","id":"JgnA_EU4E9O2ercVSaa50","data":[],"key":"Ul85pEWuAw"}],"key":"b3GE67UFu1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Create a list of EO Missions and instruments as well as region of the dataset and cycles\ninstruments = ['sentinel-3a', 'sentinel-3b']\nregions = ['antarctica', 'greenland']\ncycles = [f\"cycle{str(i).zfill(3)}\" for i in range(5, 112)]  # Cycle005 to Cycle111","key":"cq5IHyvXVI"},{"type":"output","id":"9D_h4aKIXYQ-ZpMKZZ8bJ","data":[],"key":"zIAq52C2na"}],"key":"VuncpyNJSs"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Assign the instrument name based on the acronym used in the file name\nrenaming = {\n    'S3A': 'sentinel-3a',\n    'S3B': 'sentinel-3b',\n    'ANT': 'antarctica',\n    'GRE': 'greenland'\n}","key":"jpvHt7HTkI"},{"type":"output","id":"ivz3nXyFrHj0jwsyXQo_-","data":[],"key":"jtnufkpSjp"}],"key":"xbwq6NsoCL"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define geometries, which are the same for all items within the same region. If they are not, these have to be extracted from the assets inside the item.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oo27VQphVR"}],"key":"s2M5k6enHH"}],"key":"SbGlNvZsnm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Define the spatial extent (bbox) for each region of interest\ngreenland_bbox = [-74.0, 59.0, -10.0, 84.0]\ngreenland_geometry = json.loads(json.dumps(box(*greenland_bbox).__geo_interface__))\n\nantarctica_bbox = [-180.0, -90.0, 180.0, -60.0]\nantarctica_geometry = json.loads(json.dumps(box(*antarctica_bbox).__geo_interface__))\n","key":"FxZncrdhDb"},{"type":"output","id":"fjoMLon9nYhNwM5zZ3VNm","data":[],"key":"Z3XO4HOsl0"}],"key":"td426cS4td"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2.1 Group the files by the instruments, region and cycle of the dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CTAOlxtJYI"}],"identifier":"id-2-1-group-the-files-by-the-instruments-region-and-cycle-of-the-dataset","label":"2.1 Group the files by the instruments, region and cycle of the dataset","html_id":"id-2-1-group-the-files-by-the-instruments-region-and-cycle-of-the-dataset","implicit":true,"key":"oDFOFxar3d"}],"key":"F7L7WkdHfc"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"data = []\n\nfor ipath in all_item_paths:\n    splitname = ipath.split('/')[-1].split('_')\n    instrument = splitname[0]\n    cycle = splitname[9]\n    region = splitname[-2]\n\n    data.append((renaming[instrument], renaming[region], cycle, ipath))\n\n\nfiledata = pd.DataFrame(data, columns=['instrument', 'region', 'cycle', 'path'])","key":"S7BiUYw9UM"},{"type":"output","id":"eRaRnRmRz8GOumx-ssQsw","data":[],"key":"OzNPxYFZkI"}],"key":"SRcc29a0Oz"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3. Create the STAC Items with the metadata from the original files loaded from the PRR","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OZ5ViW8Qd3"}],"identifier":"id-3-create-the-stac-items-with-the-metadata-from-the-original-files-loaded-from-the-prr","label":"3. Create the STAC Items with the metadata from the original files loaded from the PRR","html_id":"id-3-create-the-stac-items-with-the-metadata-from-the-original-files-loaded-from-the-prr","implicit":true,"key":"iIv3FxBzG8"}],"key":"l70p3tqvDg"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# group all files into items from the same instrument, region and cycle\nfor (instrument, region, cycle), links in filedata.groupby(['instrument', 'region', 'cycle']):\n    \n    # open the metadata attributes for each file in the group\n    datasets = [xr.open_dataset(root_url + link + '#mode=bytes') for link in links['path']]\n\n\n    # Define the Temporal extent\n    first_item = datasets[0]\n    last_item = datasets[-1]\n    props = first_item.attrs\n    props2 = last_item.attrs\n\n    start_datetime = props.get(\"first_meas_time\")\n    end_datetime = props2.get(\"last_meas_time\")\n\n    # Define the geometry\n    if props['zone'] == 'Antarctica':\n        bbox = antarctica_bbox\n        geometry = antarctica_geometry\n    elif props['zone'] == 'Greenland':\n        bbox = greenland_bbox\n        geometry = greenland_geometry\n\n\n    # Shared properties\n    properties = {\n        \"start_datetime\": start_datetime,\n        \"end_datetime\": end_datetime,\n        \"created\": props.get(\"processing_date\"),\n        \"description\": f\"Sentinel-3 AMPLI Land Ice Level-2 product acquired by {instrument.capitalize()} platform derived from the SRAL altimeter in Earth Observation mode over {region} region.\",\n        \"conventions\": props.get(\"Conventions\"),\n        \"platform_name\": props.get(\"platform_name\"),\n        \"platform_serial_identifier\": props.get(\"platform_serial_identifier\"),\n        \"altimeter_sensor_name\": props.get(\"altimeter_sensor_name\"),\n        \"operational_mode\": props.get(\"operational_mode\"),\n        \"cycle_number\": props.get(\"cycle_number\"),\n        \"netcdf_version\": props.get(\"netcdf_version\"),\n        \"product_type\": props.get(\"product_type\"),\n        \"timeliness\": props.get(\"timeliness\"),\n        \"institution\": props.get(\"institution\"),\n        \"processing_level\": props.get(\"processing_level\"),\n        \"processor_name\": props.get(\"processor_name\"),\n        \"processor_version\": props.get(\"processor_version\"),\n        \"references\": props.get(\"references\"),\n        \"zone\": props.get(\"zone\"),\n    }\n\n\n    # Create STAC item for the cycle\n    item = pystac.Item(\n        id=f\"sentinel-3{props.get(\"platform_serial_identifier\").lower()}-{props.get(\"zone\").lower()}-{cycle.lower()}\",\n        geometry=geometry,\n        bbox=bbox,\n        datetime=isoparse(start_datetime),\n        properties=properties\n    )\n\n    item.stac_version = \"1.1.0\"\n    item.stac_extensions = [\n        \"https://stac-extensions.github.io/projection/v1.1.0/schema.json\",\n        \"https://stac-extensions.github.io/raster/v1.1.0/schema.json\",\n        \"https://stac-extensions.github.io/eo/v1.1.0/schema.json\"\n    ]\n\n    item.assets = {}\n\n    # Add assets from that cycle\n    for nc_href, ds in zip(links['path'], datasets):\n\n        asset_title = ds.attrs['product_name']\n        extra_fields = {\n            \"cycle_number\": str(ds.attrs.get(\"cycle_number\")),\n            \"orbit_number\": str(ds.attrs.get(\"orbit_number\")),\n            \"relative_orbit_number\": str(ds.attrs.get(\"relative_orbit_number\")),\n            \"orbit_direction\": ds.attrs.get(\"orbit_direction\"),\n        }\n\n        item.add_asset(\n            key=asset_title,\n            asset=pystac.Asset(\n                href=nc_href,\n                media_type=\"application/x-netcdf\",\n                roles=[\"data\"],\n                extra_fields=extra_fields\n            )\n        )\n\n    # Save STAC item per cycle\n    json_filename = f\"sentinel-3{props.get(\"platform_serial_identifier\").lower()}-{props.get(\"zone\").lower()}-{cycle.lower()}.json\"\n    item.save_object(dest_href='examples/' + json_filename, include_self_link=False)\n    print(f\" Saved {json_filename}\")","key":"zBG5snOYuZ"},{"type":"output","id":"faWSe8u60M0_xiCWtCaRA","data":[],"key":"SEZX3Ewujg"}],"key":"lowpuJIS3r"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3.1  Import documentation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"erN31P31Me"}],"identifier":"id-3-1-import-documentation","label":"3.1  Import documentation","html_id":"id-3-1-import-documentation","implicit":true,"key":"xxKNx9S751"}],"key":"N1MosdPr1L"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import pystac\nfrom datetime import datetime\nimport os\nfrom datetime import datetime, timezone\n\ndate_str = \"07/05/2025\"\n\n# Convert to ISO format string (YYYY-MM-DD)\niso_like_str = datetime.strptime(date_str, \"%d/%m/%Y\").strftime(\"%Y-%m-%d\")\n\n# Parse with isoparse and attach UTC timezone\ndt_utc = isoparse(iso_like_str).replace(tzinfo=timezone.utc)\n\nprint(dt_utc.isoformat())","key":"B8eldLq2Mc"},{"type":"output","id":"A_hizPZFOsNhfmuDkkLIb","data":[],"key":"lP3XLC0HJK"}],"key":"ns881cWI6v"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3.2  Create STAC Item for the documentation associated to the dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lr8EvBJX3A"}],"identifier":"id-3-2-create-stac-item-for-the-documentation-associated-to-the-dataset","label":"3.2  Create STAC Item for the documentation associated to the dataset","html_id":"id-3-2-create-stac-item-for-the-documentation-associated-to-the-dataset","implicit":true,"key":"c2YWn9ETPL"}],"key":"TKl5LuG3HH"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Basic metadata\ndoc_href = \"/d/S3_AMPLI_User_Handbook.pdf\"  # Relative or absolute href\ndoc_title = \"Sentinel-3 Altimetry over Land Ice: AMPLI level-2 Products\"\ndoc_description = \"User Handbook for Sentinel-3 Altimetry over Land Ice: AMPLI level-2 Products\"\n\n# Create STAC item\nitem = pystac.Item(\n    id=\"sentinel-3-ampli-user-handbook\",\n    geometry=None,\n    bbox=None,\n    datetime=dt_utc,\n    properties={\n        \"title\": doc_title,\n        \"description\": doc_description,\n        \"reference\": \"CLS-ENV-MU-24-0389\",\n        \"issue_n\": dt_utc.isoformat()\n    }\n)\n\n# Add asset for the PDF\nitem.add_asset(\n    key=\"documentation\",\n    asset=pystac.Asset(\n        href=doc_href,\n        media_type=\"application/pdf\",\n        roles=[\"documentation\"],\n        title=doc_title\n    )\n)\n\n# Save to file\nitem.set_self_href(\"examples/sentinel-3-ampli-user-handbook.json\")\nitem.save_object(include_self_link=False)\n\nprint(\"ðŸ“„ STAC Item for documentation created: sentinel-3-ampli-user-handbook.json\")","visibility":"show","key":"zMH34E6FE6"},{"type":"output","id":"7TQfsX-5UlBLJW5UQS76p","data":[],"visibility":"show","key":"P5leEZtjb0"}],"visibility":"show","key":"BrvQDlWFa4"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"4. Generate valid STAC collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"t02x2cI93B"}],"identifier":"id-4-generate-valid-stac-collection","label":"4. Generate valid STAC collection","html_id":"id-4-generate-valid-stac-collection","implicit":true,"key":"jBG6LwLQl2"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Once all the assets are processed, create the parent collection for all Items created in the previous step.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Z5Fb6Vzdqb"}],"key":"v9mxPtEYjM"}],"key":"dACFuw4ta9"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"collection = pystac.Collection.from_dict(\n\n{\n  \"id\": \"sentinel3-ampli-ice-sheet-elevation\",\n  \"type\": \"Collection\",\n  \"links\": [\n  ],\n  \"title\": \"Sentinel-3 AMPLI Ice Sheet Elevation\",\n  \"extent\": {\n    \"spatial\": {\n      \"bbox\": [\n        [-180, -90, 180, 90]\n      ]\n    },\n    \"temporal\": {\n      \"interval\": [\n        [\n          \"2016-06-01T00:00:00Z\",\n          \"2024-05-09T00:00:00Z\"\n        ]\n      ]\n    }\n  },\n  \"license\": \"CC-BY-4.0\",\n  \"summaries\": {\n    \"references\": [\n      \"https://doi.org/10.5194/egusphere-2024-1323\"\n    ],\n    \"institution\": [\n      \"CNES\"\n    ],\n    \"platform_name\": [\n      \"SENTINEL-3\"\n    ],\n    \"processor_name\": [\n      \"Altimeter data Modelling and Processing for Land Ice (AMPLI)\"\n    ],\n    \"operational_mode\": [\n      \"Earth Observation\"\n    ],\n    \"processing_level\": [\n      \"2\"\n    ],\n    \"processor_version\": [\n      \"v1.0\"\n    ],\n    \"altimeter_sensor_name\": [\n      \"SRAL\"\n    ]\n  },\n  \"description\": \"Ice sheet elevation estimated along the Sentinel-3 satellite track, as retrieved with the Altimeter data Modelling and Processing for Land Ice (AMPLI). The products cover Antarctica and Greenland.\",\n  \"stac_version\": \"1.1.0\"\n}\n)\ncollection","key":"For55AjMzB"},{"type":"output","id":"qdy0mPUiaGFj1BQVdbjmQ","data":[],"key":"hVCd64gQFp"}],"key":"c0lpueqRGw"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"4.1. Add items to collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"q9HhwtnN5b"}],"identifier":"id-4-1-add-items-to-collection","label":"4.1. Add items to collection","html_id":"id-4-1-add-items-to-collection","implicit":true,"key":"BA9BnyHwIL"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Once the collection is created read all the items from disk and add the necassary links.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"A4CcnK92ho"}],"key":"nTsMet2sf7"}],"key":"CqaMubG7xi"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import glob\nfor fpath in glob.glob('examples/*'):\n    collection.add_item(pystac.Item.from_file(fpath))","key":"FOr8QX2jIy"},{"type":"output","id":"DGLS9b38HD9SI-emjgIog","data":[],"key":"HR6WirqfZ4"}],"key":"ybfoeAZ30J"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"4.2 Save the normalised collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kcsmdlTBqa"}],"identifier":"id-4-2-save-the-normalised-collection","label":"4.2 Save the normalised collection","html_id":"id-4-2-save-the-normalised-collection","implicit":true,"key":"mH357N2FQ7"}],"key":"rL8Prx5vfO"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# save the full self-contained collection\ncollection.normalize_and_save(\n    root_href='../data/example_catalog_ampli/',\n    catalog_type=pystac.CatalogType.SELF_CONTAINED\n)","key":"AGo0Y2JwGd"},{"type":"output","id":"sVI4O24ca6B6kWwC4S7y8","data":[],"key":"CvPbb5alX9"}],"key":"JYFWmhJmfO"}],"key":"pHerCwWgbK"},"references":{"cite":{"order":["https://doi.org/10.57780/s3d-83ad619"],"data":{"https://doi.org/10.57780/s3d-83ad619":{"label":"https://doi.org/10.57780/s3d-83ad619","enumerator":"1","doi":"10.57780/S3D-83AD619","html":"European Space Agency. (2025). \u003ci\u003eSentinel-3 AMPLI Ice Sheet Elevation\u003c/i\u003e. European Space Agency. \u003ca target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.57780/S3D-83AD619\"\u003e10.57780/S3D-83AD619\u003c/a\u003e","url":"https://doi.org/10.57780/S3D-83AD619"}}}},"footer":{"navigation":{"prev":{"title":"ESA Project Results Repository: Generating STAC collections with multiple assets","url":"/example-tccas","group":"EarthCODE Examples"},"next":{"title":"ESA Project Results Repository (PRR) Data Access and Collections Preview","url":"/prr-stac-download-example","group":"EarthCODE Examples"}}},"domain":"http://localhost:3000"},"project":{"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"subject":"EarthCODE Examples","title":"EarthCODE Examples","subtitle":"sub","description":"desc","github":"https://github.com/ESA-EarthCODE/documentation/tree/main/examples","id":"7459d850-c3ed-4933-a447-54e8d41b1409","toc":[{"file":"index.md"},{"children":[{"file":"PRR/PRR_STAC_introduction.ipynb"},{"file":"PRR/prr_zarr.ipynb"},{"file":"PRR/example_tccas.ipynb"},{"file":"PRR/Creating STAC Catalog_from_PRR_example.ipynb"},{"file":"PRR/PRR_STAC_download_example.ipynb"}],"file":"PRR/index.md","title":"ESA Project Results Repository (PRR)"},{"children":[{"file":"OSC/git_clerk_example.md"},{"file":"OSC/osc_pr_manual.ipynb"},{"file":"OSC/osc_pr_pystac.ipynb"},{"file":"OSC/deepcode_example.md"}],"file":"OSC/index.md","title":"Open Science Catalog (OSC)"},{"children":[{"file":"openeo/1_workflow.ipynb"},{"file":"openeo/2_experiment.ipynb"},{"file":"openeo/3_publication.md"},{"file":"openeo/4_reproduce.ipynb"}],"file":"openeo/index.md","title":"openEO"}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"index-1","title":"ESA Project Results Repository","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"prr-stac-introduction","title":"Generating a STAC Collection for the PRR","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"prr-zarr","title":"ESA Project Results Repository: Generating STAC collections with zarr files","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"example-tccas","title":"ESA Project Results Repository: Generating STAC collections with multiple assets","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"creating-stac-catalog-from-prr-example","title":"Example from SRAL Processing over Land Ice Dataset","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"prr-stac-download-example","title":"ESA Project Results Repository (PRR) Data Access and Collections Preview","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"index-2","title":"Open Science Catalog","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"git-clerk-example","title":"Git Clerk","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"osc-pr-manual","title":"Adding new content to Open Science Catalogue with Pull Request (PR)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"osc-pr-pystac","title":"Generating OSC information using pystac","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"index-3","title":"openEO","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"workflow","title":"Creating a workflow","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"experiment","title":"Creating an experiment","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"publication","title":"Publishing an experiment to EarthCODE","description":"","date":"","thumbnail":"/pr-preview/pr-13/examples/build/publishing_login-a508b1b9980ab059de791c3b8688af04.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"reproduce","title":"Reproducing an openEO Experiment published to the EarthCODE Open Science Catalogue","description":"","date":"","thumbnail":"/pr-preview/pr-13/examples/build/reproduce_editor_1-4bb555134138f8bc94eb822581ac8ed8.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/pr-preview/pr-13/examples/build/manifest-B2B2E6A5.js";
import * as route0 from "/pr-preview/pr-13/examples/build/root-IB5726YR.js";
import * as route1 from "/pr-preview/pr-13/examples/build/routes/$-LXLHKVOR.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/pr-preview/pr-13/examples/build/entry.client-UNPC4GT3.js");</script></body></html>