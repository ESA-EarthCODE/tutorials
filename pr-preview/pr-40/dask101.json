{"version":2,"kind":"Notebook","sha256":"b892daddddd166304c039c52c1ee506a8affee84e3b0de06e0d0abfe16208bbd","slug":"dask101","location":"/pangeo/pangeo101/dask101.ipynb","dependencies":[],"frontmatter":{"title":"Dask 101","content_includes_title":false,"kernelspec":{"name":"conda-env-earthcode-bids-earthcode-bids-edc_pangeo-py","display_name":"earthcode-bids-earthcode-bids-edc_pangeo","language":"python"},"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/ESA-EarthCODE/tutorials","subject":"EarthCODE Tutorials","numbering":{"title":{"offset":2}},"source_url":"https://github.com/ESA-EarthCODE/tutorials/blob/HEAD/pangeo/pangeo101/dask101.ipynb","edit_url":"https://github.com/ESA-EarthCODE/tutorials/edit/HEAD/pangeo/pangeo101/dask101.ipynb","thumbnail":"/pr-preview/pr-40/tutorials/build/8476ef8dfea9da4ad663e93b475cbbe7.svg","exports":[{"format":"ipynb","filename":"dask101.ipynb","url":"/pr-preview/pr-40/tutorials/build/dask101-7b54ce5dfa71f937abeec0d9fe98c035.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We will be using Dask with Xarray to parallelize our data analysis. The analysis is very similar to what we have done in previous examples but this time we will use data on a global coverage that we read from the SeasFire Cube.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qSVTLI0fGS"}],"key":"wYshkNhwDe"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We will learn how to use the EDC Pangeo Dask Gateway to analyse data at scale.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KnrJFbbyCm"}],"key":"VtqkmzY1NU"},{"type":"heading","depth":4,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Data","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"lzOc9ui7pD"}],"identifier":"data","label":"Data","html_id":"data","implicit":true,"key":"sYrEVDJoz1"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"In this workshop, we will be using the ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"BHgKy0wjEs"},{"type":"link","url":"https://opensciencedata.esa.int/products/seasfire-cube/collection","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"SeasFire Data Cube","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"XghSyqzLoy"}],"urlSource":"https://opensciencedata.esa.int/products/seasfire-cube/collection","key":"W9GB3CxSMF"},{"type":"text","value":" published to the EarthCODE Open Science Catalog","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"CkX7MZkpxW"}],"key":"RKiGd56a3m"},{"type":"heading","depth":5,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Related publications","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"JJhoYh3TO7"}],"identifier":"related-publications","label":"Related publications","html_id":"related-publications","implicit":true,"key":"QbX0VlVvBc"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"emphasis","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Alonso, Lazaro, Gans, Fabian, Karasante, Ilektra, Ahuja, Akanksha, Prapas, Ioannis, Kondylatos, Spyros, Papoutsis, Ioannis, Panagiotou, Eleannna, Michail, Dimitrios, Cremer, Felix, Weber, Ulrich, & Carvalhais, Nuno. (2022). SeasFire Cube: A Global Dataset for Seasonal Fire Modeling in the Earth System (0.4) [Data set]. Zenodo. ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"umfqKIToOH"},{"type":"cite","identifier":"alonso-2024","label":"alonso-2024","kind":"narrative","position":{"start":{"line":12,"column":331},"end":{"line":12,"column":343}},"children":[{"type":"text","value":"Alonso ","key":"SdISMMxUZq"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"dpIpqfvFtL"}],"key":"ximGQlacO8"},{"type":"text","value":" (2024)","key":"sT1MFABIKW"}],"enumerator":"1","key":"YROX4d7CJq"},{"type":"text","value":". The same dataset can also be downloaded from Zenodo: ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"zvY4hlehDv"},{"type":"link","url":"https://zenodo.org/records/13834057","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"https://​zenodo​.org​/records​/13834057","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Lwmu1YxRzB"}],"urlSource":"https://zenodo.org/records/13834057","key":"cppTfYLFWs"}],"key":"aqKJwIUSll"}],"key":"PHAHapx9rh"}],"key":"tfzFFcz452"}],"key":"cxjbkJnISr"}],"key":"hTTRKtmlLx"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import dask.distributed\nimport xarray","key":"E12UpDrVdq"},{"type":"output","id":"j5_JXzQ9bMHdRU4LNhEm6","data":[],"key":"th7srSnk7m"}],"key":"El3seWW4yb"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Parallelize with Dask","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"h6MdtjT93N"}],"identifier":"parallelize-with-dask","label":"Parallelize with Dask","html_id":"parallelize-with-dask","implicit":true,"key":"rqTg9V9c9p"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We know from previous chapter ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iST26Vn6DE"},{"type":"link","url":"./cloud-native-formats101.ipynb","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"cloud native formats 101","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YPnM0MJKgH"}],"urlSource":"./cloud-native-formats101.ipynb","key":"Z6f7nwnpkA"},{"type":"text","value":" that chunking is key for analyzing large datasets. In this episode, we will learn to parallelize our data analysis using ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vkinoAXwOI"},{"type":"link","url":"https://docs.dask.org/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HhyjYVAXk4"}],"urlSource":"https://docs.dask.org/","key":"f1sbKQZcD4"},{"type":"text","value":" on our chunked dataset.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MIdjuJKnDr"}],"key":"jFzIc04erc"}],"key":"WO5PSo0nY8"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What is ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UfxT9fGX6i"},{"type":"link","url":"https://docs.dask.org/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dask","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"y1faZvDqYt"}],"urlSource":"https://docs.dask.org/","key":"Lgv9PCnb2a"},{"type":"text","value":" ?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iCpuVrf91p"}],"identifier":"what-is-dask","label":"What is Dask ?","html_id":"what-is-dask","implicit":true,"key":"m52TuDYKAL"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bO13QNsGGp"}],"key":"mUgj7c9IXn"},{"type":"text","value":" scales the existing Python ecosystem: with very or no changes in your code, you can speed-up computation using Dask or process bigger than memory datasets.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dhPStAh9R8"}],"key":"H4Em4iek1A"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Dask is a flexible library for parallel computing in Python.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"po4nVEljnD"}],"key":"gw8CaSx2bH"}],"key":"pEEzrRkZMU"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"It is widely used for handling large and complex Earth Science datasets and speed up science.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"RYlGZvIh8d"}],"key":"bPJdHQ8ro3"}],"key":"Hq6i1dAgMA"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Dask is powerful, scalable and flexible. It is the leading platform today for data analytics at scale.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"CNmkqfh00i"}],"key":"NCLVfzVqu4"}],"key":"A4sSRqTDXc"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"It scales natively to clusters, cloud, HPC and bridges prototyping up to production.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"tmSEvaXBeF"}],"key":"HfildXGSCM"}],"key":"NM0RgTIwHe"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The strength of Dask is that is scales and accelerates the existing Python ecosystem e.g. Numpy, Pandas and Scikit-learn with few effort from end-users.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"U9kOSlsTgb"}],"key":"Y5M1awUYL3"}],"key":"PkmXdHl0QK"}],"key":"kxJXw0wELo"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"It is interesting to note that at first, ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"MaqWEkqaAq"},{"type":"link","url":"https://coiled.io/blog/history-dask/","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Dask has been created to handle data that is larger than memory, on a single computer","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"oWvtP6VrHp"}],"urlSource":"https://coiled.io/blog/history-dask/","key":"WYqtUPBTyW"},{"type":"text","value":". It then was extended with Distributed to compute data in parallel over clusters of computers.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"kTLrStYz65"}],"key":"HR2SyASVDE"}],"key":"TIK5kqTPQ6"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How does Dask scale and accelerate your data analysis?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"byZbcSKA0m"}],"identifier":"how-does-dask-scale-and-accelerate-your-data-analysis","label":"How does Dask scale and accelerate your data analysis?","html_id":"how-does-dask-scale-and-accelerate-your-data-analysis","implicit":true,"key":"al5MsYsAtV"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"link","url":"https://docs.dask.org/en/stable/10-minutes-to-dask.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask proposes different abstractions to distribute your computation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Y5wyCw9rQ0"}],"urlSource":"https://docs.dask.org/en/stable/10-minutes-to-dask.html","key":"E5S8EW1ncC"},{"type":"text","value":". In this ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ptQrLNihHx"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask Introduction","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mhub4Srxli"}],"key":"PUG0UPFLoa"},{"type":"text","value":" section, we will focus on ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FHi1pu9L2l"},{"type":"link","url":"https://docs.dask.org/en/stable/array.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask Array","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UfiLBPDT7K"}],"urlSource":"https://docs.dask.org/en/stable/array.html","key":"CBQ4QBDwZ0"},{"type":"text","value":" which is widely used in pangeo ecosystem as a back end of Xarray.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"J62RmwsSP7"}],"key":"owC3YKoVvk"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"As shown in the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"CnNVpBlXcm"},{"type":"link","url":"./chunking_introduction.ipynb","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"previous section","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"sr7eKeCBH0"}],"urlSource":"./chunking_introduction.ipynb","key":"WgJHFqMbIL"},{"type":"text","value":" Dask Array is based on chunks.\nChunks of a Dask Array are well-known Numpy arrays. By transforming our big datasets to Dask Array, making use of chunk, a large array is handled as many smaller Numpy ones and we can compute each of these chunks independently.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"OzDct5OiDZ"}],"key":"Fd7Lrn4NjZ"},{"type":"image","url":"/pr-preview/pr-40/tutorials/build/8476ef8dfea9da4ad663e93b475cbbe7.svg","alt":"Dask and Numpy","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"tLkZjGzrB3","urlSource":"https://examples.dask.org/_images/dask-array-black-text.svg"}],"key":"pyShDLPEpk"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How does Xarray with Dask distribute data analysis?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"foc6ObMUxs"}],"identifier":"how-does-xarray-with-dask-distribute-data-analysis","label":"How does Xarray with Dask distribute data analysis?","html_id":"how-does-xarray-with-dask-distribute-data-analysis","implicit":true,"key":"lFc0vPlw0d"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"When we use chunks with ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WYJ8PqrzBS"},{"type":"inlineCode","value":"Xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"PmC7PcKHfk"},{"type":"text","value":", the real computation is only done when needed or asked for, usually when invoking ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hO2lwQwCaz"},{"type":"inlineCode","value":"compute()","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HavYLna1Om"},{"type":"text","value":" or ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UXJ7gWjYKF"},{"type":"inlineCode","value":"load()","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"R83ZM1IbYM"},{"type":"text","value":" functions. Dask generates a ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gW7SGNNxG0"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"task graph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TkilXMXaCe"}],"key":"Y9dUv83ot1"},{"type":"text","value":" describing the computations to be done. When using ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nZ5DL2tTjX"},{"type":"link","url":"https://distributed.dask.org/en/stable/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask Distributed","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vqzzSJmapK"}],"urlSource":"https://distributed.dask.org/en/stable/","key":"xEd6X7XV1z"},{"type":"text","value":" a ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XpmZecNPCJ"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Scheduler","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"v2rhOWUqsZ"}],"key":"VdnyTzm8KJ"},{"type":"text","value":" distributes these tasks across several ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xUaVgwZMMU"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Workers","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"r5j24U9EKZ"}],"key":"EgMO6pTX1N"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mgXQtCiXqu"}],"key":"NALRygUusf"},{"type":"image","url":"/pr-preview/pr-40/tutorials/build/dask-xarray-explaine-3b6dfacef914e7dc5905c2c5fe1fdb3a.png","alt":"Xarray with da sk","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"HS3gtBiYLz","urlSource":"../static/dask-xarray-explained.png"}],"key":"riJTYIN5a1"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What is a Dask Distributed cluster ?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tZr7wAVN0d"}],"identifier":"what-is-a-dask-distributed-cluster","label":"What is a Dask Distributed cluster ?","html_id":"what-is-a-dask-distributed-cluster","implicit":true,"key":"bbWjIj55PK"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"A Dask Distributed cluster is made of two main components:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HMDJg1gGqP"}],"key":"syRm4Ejjw3"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"a Scheduler, responsible for handling computations graph and distributing tasks to Workers.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"VWKQ8YG2bo"}],"key":"RCyf3sRvlL"}],"key":"ORJJTcT1hu"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"One or several (up to 1000s) Workers, computing individual tasks and storing results and data into distributed memory (RAM and/or worker’s local disk).","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"EANIBvorFK"}],"key":"zjgnuv55WD"}],"key":"qySQI3GUsz"}],"key":"EYWkOjqrWB"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"A user usually needs ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"q251ivLjRV"},{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Client","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"gGA5vXMoBr"}],"key":"J9RCEHMjTC"},{"type":"text","value":" and ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"V8cKRHb09F"},{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Cluster","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"Xn8Kak7pMi"}],"key":"I1TGXsj5pD"},{"type":"text","value":" objects as shown below to use Dask Distributed.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"eTuwwyZkRZ"}],"key":"mDlrPZdVrm"},{"type":"image","url":"/pr-preview/pr-40/tutorials/build/5f88b4250ac348093751d7c8111d1944.png","alt":"Dask Distributed Cluster","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"tDx8HL6hqO","urlSource":"https://user-images.githubusercontent.com/306380/66413985-27111600-e9be-11e9-9995-8f418ff48f8a.png"}],"key":"kXQZ1P4Phn"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Where can we deploy a Dask distributed cluster?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Qcu3pJeqLt"}],"identifier":"where-can-we-deploy-a-dask-distributed-cluster","label":"Where can we deploy a Dask distributed cluster?","html_id":"where-can-we-deploy-a-dask-distributed-cluster","implicit":true,"key":"h0doqUQl9z"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"link","url":"https://docs.dask.org/en/stable/deploying.html","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Dask distributed clusters can be deployed on your laptop or on distributed infrastructures (Cloud, HPC centers, Hadoop, etc.)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"WYczGC5I0q"}],"urlSource":"https://docs.dask.org/en/stable/deploying.html","key":"fL7FhpGf7a"},{"type":"text","value":"  Dask distributed ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"t72ouILf3K"},{"type":"inlineCode","value":"Cluster","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ZGG0uZpWOn"},{"type":"text","value":" object is responsible of deploying and scaling a Dask Cluster on the underlying resources.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"mYr8g0USZ5"}],"key":"vxTGHdyLQj"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"EDC has one such deployment","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"oFwfScuBq8"}],"key":"ZAwWJXTffa"},{"type":"image","url":"/pr-preview/pr-40/tutorials/build/5bb4678f8c7e666155eecf57b9320e34.svg","alt":"Dask Cluster deployment","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"dqvzqrI1tf","urlSource":"https://docs.dask.org/en/stable/_images/dask-cluster-manager.svg"}],"key":"BQ5srZMS54"},{"type":"block","kind":"notebook-content","children":[{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Tip","key":"jsmVGYunUT"}],"key":"LLxUlTExKW"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"A Dask ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"h3U84wmcg0"},{"type":"inlineCode","value":"Cluster","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"MC95nMd7kb"},{"type":"text","value":" can be created on a single machine (for instance your laptop) e.g. there is no need to have dedicated computational resources. However, speedup will only be limited to your single machine resources if you do not have dedicated computational resources!","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"UgDogsNq2l"}],"key":"aPN963KZzH"}],"key":"m7UOeFnZlq"}],"key":"if8SAFircL"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dask distributed Client","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BZcV1xoeWf"}],"identifier":"dask-distributed-client","label":"Dask distributed Client","html_id":"dask-distributed-client","implicit":true,"key":"tNDk7uHqFe"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The Dask distributed ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"x3FueTstmh"},{"type":"inlineCode","value":"Client","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jRWlEo95V5"},{"type":"text","value":" is what allows you to interact with Dask distributed Clusters. When using Dask distributed, you always need to create a ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UmXBV2dXUh"},{"type":"inlineCode","value":"Client","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"m0E8fb9wLj"},{"type":"text","value":" object. Once a ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KfdwknHkne"},{"type":"inlineCode","value":"Client","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JdU1cQJr8D"},{"type":"text","value":" has been created, it will be used by default by each call to a Dask API, even if you do not explicitly use it.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"K8BI9uUs3w"}],"key":"TUe0Q79IXj"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"No matter the Dask API (e.g. Arrays, Dataframes, Delayed, Futures, etc.) that you use, under the hood, Dask will create a Directed Acyclic Graph (DAG) of tasks by analysing the code. Client will be responsible to submit this DAG to the Scheduler along with the final result you want to compute. The Client will also gather results from the Workers, and aggregate it back in its underlying Python process.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"GzIJO4bVFp"}],"key":"Qie4N6hAQ4"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Using ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"vpeq1wxZ3N"},{"type":"inlineCode","value":"Client()","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"OZU8kUApjQ"},{"type":"text","value":" function with no argument, you will create a local Dask cluster with a number of workers and threads per worker corresponding to the number of cores in the ‘local’ machine. Here, during the workshop, we are running this notebook in the EDC Pangeo cloud deployment, so the ‘local’ machine is the jupyterlab you are using at the Cloud, and the number of cores is the number of cores on the cloud computing resources you’ve been given (not on your laptop).","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"fL5gsADfeH"}],"key":"dkuvXwyvUI"}],"key":"y0xA6sGBL8"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from dask.distributed import Client\n\nclient = Client()   # create a local dask cluster on the local machine.\nclient","key":"uUIBHx76Cx"},{"type":"output","id":"eNbdUDW_IntQimp_hobUk","data":[{"name":"stderr","output_type":"stream","text":"/opt/miniconda3/envs/pangeo/lib/python3.13/site-packages/distributed/node.py:187: UserWarning: Port 8787 is already in use.\nPerhaps you already have a cluster running?\nHosting the HTTP server on port 50652 instead\n  warnings.warn(\n"},{"output_type":"execute_result","execution_count":3,"metadata":{},"data":{"text/html":{"content":"<div>\n    <div style=\"width: 24px; height: 24px; background-color: #e1e1e1; border: 3px solid #9D9D9D; border-radius: 5px; position: absolute;\"> </div>\n    <div style=\"margin-left: 48px;\">\n        <h3 style=\"margin-bottom: 0px;\">Client</h3>\n        <p style=\"color: #9D9D9D; margin-bottom: 0px;\">Client-2f2e1812-4ba4-11f0-a906-9a64fec3f90c</p>\n        <table style=\"width: 100%; text-align: left;\">\n\n        <tr>\n        \n            <td style=\"text-align: left;\"><strong>Connection method:</strong> Cluster object</td>\n            <td style=\"text-align: left;\"><strong>Cluster type:</strong> distributed.LocalCluster</td>\n        \n        </tr>\n\n        \n            <tr>\n                <td style=\"text-align: left;\">\n                    <strong>Dashboard: </strong> <a href=\"http://127.0.0.1:50652/status\" target=\"_blank\">http://127.0.0.1:50652/status</a>\n                </td>\n                <td style=\"text-align: left;\"></td>\n            </tr>\n        \n\n        </table>\n\n        \n\n        \n            <details>\n            <summary style=\"margin-bottom: 20px;\"><h3 style=\"display: inline;\">Cluster Info</h3></summary>\n            <div class=\"jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output\">\n    <div style=\"width: 24px; height: 24px; background-color: #e1e1e1; border: 3px solid #9D9D9D; border-radius: 5px; position: absolute;\">\n    </div>\n    <div style=\"margin-left: 48px;\">\n        <h3 style=\"margin-bottom: 0px; margin-top: 0px;\">LocalCluster</h3>\n        <p style=\"color: #9D9D9D; margin-bottom: 0px;\">7b0c5fc3</p>\n        <table style=\"width: 100%; text-align: left;\">\n            <tr>\n                <td style=\"text-align: left;\">\n                    <strong>Dashboard:</strong> <a href=\"http://127.0.0.1:50652/status\" target=\"_blank\">http://127.0.0.1:50652/status</a>\n                </td>\n                <td style=\"text-align: left;\">\n                    <strong>Workers:</strong> 5\n                </td>\n            </tr>\n            <tr>\n                <td style=\"text-align: left;\">\n                    <strong>Total threads:</strong> 10\n                </td>\n                <td style=\"text-align: left;\">\n                    <strong>Total memory:</strong> 24.00 GiB\n                </td>\n            </tr>\n            \n            <tr>\n    <td style=\"text-align: left;\"><strong>Status:</strong> running</td>\n    <td style=\"text-align: left;\"><strong>Using processes:</strong> True</td>\n</tr>\n\n            \n        </table>\n\n        <details>\n            <summary style=\"margin-bottom: 20px;\">\n                <h3 style=\"display: inline;\">Scheduler Info</h3>\n            </summary>\n\n            <div style=\"\">\n    <div>\n        <div style=\"width: 24px; height: 24px; background-color: #FFF7E5; border: 3px solid #FF6132; border-radius: 5px; position: absolute;\"> </div>\n        <div style=\"margin-left: 48px;\">\n            <h3 style=\"margin-bottom: 0px;\">Scheduler</h3>\n            <p style=\"color: #9D9D9D; margin-bottom: 0px;\">Scheduler-26066f49-2ec8-4cfe-9b32-a8a9517e5b75</p>\n            <table style=\"width: 100%; text-align: left;\">\n                <tr>\n                    <td style=\"text-align: left;\">\n                        <strong>Comm:</strong> tcp://127.0.0.1:50653\n                    </td>\n                    <td style=\"text-align: left;\">\n                        <strong>Workers:</strong> 5\n                    </td>\n                </tr>\n                <tr>\n                    <td style=\"text-align: left;\">\n                        <strong>Dashboard:</strong> <a href=\"http://127.0.0.1:50652/status\" target=\"_blank\">http://127.0.0.1:50652/status</a>\n                    </td>\n                    <td style=\"text-align: left;\">\n                        <strong>Total threads:</strong> 10\n                    </td>\n                </tr>\n                <tr>\n                    <td style=\"text-align: left;\">\n                        <strong>Started:</strong> Just now\n                    </td>\n                    <td style=\"text-align: left;\">\n                        <strong>Total memory:</strong> 24.00 GiB\n                    </td>\n                </tr>\n            </table>\n        </div>\n    </div>\n\n    <details style=\"margin-left: 48px;\">\n        <summary style=\"margin-bottom: 20px;\">\n            <h3 style=\"display: inline;\">Workers</h3>\n        </summary>\n\n        \n        <div style=\"margin-bottom: 20px;\">\n            <div style=\"width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;\"> </div>\n            <div style=\"margin-left: 48px;\">\n            <details>\n                <summary>\n                    <h4 style=\"margin-bottom: 0px; display: inline;\">Worker: 0</h4>\n                </summary>\n                <table style=\"width: 100%; text-align: left;\">\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Comm: </strong> tcp://127.0.0.1:50666\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Total threads: </strong> 2\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Dashboard: </strong> <a href=\"http://127.0.0.1:50667/status\" target=\"_blank\">http://127.0.0.1:50667/status</a>\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Memory: </strong> 4.80 GiB\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Nanny: </strong> tcp://127.0.0.1:50656\n                        </td>\n                        <td style=\"text-align: left;\"></td>\n                    </tr>\n                    <tr>\n                        <td colspan=\"2\" style=\"text-align: left;\">\n                            <strong>Local directory: </strong> /var/folders/k6/1r9h76z14xx_l3r9n7cdxc140000gn/T/dask-scratch-space/worker-zehlihr2\n                        </td>\n                    </tr>\n\n                    \n\n                    \n\n                </table>\n            </details>\n            </div>\n        </div>\n        \n        <div style=\"margin-bottom: 20px;\">\n            <div style=\"width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;\"> </div>\n            <div style=\"margin-left: 48px;\">\n            <details>\n                <summary>\n                    <h4 style=\"margin-bottom: 0px; display: inline;\">Worker: 1</h4>\n                </summary>\n                <table style=\"width: 100%; text-align: left;\">\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Comm: </strong> tcp://127.0.0.1:50669\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Total threads: </strong> 2\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Dashboard: </strong> <a href=\"http://127.0.0.1:50670/status\" target=\"_blank\">http://127.0.0.1:50670/status</a>\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Memory: </strong> 4.80 GiB\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Nanny: </strong> tcp://127.0.0.1:50658\n                        </td>\n                        <td style=\"text-align: left;\"></td>\n                    </tr>\n                    <tr>\n                        <td colspan=\"2\" style=\"text-align: left;\">\n                            <strong>Local directory: </strong> /var/folders/k6/1r9h76z14xx_l3r9n7cdxc140000gn/T/dask-scratch-space/worker-r8m5ei41\n                        </td>\n                    </tr>\n\n                    \n\n                    \n\n                </table>\n            </details>\n            </div>\n        </div>\n        \n        <div style=\"margin-bottom: 20px;\">\n            <div style=\"width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;\"> </div>\n            <div style=\"margin-left: 48px;\">\n            <details>\n                <summary>\n                    <h4 style=\"margin-bottom: 0px; display: inline;\">Worker: 2</h4>\n                </summary>\n                <table style=\"width: 100%; text-align: left;\">\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Comm: </strong> tcp://127.0.0.1:50672\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Total threads: </strong> 2\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Dashboard: </strong> <a href=\"http://127.0.0.1:50673/status\" target=\"_blank\">http://127.0.0.1:50673/status</a>\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Memory: </strong> 4.80 GiB\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Nanny: </strong> tcp://127.0.0.1:50660\n                        </td>\n                        <td style=\"text-align: left;\"></td>\n                    </tr>\n                    <tr>\n                        <td colspan=\"2\" style=\"text-align: left;\">\n                            <strong>Local directory: </strong> /var/folders/k6/1r9h76z14xx_l3r9n7cdxc140000gn/T/dask-scratch-space/worker-w_pbgbu4\n                        </td>\n                    </tr>\n\n                    \n\n                    \n\n                </table>\n            </details>\n            </div>\n        </div>\n        \n        <div style=\"margin-bottom: 20px;\">\n            <div style=\"width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;\"> </div>\n            <div style=\"margin-left: 48px;\">\n            <details>\n                <summary>\n                    <h4 style=\"margin-bottom: 0px; display: inline;\">Worker: 3</h4>\n                </summary>\n                <table style=\"width: 100%; text-align: left;\">\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Comm: </strong> tcp://127.0.0.1:50674\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Total threads: </strong> 2\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Dashboard: </strong> <a href=\"http://127.0.0.1:50676/status\" target=\"_blank\">http://127.0.0.1:50676/status</a>\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Memory: </strong> 4.80 GiB\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Nanny: </strong> tcp://127.0.0.1:50662\n                        </td>\n                        <td style=\"text-align: left;\"></td>\n                    </tr>\n                    <tr>\n                        <td colspan=\"2\" style=\"text-align: left;\">\n                            <strong>Local directory: </strong> /var/folders/k6/1r9h76z14xx_l3r9n7cdxc140000gn/T/dask-scratch-space/worker-rpbcznab\n                        </td>\n                    </tr>\n\n                    \n\n                    \n\n                </table>\n            </details>\n            </div>\n        </div>\n        \n        <div style=\"margin-bottom: 20px;\">\n            <div style=\"width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;\"> </div>\n            <div style=\"margin-left: 48px;\">\n            <details>\n                <summary>\n                    <h4 style=\"margin-bottom: 0px; display: inline;\">Worker: 4</h4>\n                </summary>\n                <table style=\"width: 100%; text-align: left;\">\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Comm: </strong> tcp://127.0.0.1:50678\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Total threads: </strong> 2\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Dashboard: </strong> <a href=\"http://127.0.0.1:50679/status\" target=\"_blank\">http://127.0.0.1:50679/status</a>\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Memory: </strong> 4.80 GiB\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Nanny: </strong> tcp://127.0.0.1:50664\n                        </td>\n                        <td style=\"text-align: left;\"></td>\n                    </tr>\n                    <tr>\n                        <td colspan=\"2\" style=\"text-align: left;\">\n                            <strong>Local directory: </strong> /var/folders/k6/1r9h76z14xx_l3r9n7cdxc140000gn/T/dask-scratch-space/worker-o0wcf_uh\n                        </td>\n                    </tr>\n\n                    \n\n                    \n\n                </table>\n            </details>\n            </div>\n        </div>\n        \n\n    </details>\n</div>\n\n        </details>\n    </div>\n</div>\n            </details>\n        \n\n    </div>\n</div>","content_type":"text/html"},"text/plain":{"content":"<Client: 'tcp://127.0.0.1:50653' processes=5 threads=10, memory=24.00 GiB>","content_type":"text/plain"}}}],"key":"YPbRPQaYCb"}],"key":"TiECNdrEAM"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Inspecting the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gIoeOZuPE8"},{"type":"inlineCode","value":"Cluster Info","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HXzhy0y3we"},{"type":"text","value":" section above gives us information about the created cluster: we have 2 or 4 workers and the same number of threads (e.g. 1 thread per worker).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qmePO9Efh6"}],"key":"HlO9viow28"}],"key":"Umon5wDvyS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# close client to clean resources\n# Note, you can run this tutorial locally if you uncomment this line \nclient.close()","key":"L15Bug1Vva"},{"type":"output","id":"9KLq3CxQH2ccck6Qc3TV2","data":[],"key":"TNAuT2qjX5"}],"key":"z7SR9wPZIg"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Scaling your Computation using Dask Gateway.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bRYB2y9SB8"}],"identifier":"scaling-your-computation-using-dask-gateway","label":"Scaling your Computation using Dask Gateway.","html_id":"scaling-your-computation-using-dask-gateway","implicit":true,"key":"z4pjY1fBED"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"For this workshop, you will learn how to use Dask Gateway to manage Dask clusters over Kubernetes, allowing to run our data analysis in parallel e.g. distribute tasks across several workers.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NN4vZU0qJv"}],"key":"xml0oYnLmp"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Dask Gateway is a component that helps you manage and create Dask Clusters across your environment.\nAs Dask Gateway is configured by default on this infrastructure, you just need to execute the following cells.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"rNWKsVqdBj"}],"key":"UVd5rl8lOM"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Note that, if you’re executing this locally, without prior setup for dask gateway, the following code will crash. If you would like to run this locally, skip these lines and continue with the local dask client above","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"kLFHk7Hs40"}],"key":"NIKi0xOrGD"}],"key":"k7mRx4FIbD"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from dask_gateway import Gateway\ngateway = Gateway()","key":"AepGA8xe0Y"},{"type":"output","id":"y_P_c4YiICMeeogxHtSX-","data":[],"key":"oaCUUmq1XI"}],"key":"T0aX4dyDuV"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"EDC Dask Gateway Options","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TXkmGMnRQs"}],"identifier":"edc-dask-gateway-options","label":"EDC Dask Gateway Options","html_id":"edc-dask-gateway-options","implicit":true,"key":"syvMyslDP1"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"EDC Pangeo’s Dask Gateway provides several cluster configurations for your workloads. You can choose the appropriate size based on your computational needs:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QmSxHgoBqS"}],"key":"tkp5ZTYmaE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"inlineCode","value":"small","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hvFD1rHckm"}],"key":"WNAF7tfYQN"}],"key":"yyKNJDgNJY"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Worker cores:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"sUTjEGe2Me"}],"key":"SYmAGsqFpQ"},{"type":"text","value":" 0.5","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Eed3yYkQJc"}],"key":"FHlWWuA52w"}],"key":"SItjpehWbr"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Worker memory:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"skzcHWWnEZ"}],"key":"xr3vLph4tL"},{"type":"text","value":" 1 GB","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"LUFt7ux3Dc"}],"key":"l9YaaoxW2X"}],"key":"QDBKmS7qzZ"}],"key":"S91NLCd9OE"}],"key":"RkkOOMEEJR"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"inlineCode","value":"medium","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"APSIxig3XN"}],"key":"FaEtRUkWNv"}],"key":"ldQ3OHCHis"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Worker cores:","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"gU1yeZjyKG"}],"key":"FJvZlVzFYt"},{"type":"text","value":" 2","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"KuMgBJhJtn"}],"key":"gE25Y4Kfqn"}],"key":"rNbkhNkwmP"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Worker memory:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"YPXOJ9OP6F"}],"key":"O7Re8EOVnJ"},{"type":"text","value":" 2 GB","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"KQVXxmJ5aD"}],"key":"K0XXQNvUba"}],"key":"yH9iJjBcO6"}],"key":"SgPjFMxV39"}],"key":"CNZS8jxaqh"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"inlineCode","value":"larger","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"ot789mWu3o"}],"key":"dkPc2VT0f9"}],"key":"L8thjuCTRU"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Worker cores:","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"H4UL1KbeMY"}],"key":"IlBt1MbOnQ"},{"type":"text","value":" 4","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"xZZhBcEfwc"}],"key":"ytJ53TjuUE"}],"key":"r2OLhzDoO7"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Worker memory:","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"NGesxIDknR"}],"key":"PeCSB2hLFw"},{"type":"text","value":" 4 GB","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"emMSIl0d3o"}],"key":"LnsyL1DKjP"}],"key":"A2IHqozXMa"}],"key":"nYUunYRtEn"}],"key":"TyCVlDtOcg"}],"key":"o5T3lK8lA1"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"You can set these options when spawning your Dask clusters to ensure optimal resource allocation.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"E2OXK7raCx"}],"key":"vYWRnzLE7w"}],"key":"U2tP76SJVw"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cluster_options = gateway.cluster_options()\ncluster_options","key":"Xil6CHP8Rt"},{"type":"output","id":"L5y3OSUYlSmJrjHemwQ5C","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"017ce10b16fb44e39c9ea2600371d89e\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"text/plain":{"content":"VBox(children=(HTML(value='<h2>Cluster Options</h2>'), GridBox(children=(HTML(value=\"<p style='font-weight: bo…","content_type":"text/plain"}}}],"key":"Ggimk1MDgL"}],"key":"sLDacVq9G2"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cluster = gateway.new_cluster(cluster_options=cluster_options)\n# cluster.scale(2)\ncluster","key":"PMIcnc0oSX"},{"type":"output","id":"6qRD14AhqFHXB5h1zngax","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"4453ea73e54843db9c7838028ddf51a9\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"text/plain":{"content":"VBox(children=(HTML(value='<h2>GatewayCluster</h2>'), HBox(children=(HTML(value='\\n<div>\\n<style scoped>\\n    …","content_type":"text/plain"}}}],"key":"vAvlho8Vfb"}],"key":"CFi03aOmSi"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Get a client from the Dask Gateway Cluster","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GHZpoDAfhN"}],"identifier":"get-a-client-from-the-dask-gateway-cluster","label":"Get a client from the Dask Gateway Cluster","html_id":"get-a-client-from-the-dask-gateway-cluster","implicit":true,"key":"Y8zqpJxdRr"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"As stated above, creating a Dask ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gpij4Hhtv7"},{"type":"inlineCode","value":"Client","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZiElvORoFa"},{"type":"text","value":" is mandatory in order to perform following Daks computations on your Dask Cluster.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ypoTmeq5M1"}],"key":"IEUe6eiqUN"}],"key":"fDnWnfJQ5q"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"client = cluster.get_client()\nclient","key":"HWGUlsyjjL"},{"type":"output","id":"ViZglVxujkOKhvbjU5Ap1","data":[{"output_type":"execute_result","execution_count":12,"metadata":{},"data":{"text/html":{"content":"<div>\n    <div style=\"width: 24px; height: 24px; background-color: #e1e1e1; border: 3px solid #9D9D9D; border-radius: 5px; position: absolute;\"> </div>\n    <div style=\"margin-left: 48px;\">\n        <h3 style=\"margin-bottom: 0px;\">Client</h3>\n        <p style=\"color: #9D9D9D; margin-bottom: 0px;\">Client-03805c84-9959-11f0-807d-0255ac10008e</p>\n        <table style=\"width: 100%; text-align: left;\">\n\n        <tr>\n        \n            <td style=\"text-align: left;\"><strong>Connection method:</strong> Cluster object</td>\n            <td style=\"text-align: left;\"><strong>Cluster type:</strong> dask_gateway.GatewayCluster</td>\n        \n        </tr>\n\n        \n            <tr>\n                <td style=\"text-align: left;\">\n                    <strong>Dashboard: </strong> <a href=\"https://hub-otc.eox.at/services/eoxhub-gateway/lampata-test/traefik-dask-gateway/clusters/lampata-test.65f31c3c72594ff09834703292dd8226/status\" target=\"_blank\">https://hub-otc.eox.at/services/eoxhub-gateway/lampata-test/traefik-dask-gateway/clusters/lampata-test.65f31c3c72594ff09834703292dd8226/status</a>\n                </td>\n                <td style=\"text-align: left;\"></td>\n            </tr>\n        \n\n        </table>\n\n        \n\n        \n            <details>\n            <summary style=\"margin-bottom: 20px;\"><h3 style=\"display: inline;\">Cluster Info</h3></summary>\n            <div style='background-color: #f2f2f2; display: inline-block; padding: 10px; border: 1px solid #999999;'>\n  <h3>GatewayCluster</h3>\n  <ul>\n    <li><b>Name: </b>lampata-test.65f31c3c72594ff09834703292dd8226\n    <li><b>Dashboard: </b><a href='https://hub-otc.eox.at/services/eoxhub-gateway/lampata-test/traefik-dask-gateway/clusters/lampata-test.65f31c3c72594ff09834703292dd8226/status' target='_blank'>https://hub-otc.eox.at/services/eoxhub-gateway/lampata-test/traefik-dask-gateway/clusters/lampata-test.65f31c3c72594ff09834703292dd8226/status</a>\n  </ul>\n</div>\n\n            </details>\n        \n\n    </div>\n</div>","content_type":"text/html"},"text/plain":{"content":"<Client: 'tls://172.16.0.234:8786' processes=0 threads=0, memory=0 B>","content_type":"text/plain"}}}],"key":"OuK8JyblGs"}],"key":"uKU5VvuOHn"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dask Dashboard","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Y2V02tc3vM"}],"identifier":"dask-dashboard","label":"Dask Dashboard","html_id":"dask-dashboard","implicit":true,"key":"sy3JHhRAQu"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask comes with a really handy interface: the Dask Dashboard. It is a web interface that you can open in a separated tab of your browser.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zMFWaJ7WS7"}],"key":"a4A9ret6Gl"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We will learn here how to use it through ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"TVUWZGeqM2"},{"type":"link","url":"https://github.com/dask/dask-labextension","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"dask jupyterlab extension","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"x7kh83dhUH"}],"urlSource":"https://github.com/dask/dask-labextension","error":true,"key":"Go5zR70Oyk"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KoCRbA8byT"}],"key":"le23HNh0Om"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"To use Dask Dashboard through jupyterlab extension on Pangeo EDC infrastructure,\nyou will just need too look at the html link you have for your jupyterlab, and Dask dashboard port number, as highlighted in the figure below.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"LBvTmkse8P"}],"key":"qyNOLXlTdZ"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"image","url":"/pr-preview/pr-40/tutorials/build/dashboardlink-f42ca015b25969ee46352c5f43d69fe8.png","alt":"Dash Board link","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"LsPlEAL2Ql","urlSource":"../static/dashboardlink.png"},{"type":"text","value":"\n","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"NqhTugznXB"},{"type":"image","url":"/pr-preview/pr-40/tutorials/build/dasklab-59b90252c5d20087b46b428f4e4db9e8.png","alt":"Dash lab","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"EWB04tjonN","urlSource":"../static/dasklab.png"}],"key":"X4XQnZnJjm"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Then click the orange icon indicated in the above figure, and type ‘your’ dashboard link.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"EtrfL9gnwR"}],"key":"RYqy1VJgUj"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"You can click several buttons indicated with blue arrows in above figures, then drag and drop to place them as your convenience.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"e1At1geEwi"}],"key":"ZY3oeNQ2Zh"},{"type":"image","url":"/pr-preview/pr-40/tutorials/build/exampledasklab-b37fe560c1e466944f2f0db284edc771.png","alt":"Example dask lab","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"GahFCW8Ir8","urlSource":"../static/exampledasklab.png"},{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"It’s really helpfull to understand your computation and how it is distributed.","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"IxEjPAgSld"}],"key":"TdCD9t2Bsq"}],"key":"pqdgRSKktl"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dask Distributed computations on our dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WHluyqTSNS"}],"identifier":"dask-distributed-computations-on-our-dataset","label":"Dask Distributed computations on our dataset","html_id":"dask-distributed-computations-on-our-dataset","implicit":true,"key":"YQ3EtlqHzn"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s open the SeasFire dataset we previously looked at, select a single location over time, visualize the task graph generated by Dask, and observe the Dask Dashboard.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vIswWNbSUX"}],"key":"BaGf8Nntx0"}],"key":"L4Ddojd6Wo"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"http_url = \"https://s3.waw4-1.cloudferro.com/EarthCODE/OSCAssets/seasfire/seasfire_v0.4.zarr/\"\n\nds = xarray.open_dataset(\n\thttp_url,\n\tengine='zarr',\n    chunks={},\n\tconsolidated=True\n)\nds","key":"puGe3FxzGo"},{"type":"output","id":"eLshP8u7JbhMjOMQ8Bahv","data":[{"output_type":"execute_result","execution_count":13,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"296be148a4e7e60f4ca78f20335d22ed","path":"/pr-preview/pr-40/tutorials/build/296be148a4e7e60f4ca78f20335d22ed.html"},"text/plain":{"content":"<xarray.Dataset> Size: 164GB\nDimensions:                         (latitude: 720, longitude: 1440, time: 966)\nCoordinates:\n  * latitude                        (latitude) float64 6kB 89.88 ... -89.88\n  * longitude                       (longitude) float64 12kB -179.9 ... 179.9\n  * time                            (time) datetime64[ns] 8kB 2001-01-01 ... ...\nData variables: (12/59)\n    area                            (latitude, longitude) float32 4MB dask.array<chunksize=(180, 360), meta=np.ndarray>\n    biomes                          (latitude, longitude) float32 4MB dask.array<chunksize=(180, 360), meta=np.ndarray>\n    cams_co2fire                    (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    cams_frpfire                    (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    drought_code_max                (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    drought_code_mean               (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    ...                              ...\n    t2m_max                         (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    t2m_mean                        (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    t2m_min                         (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    tp                              (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    vpd                             (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    ws10                            (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\nAttributes:\n    crs:          EPSG:4326\n    description:  The SeasFire Cube is a scientific datacube for seasonal fir...\n    title:        SeasFire Cube: A Global Dataset for Seasonal Fire Modeling ...","content_type":"text/plain"}}}],"key":"JEIQx7sEIk"}],"key":"Jinseg3wnj"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"mask= ds['lsm'][:,:]\ngwis_all= ds.gwis_ba.resample(time=\"1YE\").sum()\ngwis_all= gwis_all.where(mask>0.5)\n\ngwis_2020= gwis_all.sel(time='2020-08-01', method='nearest')\ngwis_2020.data","key":"YoiM37U5hQ"},{"type":"output","id":"oVQgoXoA3jFixeJGQDZFB","data":[{"output_type":"execute_result","execution_count":14,"metadata":{},"data":{"text/html":{"content":"<table>\n    <tr>\n        <td>\n            <table style=\"border-collapse: collapse;\">\n                <thead>\n                    <tr>\n                        <td> </td>\n                        <th> Array </th>\n                        <th> Chunk </th>\n                    </tr>\n                </thead>\n                <tbody>\n                    \n                    <tr>\n                        <th> Bytes </th>\n                        <td> 3.96 MiB </td>\n                        <td> 253.12 kiB </td>\n                    </tr>\n                    \n                    <tr>\n                        <th> Shape </th>\n                        <td> (720, 1440) </td>\n                        <td> (180, 360) </td>\n                    </tr>\n                    <tr>\n                        <th> Dask graph </th>\n                        <td colspan=\"2\"> 16 chunks in 12 graph layers </td>\n                    </tr>\n                    <tr>\n                        <th> Data type </th>\n                        <td colspan=\"2\"> float32 numpy.ndarray </td>\n                    </tr>\n                </tbody>\n            </table>\n        </td>\n        <td>\n        <svg width=\"170\" height=\"110\" style=\"stroke:rgb(0,0,0);stroke-width:1\" >\n\n  <!-- Horizontal lines -->\n  <line x1=\"0\" y1=\"0\" x2=\"120\" y2=\"0\" style=\"stroke-width:2\" />\n  <line x1=\"0\" y1=\"15\" x2=\"120\" y2=\"15\" />\n  <line x1=\"0\" y1=\"30\" x2=\"120\" y2=\"30\" />\n  <line x1=\"0\" y1=\"45\" x2=\"120\" y2=\"45\" />\n  <line x1=\"0\" y1=\"60\" x2=\"120\" y2=\"60\" style=\"stroke-width:2\" />\n\n  <!-- Vertical lines -->\n  <line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"60\" style=\"stroke-width:2\" />\n  <line x1=\"30\" y1=\"0\" x2=\"30\" y2=\"60\" />\n  <line x1=\"60\" y1=\"0\" x2=\"60\" y2=\"60\" />\n  <line x1=\"90\" y1=\"0\" x2=\"90\" y2=\"60\" />\n  <line x1=\"120\" y1=\"0\" x2=\"120\" y2=\"60\" style=\"stroke-width:2\" />\n\n  <!-- Colored Rectangle -->\n  <polygon points=\"0.0,0.0 120.0,0.0 120.0,60.0 0.0,60.0\" style=\"fill:#ECB172A0;stroke-width:0\"/>\n\n  <!-- Text -->\n  <text x=\"60.000000\" y=\"80.000000\" font-size=\"1.0rem\" font-weight=\"100\" text-anchor=\"middle\" >1440</text>\n  <text x=\"140.000000\" y=\"30.000000\" font-size=\"1.0rem\" font-weight=\"100\" text-anchor=\"middle\" transform=\"rotate(-90,140.000000,30.000000)\">720</text>\n</svg>\n        </td>\n    </tr>\n</table>","content_type":"text/html"},"text/plain":{"content":"dask.array<getitem, shape=(720, 1440), dtype=float32, chunksize=(180, 360), chunktype=numpy.ndarray>","content_type":"text/plain"}}}],"key":"wjLfr3nNUb"}],"key":"lLVcVPXGXT"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"gwis_2020.data.visualize(optimize_graph=True)","key":"iikLBNcvet"},{"type":"output","id":"COIF65iY2mk-aczsngK7z","data":[{"output_type":"execute_result","execution_count":15,"metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"56bc4ff11e5f3b241d45bc54006a24d6","path":"/pr-preview/pr-40/tutorials/build/56bc4ff11e5f3b241d45bc54006a24d6.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}}],"key":"NZSgQ7J3GJ"}],"key":"zeGvFuZBNj"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Did you notice something on the Dask Dashboard when running the two previous cells?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zcRHgz3RJa"}],"key":"QtFSqXzLxh"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We didn’t ‘compute’ anything. We just built a Dask task graph with it’s size indicated as count above, but did not ask Dask to return a result.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cGdVjzITY2"}],"key":"dtdxMPqg0u"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Note that underneath, dask optimizes the execution graph (opaquely), so as to minimize overheads and overall execution resources (hence why we’re passing optimize_graph=True)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"IrFDVypIRg"}],"key":"fZv0P1NQx8"}],"key":"CQzNFjLTIk"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Computing","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Dn1brraCiw"}],"identifier":"computing","label":"Computing","html_id":"computing","implicit":true,"key":"Y6dbtqrpBb"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Calling compute on our Xarray object will trigger the execution on the Dask Cluster. Alternatively any action that would demand the computation of our data (e.g. plotting) would trigger the execution of our workflow.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WCHb8kQ2CQ"}],"key":"hMSZcLxPQv"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"You should be able to see how Dask is working on Dask Dashboard.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Z5RZYEwiTs"}],"key":"IGMngkZQ4k"}],"key":"o5yH3kvHXS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"gwis_2020.plot()","key":"DMraZAtARX"},{"type":"output","id":"H4FNqkKGpJ7cu15f_JEkW","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"c309c0a276dd1cfaf56711f7d6b53eac","path":"/pr-preview/pr-40/tutorials/build/c309c0a276dd1cfaf56711f7d6b53eac.png"},"text/plain":{"content":"<Figure size 640x480 with 2 Axes>","content_type":"text/plain"}}}],"key":"oYuY4V4gSa"}],"key":"YCuRcuk5zi"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Closing Clusters","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"r8ixLfrVpi"}],"identifier":"closing-clusters","label":"Closing Clusters","html_id":"closing-clusters","implicit":true,"key":"hgWJOFTXxe"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Close Clusters to Clean Resources for the next exercise (generally a good practice!)","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"rVSgo4iDoC"}],"key":"I537ntQ0zN"}],"key":"fAnSJ3pNUW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# close client to clean resources\nclient.close()","key":"UMoX4bYwDc"},{"type":"output","id":"fBZIeCYlBL3UE0aZTY9C_","data":[],"key":"A2VP8OSStd"}],"key":"LGqepUUV5G"}],"key":"yvohKdAbTz"},"references":{"cite":{"order":["alonso-2024"],"data":{"alonso-2024":{"label":"alonso-2024","enumerator":"1","doi":"10.5281/ZENODO.13834057","html":"Alonso, L., Gans, F., Karasante, I., Ahuja, A., Prapas, I., Kondylatos, S., Papoutsis, I., Panagiotou, E., Mihail, D., Cremer, F., Weber, U., & Carvalhais, N. (2024). <i>SeasFire Cube: A Global Dataset for Seasonal Fire Modeling in the Earth System</i>. Zenodo. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.5281/ZENODO.13834057\">10.5281/ZENODO.13834057</a>","url":"https://doi.org/10.5281/ZENODO.13834057"}}}},"footer":{"navigation":{"prev":{"title":"Zarr 101","url":"/cloud-native-formats-101","group":"EarthCODE Tutorials"},"next":{"title":"Example EarthCODE Workflow","url":"/pangeo-on-earthcode","group":"EarthCODE Tutorials"}}},"domain":"http://localhost:3000"}