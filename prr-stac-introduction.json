{"version":2,"kind":"Notebook","sha256":"9aef362abbc6e3445c1f54106d99d354495262f4a1dc217d98d62040c16605fb","slug":"prr-stac-introduction","location":"/PRR/PRR_STAC_introduction.ipynb","dependencies":[],"frontmatter":{"title":"Generating STAC metadata for the OHC 4d Atlantic dataset","content_includes_title":false,"kernelspec":{"name":"conda-env-micromamba-pangeo-py","display_name":"Python [conda env:micromamba-pangeo] *","language":"python"},"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/ESA-EarthCODE/tutorials","subject":"EarthCODE Tutorials","numbering":{"title":{"offset":1}},"source_url":"https://github.com/ESA-EarthCODE/tutorials/blob/main/PRR/PRR_STAC_introduction.ipynb","edit_url":"https://github.com/ESA-EarthCODE/tutorials/edit/main/PRR/PRR_STAC_introduction.ipynb","exports":[{"format":"ipynb","filename":"PRR_STAC_introduction.ipynb","url":"/tutorials/build/PRR_STAC_introductio-11aaeb9aa22e4677e21ed7c23209e7d5.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Introduction","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZBCdeK0WiD"}],"identifier":"introduction","label":"Introduction","html_id":"introduction","implicit":true,"key":"qEw1gQbhb8"}],"key":"VQwwSdLdlD"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This notebook has been created to show the core steps required of EarthCODE users to upload their research outcomes to the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jY5g8AhHB2"},{"type":"link","url":"https://eoresults.esa.int/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"ESA Project Results Repository (PRR)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Q1ClyHnKP9"}],"urlSource":"https://eoresults.esa.int/","key":"pTjJarx81Y"},{"type":"text","value":". It focuses on generating metadata for a project with a single  ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SFH7rcQrDO"},{"type":"inlineCode","value":"netcdf","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HqZe3iL08i"},{"type":"text","value":" file. Checkout the other projects on the webpage for more complex examples.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zZ77iwq8Og"}],"key":"XGFzjzfdcv"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"PRR provides access to data, workflows, experiments and documentation from ESA Projects organised across Collections, accessible via the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qWQhGFMHwE"},{"type":"link","url":"https://github.com/radiantearth/stac-api-spec","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"STAC API","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bZguBzqv6S"}],"urlSource":"https://github.com/radiantearth/stac-api-spec","error":true,"key":"VtCCgpvmWu"},{"type":"text","value":". Each Collection contains ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BDuGLHjdTz"},{"type":"link","url":"https://github.com/radiantearth/stac-spec/blob/master/item-spec/item-spec.md","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"STAC Items","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JiwPtkOl3F"}],"urlSource":"https://github.com/radiantearth/stac-spec/blob/master/item-spec/item-spec.md","data":{"kind":"file","org":"radiantearth","repo":"stac-spec","reference":"master","file":"item-spec/item-spec.md","raw":"https://raw.githubusercontent.com/radiantearth/stac-spec/master/item-spec/item-spec.md"},"internal":false,"protocol":"github","key":"CojjYkxNIL"},{"type":"text","value":", with their related Assets stored within the PRR storage. Scientists/commercial companies can access the PRR via the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EqMR7oYEtP"},{"type":"link","url":"https://earthcode.esa.int/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"EarthCODE","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zQn0wtSOQ4"}],"urlSource":"https://earthcode.esa.int/","key":"FifN4touOC"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NpaJr2MpDR"},{"type":"link","url":"https://esa-apex.github.io/apex_documentation/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"APEx","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ya2L386umh"}],"urlSource":"https://esa-apex.github.io/apex_documentation/","key":"CiiFw0P1w0"},{"type":"text","value":" projects.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OkqKN5JTlg"}],"key":"fgoO3UpEui"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"uI2vXx2HLf"},{"type":"link","url":"https://stacspec.org/en","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"STAC Specification","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"y7HyH9Csup"}],"urlSource":"https://stacspec.org/en","key":"Lw15evpvZW"},{"type":"text","value":", provides detailed explanation and more information on this metadata format.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"sNW21okwk5"}],"key":"OvRpysUvl2"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"In order to upload data to the ESA Project Results Repository (PRR) you have to generate a STAC Collection that is associated to your files. The STAC Collection provides metadata about your files and makes them searchable and machine readable. The metadata generation process is organised in four steps process:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"uu4NLcx708"}],"key":"u5EfuMKsG5"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Generate a root STAC Collection","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"TCGgcWE9jT"}],"key":"TyyPIDoY8U"}],"key":"NPPkRvHrge"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Group your dataset files into STAC Items and STAC Assets","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"d4JPVCRds3"}],"key":"MtKx413EFn"}],"key":"wDpjydDYkj"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add the Items to the Collection","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"YYrwlZb6i0"}],"key":"S10bPt6lJp"}],"key":"upgxN2JNW4"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Save the normalised Collection","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Tqhn29Ectn"}],"key":"KkNNPODtkk"}],"key":"aYGJMQ78k5"}],"key":"zonSmclwbR"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"The easiest way to generate all the required files is to use a STAC library, such as ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"l3nMWgNBND"},{"type":"inlineCode","value":"pystac","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"LW1KVgwqgi"},{"type":"text","value":" or ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"qCRbJkrgOO"},{"type":"inlineCode","value":"riostac","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"CDELLsAunF"},{"type":"text","value":". This library will take care of creating the links and formating the files in the correct way.  In the examples below we are using ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"JahhHTl1B8"},{"type":"inlineCode","value":"pystac","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"Dci6ozScOD"},{"type":"text","value":".","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"jtzvjdNUCX"}],"key":"OJwmw2H4eN"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Have a look at the steps below and learn how to prepare your dataset to generate a valid STAC Collection. You will find all the steps descibed in the markdown cell, together with the example code (executable) to make this process easier. Please adjust the information in the fields required to describe your Collection and Items according to the comments, starting with : ‚Äú#‚Äù","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"COWrLKSQki"}],"key":"MVF9F7TRM1"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"NOTE: Depending on the information that you put in the Assets or Items the code, you may get an error about an object not being json-serialisable. If this happens, you have to transform the problem field into an object that can be described using standard JSON. For example, transforming a numpy array into a list.","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"x8ZVdJ5zS9"}],"key":"fB0eXojYmn"}],"key":"rptQAWNtj1"}],"key":"Pxmzm1oNAT"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"üåä Example: 4DATLANTIC-OHC Project","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Bxx8wPuqyo"}],"identifier":"id-example-4datlantic-ohc-project","label":"üåä Example: 4DATLANTIC-OHC Project","html_id":"id-example-4datlantic-ohc-project","implicit":true,"key":"C2cXUagXoz"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The code below demonstrates how to perform the necessary steps using real data from the ESA Regional Initiative Project ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NaPO3t5NIp"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"4DATLANTIC-OHC","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Jrtp7FZkNR"}],"key":"zpvBxsqHFw"},{"type":"text","value":". The project focuses on ocean heat content and provides monthly gridded Atlantic Ocean heat content change as well as OHC trends and their uncertainties.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dDEcuy2M07"}],"key":"USw3NST0aD"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"üîó Learn more about the project here: ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"yGfB0LEA9c"},{"type":"link","url":"https://eo4society.esa.int/projects/4datlantic-ohc/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"4DATLANTIC-OHC ‚Äì EO4Society","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"rQOizvU183"}],"urlSource":"https://eo4society.esa.int/projects/4datlantic-ohc/","key":"IcDEB9JCDS"},{"type":"text","value":" ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"J4fauP2GsR"},{"type":"break","key":"AcYduBAGib"},{"type":"text","value":"\nüîó Check the project website: ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"jZbRGvVZGR"},{"type":"link","url":"https://www.4datlantic-ohc.org/about","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"4DATLANTIC-OHC ‚Äì Website","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"dIPXb4pdP6"}],"urlSource":"https://www.4datlantic-ohc.org/about","key":"wO8nkM0L6R"}],"key":"IOUzp0X4jF"},{"type":"heading","depth":4,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Acknowledgment","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"EXPbir0Qxc"}],"identifier":"acknowledgment","label":"Acknowledgment","html_id":"acknowledgment","implicit":true,"key":"hAB8x8evoi"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"We gratefully acknowledge the ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"RW9kQGb4mZ"},{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"4DATLANTIC-OHC project team","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"US6NyUFDci"}],"key":"YgZPz2ZdCG"},{"type":"text","value":" for providing access to the data used in this example.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"SuVXB4zzpS"}],"key":"LvuwOSODSf"},{"type":"blockquote","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"This example is intended to help you understand the workflow and apply similar steps to your own Earth observation data analysis. ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"bds7Nqfkn0"},{"type":"break","key":"vkpifwOyO1"}],"key":"KAeOLy2Bct"}],"key":"aW5QlqojIx"}],"key":"Velh4XpYr7"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Import necessary Python libraries","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IGiXwTvwsC"}],"identifier":"import-necessary-python-libraries","label":"Import necessary Python libraries","html_id":"import-necessary-python-libraries","implicit":true,"key":"rWh03ObNRT"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"You can create an example conda/miniconda enviroment to run the below code using:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ub4TRjpqKS"}],"key":"FqBURjVY20"},{"type":"code","lang":"bash","value":"conda create -n prr_stack_example pystac xarray shapely\nconda activate prr_stack_example","position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"key":"ZVmmtZdsOL"}],"key":"FK1XMTkvcD"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# import libraries\nfrom pystac import Collection\nimport pystac\nimport xarray as xr\nimport shapely\nimport json\nfrom datetime import datetime","key":"XAgcuP5PiG"},{"type":"output","id":"8Heo6SyMRE2Tl-OvFfW2N","data":[],"key":"MmnsQeXCdv"}],"key":"WeXVc3hBN7"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1. Generate a root STAC collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"suzvFTJNHD"}],"identifier":"id-1-generate-a-root-stac-collection","label":"1. Generate a root STAC collection","html_id":"id-1-generate-a-root-stac-collection","implicit":true,"key":"rhpQ3gspzE"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The root STAC Collection provides a general description of the enitre dataset, that you would like to store in ESA PRR. In the STAC Specification a Collection is defined as  an extension of the STAC Catalog with additional information such as the extents, license, keywords, providers, etc that describe STAC Items that fall within the Collection. ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"WWMMeGsPOY"},{"type":"break","key":"OCaXTc2AI8"}],"key":"GhIVLpp2Vv"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"In short: it behaves as the container to store the various Items that build up your dataset. ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"bcqfS4hKRH"},{"type":"break","key":"W6dUz4Unkq"}],"key":"aT9r82Z1uH"}],"key":"hJvU4FinhE"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"STAC Collection has some required fields that you need to provide in order to build its valid description. Most of these metadata fields should be extracted from your data.\nPlease have a look at the example below.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"s3sDkyYS23"}],"key":"JMcMeavq3J"},{"type":"code","lang":"python","value":"{\n  \"type\": \"Collection\", # Do not change\n  \"id\": \"\", # add a unique variation of project name + dataset name \n  \"stac_version\": \"1.1.0\", # Do not change\n  \"title\": \"\", # Meaningful title of your dataset\n  \"description\": \"\", # General description of your dataset\n  \"extent\": {\n    \"spatial\": {\n      \"bbox\": [\n        [\n          -180.0,\n          -90.0,\n          180.0,\n          90.0\n        ]\n      ]\n    }, # Spatial extent of your dataset. If you have multiple data files take the minimum bounding box that covers all.\n    \"temporal\": {\n      \"interval\": [\n        [\n          \"1982-01-01T00:00:00Z\",\n          \"2022-12-31T23:59:59Z\"\n        ] # Temporal extent of your dataset. If you have multiple data files take the minimum temporal range that covers all.\n      ]\n    }\n  },\n\"license\": \"\", # the license that applies to entire dataset\n\"links\": [] # do not change\n\n}","position":{"start":{"line":12,"column":1},"end":{"line":43,"column":1}},"key":"OtRlP7BlPA"}],"key":"Mj9SpHarxp"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example | Create Collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bHXD0sfl7p"}],"identifier":"example-create-collection","label":"Example | Create Collection","html_id":"example-create-collection","implicit":true,"key":"FjycBHQeat"}],"key":"ZDFYHT2PlF"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# define collection id, since it will be reused\ncollectionid = \"4datlantic-ohc\"\n\n# create the root collection using pystac.Collection\n\ncollection = Collection.from_dict(\n    \n{\n  \"type\": \"Collection\",\n  \"id\": collectionid,\n  \"stac_version\": \"1.1.0\",\n  \"title\": \"Atlantic Ocean heat content change\",\n  \"description\": \"Given the major role of the Atlantic Ocean in the climate system, it is essential to characterize the temporal and spatial variations of its heat content. The OHC product results from the space geodetic approach also called altimetry-gravimetry approach. This dataset contains variables as 3D grids of ocean heat content anomalies at 1x1 resolution and monthly time step. Error variance-covariance matrices of OHC at regional scale and annual resolution are also provided. See Experimental Dataset Description for details: https://www.aviso.altimetry.fr/fileadmin/documents/data/tools/OHC-EEI/OHCATL-DT-035-MAG_EDD_V2.0.pdf.Version. V2-0 of Dataset published 2022 in Centre National d‚ÄôEtudes Spatiales. This dataset has been produced within the framework of the 4DAtlantic-Ocean heat content Project funded by ESA.\",\n  \"extent\": {\n    \"spatial\": {\n      \"bbox\": [\n        [-100, \n         -90, \n         25,\n         90]\n      ]\n    },\n    \"temporal\": {\n      \"interval\": [\n        [\n          \"2002-04-15T18:07:12Z\",\n          \"2023-09-01T18:59:59Z\"\n        ]\n      ]\n    }\n  },\n  \"license\": \"Aviso License\",\n  \"links\": []\n\n}\n\n)\n\ncollection","key":"cFXKwjFe5r"},{"type":"output","id":"5bb2gbQOCJe8DSIzKTxP9","data":[{"output_type":"execute_result","execution_count":2,"metadata":{},"data":{"text/html":{"content":"\n\n<style>\n.pystac-summary {\n    cursor: pointer;\n    display: list-item;\n    list-style: revert;\n    margin-bottom: 0 !important;\n\n    .pystac-l {\n        padding-left: 0.5em;\n        color: rgb(64, 128, 128);\n        font-style: italic;\n    }\n}\n.pystac-row {\n    overflow-wrap: break-word;\n    padding-left: .825em;\n\n    .pystac-k {\n        display: inline-block;\n        margin: 0px 0.5em 0px 0px;\n    }\n    .pystac-v {\n        color: rgb(186, 33, 33);\n    }\n}\n.pystac-k {\n    color: rgb(0, 128, 0);\n    font-weight: 700;\n}\n</style>\n<div class=\"jp-RenderedJSON jp-mod-trusted jp-OutputArea-output\">\n    <div class=\"container\" style=\"line-height: normal;\">\n        <ul style=\"padding: 0px; margin: 0px; list-style: none; display: block;\">\n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"Collection\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">id</span>\n            <span class=\"pystac-v\">\"4datlantic-ohc\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">stac_version</span>\n            <span class=\"pystac-v\">\"1.1.0\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">description</span>\n            <span class=\"pystac-v\">\"Given the major role of the Atlantic Ocean in the climate system, it is essential to characterize the temporal and spatial variations of its heat content. The OHC product results from the space geodetic approach also called altimetry-gravimetry approach. This dataset contains variables as 3D grids of ocean heat content anomalies at 1x1 resolution and monthly time step. Error variance-covariance matrices of OHC at regional scale and annual resolution are also provided. See Experimental Dataset Description for details: https://www.aviso.altimetry.fr/fileadmin/documents/data/tools/OHC-EEI/OHCATL-DT-035-MAG_EDD_V2.0.pdf.Version. V2-0 of Dataset published 2022 in Centre National d‚ÄôEtudes Spatiales. This dataset has been produced within the framework of the 4DAtlantic-Ocean heat content Project funded by ESA.\"</span>\n        </li>\n    \n                \n            \n                \n                    <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">links</span><span class=\"pystac-l\">[] 0 items</span></summary>\n        \n    </details></li>\n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Atlantic Ocean heat content change\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">extent</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">spatial</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">bbox</span><span class=\"pystac-l\">[] 1 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span><span class=\"pystac-l\">[] 4 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">0</span>\n            <span class=\"pystac-v\">-100</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">1</span>\n            <span class=\"pystac-v\">-90</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">2</span>\n            <span class=\"pystac-v\">25</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">3</span>\n            <span class=\"pystac-v\">90</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">temporal</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">interval</span><span class=\"pystac-l\">[] 1 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span><span class=\"pystac-l\">[] 2 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">0</span>\n            <span class=\"pystac-v\">\"2002-04-15T18:07:12Z\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">1</span>\n            <span class=\"pystac-v\">\"2023-09-01T18:59:59Z\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">license</span>\n            <span class=\"pystac-v\">\"Aviso License\"</span>\n        </li>\n    \n                \n            \n        </ul>\n    </div>\n</div>","content_type":"text/html"},"text/plain":{"content":"<Collection id=4datlantic-ohc>","content_type":"text/plain"}}}],"key":"gnzV4S4TSR"}],"key":"WuozVXhC7R"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2.  Group your dataset files into STAC Items and STAC Assets","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"f9K8bVUMnA"}],"identifier":"id-2-group-your-dataset-files-into-stac-items-and-stac-assets","label":"2.  Group your dataset files into STAC Items and STAC Assets","html_id":"id-2-group-your-dataset-files-into-stac-items-and-stac-assets","implicit":true,"key":"WdpeiZTebm"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The second step is to describe the different files as Items and Assets. This is the most time-consuming step. There are multiple strategies for doing this and it is up to you to decide how to do it. The main consideration should be usability of the data.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CZrszY2us5"}],"key":"ttiFatoOdd"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"For example:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"X7aujdfH2M"}],"key":"rR4waXCGNJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Microsoft Planatery Computer groups its Sentinel-2 data into Items which represent individual regions, and each Item has 13 Assets each representing a band - ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"JKhVvTYPrp"},{"type":"link","url":"https://stacindex.org/catalogs/microsoft-pc#/43bjKKcJQfxYaT1ir3Ep6uENfjEoQrjkzhd2?cp=1&t=5","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"https://‚Äãstacindex‚Äã.org‚Äã/catalogs‚Äã/microsoft‚Äã-pc‚Äã#‚Äã/43bjKKcJQfxYaT1ir3Ep6uENfjEoQrjkzhd2‚Äã?cp‚Äã=‚Äã1‚Äã&‚Äãt‚Äã=5","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"NlsArearPd"}],"urlSource":"https://stacindex.org/catalogs/microsoft-pc#/43bjKKcJQfxYaT1ir3Ep6uENfjEoQrjkzhd2?cp=1&t=5","key":"M7QxNkvBX8"},{"type":"text","value":" .","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"q7eVZnyLn7"}],"key":"lNaxueZNU6"}],"key":"G1YEw1Ue89"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"The California Forest Observatory (on Google Earth Engine) groups its data into Items, where each Item represents a specific year, data type and resolution for the whole study area. Each Item has only one Asset ( dataset ) associated with it - ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"A6H9HIwPzZ"},{"type":"link","url":"https://stacindex.org/catalogs/forest-observatory#/4dGsSbK8F5jjmhRZYE6kjUMmgWCUKe6J2qqw?t=2","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"https://‚Äãstacindex‚Äã.org‚Äã/catalogs‚Äã/forest‚Äã-observatory‚Äã#‚Äã/4dGsSbK8F5jjmhRZYE6kjUMmgWCUKe6J2qqw‚Äã?t‚Äã=2","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"ljmumdrjtA"}],"urlSource":"https://stacindex.org/catalogs/forest-observatory#/4dGsSbK8F5jjmhRZYE6kjUMmgWCUKe6J2qqw?t=2","key":"qhvTwOwDh5"},{"type":"text","value":".","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"pc20bebIBn"}],"key":"WYVbq8O0v0"}],"key":"zqjgWm9GKK"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"A More complex example from real-data from ESA-funded project: ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"kBGVTLrc8X"},{"type":"link","url":"https://eoresults.esa.int/browser/#/external/eoresults.esa.int/stac/?.language=en","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"ESA Projects Results Repository","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"CnQNmrvmb8"}],"urlSource":"https://eoresults.esa.int/browser/#/external/eoresults.esa.int/stac/?.language=en","key":"bz64zSAHwj"},{"type":"text","value":", gives the researchers flexibility in terms on how their datasets will be grouped into Items and Assets. You may need to consider that the more Items you have in your Collection, the slower the browsing would be if the user would like to browse through the publicly open STAC Browser. Please have a look at one example, that provides one Sentinel-3 AMPLI Ice Sheet Elevation Collection with around 400 Items complemented by around 360 Assets each.\n","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"ryTV6AQdCm"},{"type":"link","url":"https://eoresults.esa.int/browser/#/external/eoresults.esa.int/stac/collections/sentinel3-ampli-ice-sheet-elevation","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"https://‚Äãeoresults‚Äã.esa‚Äã.int‚Äã/browser‚Äã/‚Äã#‚Äã/external‚Äã/eoresults‚Äã.esa‚Äã.int‚Äã/stac‚Äã/collections‚Äã/sentinel3‚Äã-ampli‚Äã-ice‚Äã-sheet‚Äã-elevation","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"COvkRJySln"}],"urlSource":"https://eoresults.esa.int/browser/#/external/eoresults.esa.int/stac/collections/sentinel3-ampli-ice-sheet-elevation","key":"b53gD1yJqE"}],"key":"WUTeE017wf"}],"key":"w2hFS1ULLy"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"More general examples about creating STAC catalogs are available here - ","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"nZVMWACTh2"},{"type":"link","url":"https://github.com/stac-utils/pystac/tree/main/docs/tutorials","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"https://‚Äãgithub‚Äã.com‚Äã/stac‚Äã-utils‚Äã/pystac‚Äã/tree‚Äã/main‚Äã/docs‚Äã/tutorials","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"WaRaUEBqc2"}],"urlSource":"https://github.com/stac-utils/pystac/tree/main/docs/tutorials","error":true,"key":"vuNQOVxnIq"},{"type":"text","value":".","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"ZPEeWl9Yae"}],"key":"jLlwrEwqho"}],"key":"aTDtLRsEUy"}],"key":"ZMGMxWjjxL"},{"type":"paragraph","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"The easiest way to generate the required STAC Items is to copy over the metadata directly from your files.","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"tF9S74SIM5"}],"key":"Gb7iCZt7bV"}],"key":"ZiFu5HizbT"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example | Open Dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RbNerwrys7"}],"identifier":"example-open-dataset","label":"Example | Open Dataset","html_id":"example-open-dataset","implicit":true,"key":"Trcx23zjgL"}],"key":"Ycv93aBUWr"},{"type":"block","kind":"notebook-code","data":{"scrolled":true},"children":[{"type":"code","lang":"python","executable":true,"value":"# open dataset\n\n# define relative filepath within the folder structure you want to upload to the PRRs\nfilepath = 'https://data.aviso.altimetry.fr/aviso-gateway/data/indicators/OHC_EEI/4DAtlantic_OHC/OHC_4DATLANTIC_200204_202212_V2-0.nc'\n\nds = xr.open_dataset(filepath + '#mode=bytes')\nds","key":"x3Jyhwfm7E"},{"type":"output","id":"fHJ4YCE_0T17vQ927Mcxr","data":[{"output_type":"execute_result","execution_count":3,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"faebbe3ee275a39937c0e55bcbeeea4f","path":"/tutorials/build/faebbe3ee275a39937c0e55bcbeeea4f.html"},"text/plain":{"content":"<xarray.Dataset> Size: 124MB\nDimensions:                     (latitude: 180, longitude: 125, time: 249,\n                                 time_covar: 21, time_covar_2: 21)\nCoordinates:\n  * time                        (time) object 2kB 2002-04-15 18:07:12.000001 ...\n  * time_covar                  (time_covar) object 168B 2002-07-02 00:00:00 ...\n  * time_covar_2                (time_covar_2) object 168B 2002-07-02 00:00:0...\n  * latitude                    (latitude) float64 1kB -89.5 -88.5 ... 88.5 89.5\n  * longitude                   (longitude) float64 1kB -99.5 -98.5 ... 24.5\nData variables:\n    crs                         int64 8B ...\n    cell_surface                (latitude, longitude) float64 180kB ...\n    ohc                         (time, latitude, longitude) float64 45MB ...\n    ohc_mask                    (time) float64 2kB ...\n    ohc_var_covar_matrix_local  (time_covar, time_covar_2, latitude, longitude) float64 79MB ...\nAttributes:\n    source:       satellite observation\n    history:      Creation: 2025-02-05\n    references:   https://doi.org/10.24400/527896/A01-2022.012\n    url:          https://www.aviso.altimetry.fr/en/data/products/ocean-indic...\n    Conventions:  CF-1.8\n    summary:      The OHC product results from the space geodetic approach al...\n    start_date:   2002-04-15\n    end_date:     2022-12-16\n    version:      2.0\n    comment:      See technical documentation ATBD and EDD, and peer-review a...\n    contact:      robin.fraudeau(at)magellium.fr","content_type":"text/plain"}}}],"key":"ayM2jCmiSf"}],"key":"DlvoRQozW1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# helper function to convert numpy arrays to lists\nimport numpy as np\ndef convert_to_json_serialisable(attrs):\n    attrs = attrs.copy()\n    for attr in attrs.keys():\n        if isinstance(attrs[attr], np.ndarray):\n            attrs[attr] = attrs[attr].tolist()\n    return attrs","key":"QfFqoqLGA7"},{"type":"output","id":"IHqCQJM2crZul0__zXsRO","data":[],"key":"OKj4DOpEoB"}],"key":"OCYgPznGCo"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# sometimes attributes are not json serialisable, so we convert them to JSON serialisable formats\nfor var in ds.data_vars:\n    ds[var].attrs = convert_to_json_serialisable(ds[var].attrs)","key":"Fb0lptYGHQ"},{"type":"output","id":"4miUqKRWYhgTkdtxQ83OA","data":[],"key":"n9V0ngENcD"}],"key":"zx6762AjCV"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from xstac import xarray_to_stac","key":"xvZi62xHQ5"},{"type":"output","id":"WuLhllIRdBbqlJ-Kg7CFm","data":[],"key":"C55iUsnLyx"}],"key":"oqJwU0ICd6"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example | Create valid STAC Item from your product (nc)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FFhaDgCjRD"}],"identifier":"example-create-valid-stac-item-from-your-product-nc","label":"Example | Create valid STAC Item from your product (nc)","html_id":"example-create-valid-stac-item-from-your-product-nc","implicit":true,"key":"BSlgoueoTZ"}],"key":"NEjRWDMhDW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Describe the first file following the datacube stac extension standards.\n# All data is extracted from the metadata / data already present in the file we only specify\n# the template and what information is extracted\n\nbbox = [ds['longitude'].values.min(), ds['latitude'].values.min(), ds['longitude'].values.max(), ds['latitude'].values.max(), ]\ngeometry = json.loads(json.dumps(shapely.box(*bbox).__geo_interface__))\n\ntemplate = {\n\n    \"id\": f\"{collectionid}-{'OHC_4DATLANTIC'.lower()}\",\n    \"type\": \"Feature\",\n    \"stac_version\": \"1.1.0\",\n    \"description\": ds.attrs['summary'],\n    \"title\": 'OHC 4D Atlantic',\n    \"properties\": {\n            \"history\": ds.attrs['history'],\n            \"source\": ds.attrs['source'],\n            \"comment\": ds.attrs['comment'],\n            \"references\": ds.attrs['references'],\n            \"version\": ds.attrs['version'],\n            \"conventions\": ds.attrs['Conventions'],\n            \"contact\": ds.attrs['contact'],\n            \"start_datetime\": ds.attrs['start_date'] + 'T00:00:00Z',\n            \"end_datetime\": ds.attrs['end_date'] + 'T00:00:00Z',\n    },\n    \"geometry\": geometry,\n    \"bbox\": bbox,\n    \"assets\": {\n        \"data\": {\n            \"href\": f\"./{collectionid}/OHC_4DATLANTIC_200204_202212_V2-0.nc\",  # or local path\n            \"type\": \"application/x-netcdf\",\n            \"roles\": [\"data\"],\n            \"title\": 'OHC 4D Atlantic'\n        }\n    }\n}\n\n# 3. Generate the STAC Item\nitem = xarray_to_stac(\n    ds,\n    template,\n    temporal_dimension=\"time\" if 'time' in ds.coords else False,\n    x_dimension='longitude',\n    y_dimension='latitude',\n    reference_system=False\n)","key":"IjiZcDDUlJ"},{"type":"output","id":"23YuRZir0RO-KbVWdUpXV","data":[],"key":"PRoeEdnBWO"}],"key":"c3FFX5xyPD"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"item # Preview created Item","key":"BuoIdzbt6t"},{"type":"output","id":"kBG1pv4HYnarhZpqQ-9wx","data":[{"output_type":"execute_result","execution_count":10,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"908e553afa316e38b5dd1e80a08dc299","path":"/tutorials/build/908e553afa316e38b5dd1e80a08dc299.html"},"text/plain":{"content":"<Item id=4datlantic-ohc-ohc_4datlantic>","content_type":"text/plain"}}}],"key":"TIOLKTL0NP"}],"key":"eda4OxSvOv"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3. Add the STAC Item to the STAC Collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UMUlfsKCE8"}],"identifier":"id-3-add-the-stac-item-to-the-stac-collection","label":"3. Add the STAC Item to the STAC Collection","html_id":"id-3-add-the-stac-item-to-the-stac-collection","implicit":true,"key":"ISxkgy16Ti"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Adding the Items to the Collection is a single function call when using a library such as ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"igcyq00ziP"},{"type":"inlineCode","value":"pystac","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bUC975h0mt"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Qp8STCtFlB"}],"key":"g3QYg28Fe6"}],"key":"RkHQnCFt8w"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"collection.add_item(item)","key":"RA7vB6Bb4g"},{"type":"output","id":"UJKuhTqKkkWYiOwkD9bD0","data":[{"output_type":"execute_result","execution_count":11,"metadata":{},"data":{"text/html":{"content":"\n\n<style>\n.pystac-summary {\n    cursor: pointer;\n    display: list-item;\n    list-style: revert;\n    margin-bottom: 0 !important;\n\n    .pystac-l {\n        padding-left: 0.5em;\n        color: rgb(64, 128, 128);\n        font-style: italic;\n    }\n}\n.pystac-row {\n    overflow-wrap: break-word;\n    padding-left: .825em;\n\n    .pystac-k {\n        display: inline-block;\n        margin: 0px 0.5em 0px 0px;\n    }\n    .pystac-v {\n        color: rgb(186, 33, 33);\n    }\n}\n.pystac-k {\n    color: rgb(0, 128, 0);\n    font-weight: 700;\n}\n</style>\n<div class=\"jp-RenderedJSON jp-mod-trusted jp-OutputArea-output\">\n    <div class=\"container\" style=\"line-height: normal;\">\n        <ul style=\"padding: 0px; margin: 0px; list-style: none; display: block;\">\n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">None</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n                \n            \n        </ul>\n    </div>\n</div>","content_type":"text/html"},"text/plain":{"content":"<Link rel=item target=<Item id=4datlantic-ohc-ohc_4datlantic>>","content_type":"text/plain"}}}],"key":"DT9oa5osSg"}],"key":"rbbCmZtotl"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"4. Save the Collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uje1Owfg8D"}],"identifier":"id-4-save-the-collection","label":"4. Save the Collection","html_id":"id-4-save-the-collection","implicit":true,"key":"WageOv2kZJ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Again this step is a single function call.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xpQlaNCHFo"}],"key":"aiJp48I07L"}],"key":"TaYcwBGcIJ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"collection.normalize_and_save(\n    root_href='example_4datlantic/', # path to the self-contained folder with STAC Collection\n    catalog_type=pystac.CatalogType.SELF_CONTAINED\n)","key":"K1403gFjUA"},{"type":"output","id":"-MBw82p2frFEDIBhBoIlK","data":[],"key":"NfnkMwcWeE"}],"key":"hICnndy99x"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"collection","key":"TWvJH8ionx"},{"type":"output","id":"4u4ooKB6TEEb9Zx4a_m1A","data":[{"output_type":"execute_result","execution_count":13,"metadata":{},"data":{"text/html":{"content":"\n\n<style>\n.pystac-summary {\n    cursor: pointer;\n    display: list-item;\n    list-style: revert;\n    margin-bottom: 0 !important;\n\n    .pystac-l {\n        padding-left: 0.5em;\n        color: rgb(64, 128, 128);\n        font-style: italic;\n    }\n}\n.pystac-row {\n    overflow-wrap: break-word;\n    padding-left: .825em;\n\n    .pystac-k {\n        display: inline-block;\n        margin: 0px 0.5em 0px 0px;\n    }\n    .pystac-v {\n        color: rgb(186, 33, 33);\n    }\n}\n.pystac-k {\n    color: rgb(0, 128, 0);\n    font-weight: 700;\n}\n</style>\n<div class=\"jp-RenderedJSON jp-mod-trusted jp-OutputArea-output\">\n    <div class=\"container\" style=\"line-height: normal;\">\n        <ul style=\"padding: 0px; margin: 0px; list-style: none; display: block;\">\n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"Collection\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">id</span>\n            <span class=\"pystac-v\">\"4datlantic-ohc\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">stac_version</span>\n            <span class=\"pystac-v\">\"1.1.0\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">description</span>\n            <span class=\"pystac-v\">\"Given the major role of the Atlantic Ocean in the climate system, it is essential to characterize the temporal and spatial variations of its heat content. The OHC product results from the space geodetic approach also called altimetry-gravimetry approach. This dataset contains variables as 3D grids of ocean heat content anomalies at 1x1 resolution and monthly time step. Error variance-covariance matrices of OHC at regional scale and annual resolution are also provided. See Experimental Dataset Description for details: https://www.aviso.altimetry.fr/fileadmin/documents/data/tools/OHC-EEI/OHCATL-DT-035-MAG_EDD_V2.0.pdf.Version. V2-0 of Dataset published 2022 in Centre National d‚ÄôEtudes Spatiales. This dataset has been produced within the framework of the 4DAtlantic-Ocean heat content Project funded by ESA.\"</span>\n        </li>\n    \n                \n            \n                \n                    <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">links</span><span class=\"pystac-l\">[] 3 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"root\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/examples/PRR/example_4datlantic/collection.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Atlantic Ocean heat content change\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">1</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"item\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/examples/PRR/example_4datlantic/4datlantic-ohc-ohc_4datlantic/4datlantic-ohc-ohc_4datlantic.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/geo+json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">2</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"self\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"/home/krasen/examples/PRR/example_4datlantic/collection.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Atlantic Ocean heat content change\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">extent</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">spatial</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">bbox</span><span class=\"pystac-l\">[] 1 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span><span class=\"pystac-l\">[] 4 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">0</span>\n            <span class=\"pystac-v\">-100</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">1</span>\n            <span class=\"pystac-v\">-90</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">2</span>\n            <span class=\"pystac-v\">25</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">3</span>\n            <span class=\"pystac-v\">90</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">temporal</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">interval</span><span class=\"pystac-l\">[] 1 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span><span class=\"pystac-l\">[] 2 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">0</span>\n            <span class=\"pystac-v\">\"2002-04-15T18:07:12Z\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">1</span>\n            <span class=\"pystac-v\">\"2023-09-01T18:59:59Z\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        \n    </details></li>\n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">license</span>\n            <span class=\"pystac-v\">\"Aviso License\"</span>\n        </li>\n    \n                \n            \n        </ul>\n    </div>\n</div>","content_type":"text/html"},"text/plain":{"content":"<Collection id=4datlantic-ohc>","content_type":"text/plain"}}}],"key":"sktS3fSLIV"}],"key":"ZLHvkQ8fwG"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Congratulations, you have created your first STAC Collection. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wO86vkJtEd"},{"type":"break","key":"c1bNJIPer4"}],"identifier":"congratulations-you-have-created-your-first-stac-collection","label":"Congratulations, you have created your first STAC Collection. ","html_id":"congratulations-you-have-created-your-first-stac-collection","implicit":true,"key":"HQQQAwaUJG"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Now, you have your results ready to be ingested into ESA PRR. To request data storage in ESA PRR, contact EarthCODE team at: ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"A3uzmzGX7E"},{"type":"link","url":"mailto:earth-code@esa.int","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"earth-code@esa.int","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"pDNnwhd7vt"}],"urlSource":"mailto:earth-code@esa.int","key":"OYMrS1rFyB"},{"type":"text","value":" and provide following information:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"lxg96ojfiP"}],"key":"sFt5UhAkR4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"your project name","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"vWZ3YAao7Y"}],"key":"bxjpjuZncu"}],"key":"IWlaLYClmq"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"total size of your dataset","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"dF239tgDHw"}],"key":"utACFSGrxt"}],"key":"E6tK968lIv"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"link to STAC Collection created together with associated Items (e.g. entire example_4datlantic folder) - can be provided as a .zip or link to online repository / GitHub public repository","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"xZ3GycpgZC"}],"key":"yGcMUpLbZI"}],"key":"di17GoqV7K"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"link to the datasets (access link to final outcomes of the project or assets)","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"o4VUf1RPyt"}],"key":"u4FL5FoUU2"}],"key":"NOjrthepPD"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"specify any restrictions related to the access of your dataset.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"z12928I1lK"}],"key":"zHeskySoZD"}],"key":"pd8dlx3TeO"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"in the email, do not forget to CC your ESA TO to acknowledge that the dataset will be imported into PRR.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"NDZUTKY6bi"}],"key":"N7NXfXzPAn"}],"key":"e3hPIoyBPH"}],"key":"I30IM1rf3P"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Once the email is received, the EarthCODE team will make a request to publish your product into PRR on your behalf (in the future the self-ingestion system will be supported).","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"vIn4Q2hG9e"}],"key":"QzyYG2UCwy"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Once the collection is imported you will receive a dedicated URL to your products, which you can use to create the record on Open Science Data Catalogue to make your data discoverable or/and request a DOI for your dataset (at the moment this has to be done by external service of your choice).","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"La2LLAj17B"}],"key":"FpA2yQN50z"}],"key":"DRCasbMqrZ"}],"key":"nw6cQzv5To"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"ESA Project Results Repository","url":"/index-1","group":"EarthCODE Tutorials"},"next":{"title":"Generating STAC metadata for the YIPEEO project","url":"/prr-zarr","group":"EarthCODE Tutorials"}}},"domain":"http://localhost:3000"}