{"version":2,"kind":"Notebook","sha256":"0413ddb5507a1b4774fbd0f500da9efc052f7838e7be7f87d8f4ee00b4c028ea","slug":"stac-and-data-access","location":"/pangeo/earthcode101/stac_and_data_access.ipynb","dependencies":[],"frontmatter":{"title":"Accessing EarthCODE Data","content_includes_title":true,"kernelspec":{"name":"conda-env-earthcode-bids-earthcode-bids-edc_pangeo-py","display_name":"earthcode-bids-earthcode-bids-edc_pangeo","language":"python"},"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/ESA-EarthCODE/tutorials","subject":"EarthCODE Tutorials","numbering":{"title":{"offset":2}},"source_url":"https://github.com/ESA-EarthCODE/tutorials/blob/main/pangeo/earthcode101/stac_and_data_access.ipynb","edit_url":"https://github.com/ESA-EarthCODE/tutorials/edit/main/pangeo/earthcode101/stac_and_data_access.ipynb","thumbnail":"/tutorials/build/stacsetup-81bc007932ce9138d08e6f34e5151bc3.png","exports":[{"format":"ipynb","filename":"stac_and_data_access.ipynb","url":"/tutorials/build/stac_and_data_access-0434d939e6acd03c0222a8503612f035.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Accessing EarthCODE Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oVly9UQn45"}],"identifier":"accessing-earthcode-data","label":"Accessing EarthCODE Data","html_id":"accessing-earthcode-data","implicit":true,"key":"sFhO9HI9qj"}],"key":"DSPWZ2L14O"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Packages","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ro9pKgHXij"}],"identifier":"packages","label":"Packages","html_id":"packages","implicit":true,"key":"siBeVO4lRj"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"As best practices dictate, we recommend that you install and import all the necessary libraries at the top of your Jupyter notebook.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"azR5AR3I4A"}],"key":"cyAxzuKTlr"}],"key":"mxHv7tvGxS"},{"type":"block","kind":"notebook-code","data":{"vscode":{"languageId":"plaintext"}},"children":[{"type":"code","lang":"python","executable":true,"value":"from pystac.extensions.storage import StorageExtension\nfrom datetime import datetime\n\nfrom pystac_client import Client as pystac_client\nfrom odc.stac import configure_rio, stac_load\n\nimport pystac\nimport xarray\n\nfrom datetime import timedelta\nimport pandas as pd\nimport shapely\n\n\nimport hvplot.xarray\n","key":"hOOgqIqFHE"},{"type":"output","id":"25aECEYG5aLYKXpAFyhy8","data":[{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<script type=\"esms-options\">{\"shimMode\": true}</script><style>*[data-root-id],\n*[data-root-id] > * {\n  box-sizing: border-box;\n  font-family: var(--jp-ui-font-family);\n  font-size: var(--jp-ui-font-size1);\n  color: var(--vscode-editor-foreground, var(--jp-ui-font-color1));\n}\n\n/* Override VSCode background color */\n.cell-output-ipywidget-background:has(\n    > .cell-output-ipywidget-background > .lm-Widget > *[data-root-id]\n  ),\n.cell-output-ipywidget-background:has(> .lm-Widget > *[data-root-id]) {\n  background-color: transparent !important;\n}\n</style>","content_type":"text/html"}}},{"output_type":"display_data","metadata":{},"data":{"application/javascript":{"content":"(function(root) {\n  function now() {\n    return new Date();\n  }\n\n  const force = true;\n  const py_version = '3.7.3'.replace('rc', '-rc.').replace('.dev', '-dev.');\n  const reloading = false;\n  const Bokeh = root.Bokeh;\n\n  // Set a timeout for this load but only if we are not already initializing\n  if (typeof (root._bokeh_timeout) === \"undefined\" || (force || !root._bokeh_is_initializing)) {\n    root._bokeh_timeout = Date.now() + 5000;\n    root._bokeh_failed_load = false;\n  }\n\n  function run_callbacks() {\n    try {\n      root._bokeh_onload_callbacks.forEach(function(callback) {\n        if (callback != null)\n          callback();\n      });\n    } finally {\n      delete root._bokeh_onload_callbacks;\n    }\n    console.debug(\"Bokeh: all callbacks have finished\");\n  }\n\n  function load_libs(css_urls, js_urls, js_modules, js_exports, callback) {\n    if (css_urls == null) css_urls = [];\n    if (js_urls == null) js_urls = [];\n    if (js_modules == null) js_modules = [];\n    if (js_exports == null) js_exports = {};\n\n    root._bokeh_onload_callbacks.push(callback);\n\n    if (root._bokeh_is_loading > 0) {\n      // Don't load bokeh if it is still initializing\n      console.debug(\"Bokeh: BokehJS is being loaded, scheduling callback at\", now());\n      return null;\n    } else if (js_urls.length === 0 && js_modules.length === 0 && Object.keys(js_exports).length === 0) {\n      // There is nothing to load\n      run_callbacks();\n      return null;\n    }\n\n    function on_load() {\n      root._bokeh_is_loading--;\n      if (root._bokeh_is_loading === 0) {\n        console.debug(\"Bokeh: all BokehJS libraries/stylesheets loaded\");\n        run_callbacks()\n      }\n    }\n    window._bokeh_on_load = on_load\n\n    function on_error(e) {\n      const src_el = e.srcElement\n      console.error(\"failed to load \" + (src_el.href || src_el.src));\n    }\n\n    const skip = [];\n    if (window.requirejs) {\n      window.requirejs.config({'packages': {}, 'paths': {}, 'shim': {}});\n      root._bokeh_is_loading = css_urls.length + 0;\n    } else {\n      root._bokeh_is_loading = css_urls.length + js_urls.length + js_modules.length + Object.keys(js_exports).length;\n    }\n\n    const existing_stylesheets = []\n    const links = document.getElementsByTagName('link')\n    for (let i = 0; i < links.length; i++) {\n      const link = links[i]\n      if (link.href != null) {\n        existing_stylesheets.push(link.href)\n      }\n    }\n    for (let i = 0; i < css_urls.length; i++) {\n      const url = css_urls[i];\n      const escaped = encodeURI(url)\n      if (existing_stylesheets.indexOf(escaped) !== -1) {\n        on_load()\n        continue;\n      }\n      const element = document.createElement(\"link\");\n      element.onload = on_load;\n      element.onerror = on_error;\n      element.rel = \"stylesheet\";\n      element.type = \"text/css\";\n      element.href = url;\n      console.debug(\"Bokeh: injecting link tag for BokehJS stylesheet: \", url);\n      document.body.appendChild(element);\n    }    var existing_scripts = []\n    const scripts = document.getElementsByTagName('script')\n    for (let i = 0; i < scripts.length; i++) {\n      var script = scripts[i]\n      if (script.src != null) {\n        existing_scripts.push(script.src)\n      }\n    }\n    for (let i = 0; i < js_urls.length; i++) {\n      const url = js_urls[i];\n      const escaped = encodeURI(url)\n      if (skip.indexOf(escaped) !== -1 || existing_scripts.indexOf(escaped) !== -1) {\n        if (!window.requirejs) {\n          on_load();\n        }\n        continue;\n      }\n      const element = document.createElement('script');\n      element.onload = on_load;\n      element.onerror = on_error;\n      element.async = false;\n      element.src = url;\n      console.debug(\"Bokeh: injecting script tag for BokehJS library: \", url);\n      document.head.appendChild(element);\n    }\n    for (let i = 0; i < js_modules.length; i++) {\n      const url = js_modules[i];\n      const escaped = encodeURI(url)\n      if (skip.indexOf(escaped) !== -1 || existing_scripts.indexOf(escaped) !== -1) {\n        if (!window.requirejs) {\n          on_load();\n        }\n        continue;\n      }\n      var element = document.createElement('script');\n      element.onload = on_load;\n      element.onerror = on_error;\n      element.async = false;\n      element.src = url;\n      element.type = \"module\";\n      console.debug(\"Bokeh: injecting script tag for BokehJS library: \", url);\n      document.head.appendChild(element);\n    }\n    for (const name in js_exports) {\n      const url = js_exports[name];\n      const escaped = encodeURI(url)\n      if (skip.indexOf(escaped) >= 0 || root[name] != null) {\n        if (!window.requirejs) {\n          on_load();\n        }\n        continue;\n      }\n      var element = document.createElement('script');\n      element.onerror = on_error;\n      element.async = false;\n      element.type = \"module\";\n      console.debug(\"Bokeh: injecting script tag for BokehJS library: \", url);\n      element.textContent = `\n      import ${name} from \"${url}\"\n      window.${name} = ${name}\n      window._bokeh_on_load()\n      `\n      document.head.appendChild(element);\n    }\n    if (!js_urls.length && !js_modules.length) {\n      on_load()\n    }\n  };\n\n  function inject_raw_css(css) {\n    const element = document.createElement(\"style\");\n    element.appendChild(document.createTextNode(css));\n    document.body.appendChild(element);\n  }\n\n  const js_urls = [\"https://cdn.holoviz.org/panel/1.7.0/dist/bundled/reactiveesm/es-module-shims@^1.10.0/dist/es-module-shims.min.js\", \"https://cdn.bokeh.org/bokeh/release/bokeh-3.7.3.min.js\", \"https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.7.3.min.js\", \"https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.7.3.min.js\", \"https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.7.3.min.js\", \"https://cdn.holoviz.org/panel/1.7.0/dist/panel.min.js\"];\n  const js_modules = [];\n  const js_exports = {};\n  const css_urls = [];\n  const inline_js = [    function(Bokeh) {\n      Bokeh.set_log_level(\"info\");\n    },\nfunction(Bokeh) {} // ensure no trailing comma for IE\n  ];\n\n  function run_inline_js() {\n    if ((root.Bokeh !== undefined) || (force === true)) {\n      for (let i = 0; i < inline_js.length; i++) {\n        try {\n          inline_js[i].call(root, root.Bokeh);\n        } catch(e) {\n          if (!reloading) {\n            throw e;\n          }\n        }\n      }\n      // Cache old bokeh versions\n      if (Bokeh != undefined && !reloading) {\n        var NewBokeh = root.Bokeh;\n        if (Bokeh.versions === undefined) {\n          Bokeh.versions = new Map();\n        }\n        if (NewBokeh.version !== Bokeh.version) {\n          Bokeh.versions.set(NewBokeh.version, NewBokeh)\n        }\n        root.Bokeh = Bokeh;\n      }\n    } else if (Date.now() < root._bokeh_timeout) {\n      setTimeout(run_inline_js, 100);\n    } else if (!root._bokeh_failed_load) {\n      console.log(\"Bokeh: BokehJS failed to load within specified timeout.\");\n      root._bokeh_failed_load = true;\n    }\n    root._bokeh_is_initializing = false\n  }\n\n  function load_or_wait() {\n    // Implement a backoff loop that tries to ensure we do not load multiple\n    // versions of Bokeh and its dependencies at the same time.\n    // In recent versions we use the root._bokeh_is_initializing flag\n    // to determine whether there is an ongoing attempt to initialize\n    // bokeh, however for backward compatibility we also try to ensure\n    // that we do not start loading a newer (Panel>=1.0 and Bokeh>3) version\n    // before older versions are fully initialized.\n    if (root._bokeh_is_initializing && Date.now() > root._bokeh_timeout) {\n      // If the timeout and bokeh was not successfully loaded we reset\n      // everything and try loading again\n      root._bokeh_timeout = Date.now() + 5000;\n      root._bokeh_is_initializing = false;\n      root._bokeh_onload_callbacks = undefined;\n      root._bokeh_is_loading = 0\n      console.log(\"Bokeh: BokehJS was loaded multiple times but one version failed to initialize.\");\n      load_or_wait();\n    } else if (root._bokeh_is_initializing || (typeof root._bokeh_is_initializing === \"undefined\" && root._bokeh_onload_callbacks !== undefined)) {\n      setTimeout(load_or_wait, 100);\n    } else {\n      root._bokeh_is_initializing = true\n      root._bokeh_onload_callbacks = []\n      const bokeh_loaded = root.Bokeh != null && (root.Bokeh.version === py_version || (root.Bokeh.versions !== undefined && root.Bokeh.versions.has(py_version)));\n      if (!reloading && !bokeh_loaded) {\n        if (root.Bokeh) {\n          root.Bokeh = undefined;\n        }\n        console.debug(\"Bokeh: BokehJS not loaded, scheduling load and callback at\", now());\n      }\n      load_libs(css_urls, js_urls, js_modules, js_exports, function() {\n        console.debug(\"Bokeh: BokehJS plotting callback run at\", now());\n        run_inline_js();\n      });\n    }\n  }\n  // Give older versions of the autoload script a head-start to ensure\n  // they initialize before we start loading newer version.\n  setTimeout(load_or_wait, 100)\n}(window));","content_type":"application/javascript"},"application/vnd.holoviews_load.v0+json":{"content":"","content_type":"application/vnd.holoviews_load.v0+json"}}},{"output_type":"display_data","metadata":{},"data":{"application/javascript":{"content":"\nif ((window.PyViz === undefined) || (window.PyViz instanceof HTMLElement)) {\n  window.PyViz = {comms: {}, comm_status:{}, kernels:{}, receivers: {}, plot_index: []}\n}\n\n\n    function JupyterCommManager() {\n    }\n\n    JupyterCommManager.prototype.register_target = function(plot_id, comm_id, msg_handler) {\n      if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {\n        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;\n        comm_manager.register_target(comm_id, function(comm) {\n          comm.on_msg(msg_handler);\n        });\n      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {\n        window.PyViz.kernels[plot_id].registerCommTarget(comm_id, function(comm) {\n          comm.onMsg = msg_handler;\n        });\n      } else if (typeof google != 'undefined' && google.colab.kernel != null) {\n        google.colab.kernel.comms.registerTarget(comm_id, (comm) => {\n          var messages = comm.messages[Symbol.asyncIterator]();\n          function processIteratorResult(result) {\n            var message = result.value;\n            console.log(message)\n            var content = {data: message.data, comm_id};\n            var buffers = []\n            for (var buffer of message.buffers || []) {\n              buffers.push(new DataView(buffer))\n            }\n            var metadata = message.metadata || {};\n            var msg = {content, buffers, metadata}\n            msg_handler(msg);\n            return messages.next().then(processIteratorResult);\n          }\n          return messages.next().then(processIteratorResult);\n        })\n      }\n    }\n\n    JupyterCommManager.prototype.get_client_comm = function(plot_id, comm_id, msg_handler) {\n      if (comm_id in window.PyViz.comms) {\n        return window.PyViz.comms[comm_id];\n      } else if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {\n        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;\n        var comm = comm_manager.new_comm(comm_id, {}, {}, {}, comm_id);\n        if (msg_handler) {\n          comm.on_msg(msg_handler);\n        }\n      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {\n        var comm = window.PyViz.kernels[plot_id].connectToComm(comm_id);\n        comm.open();\n        if (msg_handler) {\n          comm.onMsg = msg_handler;\n        }\n      } else if (typeof google != 'undefined' && google.colab.kernel != null) {\n        var comm_promise = google.colab.kernel.comms.open(comm_id)\n        comm_promise.then((comm) => {\n          window.PyViz.comms[comm_id] = comm;\n          if (msg_handler) {\n            var messages = comm.messages[Symbol.asyncIterator]();\n            function processIteratorResult(result) {\n              var message = result.value;\n              var content = {data: message.data};\n              var metadata = message.metadata || {comm_id};\n              var msg = {content, metadata}\n              msg_handler(msg);\n              return messages.next().then(processIteratorResult);\n            }\n            return messages.next().then(processIteratorResult);\n          }\n        })\n        var sendClosure = (data, metadata, buffers, disposeOnDone) => {\n          return comm_promise.then((comm) => {\n            comm.send(data, metadata, buffers, disposeOnDone);\n          });\n        };\n        var comm = {\n          send: sendClosure\n        };\n      }\n      window.PyViz.comms[comm_id] = comm;\n      return comm;\n    }\n    window.PyViz.comm_manager = new JupyterCommManager();\n    \n\n\nvar JS_MIME_TYPE = 'application/javascript';\nvar HTML_MIME_TYPE = 'text/html';\nvar EXEC_MIME_TYPE = 'application/vnd.holoviews_exec.v0+json';\nvar CLASS_NAME = 'output';\n\n/**\n * Render data to the DOM node\n */\nfunction render(props, node) {\n  var div = document.createElement(\"div\");\n  var script = document.createElement(\"script\");\n  node.appendChild(div);\n  node.appendChild(script);\n}\n\n/**\n * Handle when a new output is added\n */\nfunction handle_add_output(event, handle) {\n  var output_area = handle.output_area;\n  var output = handle.output;\n  if ((output.data == undefined) || (!output.data.hasOwnProperty(EXEC_MIME_TYPE))) {\n    return\n  }\n  var id = output.metadata[EXEC_MIME_TYPE][\"id\"];\n  var toinsert = output_area.element.find(\".\" + CLASS_NAME.split(' ')[0]);\n  if (id !== undefined) {\n    var nchildren = toinsert.length;\n    var html_node = toinsert[nchildren-1].children[0];\n    html_node.innerHTML = output.data[HTML_MIME_TYPE];\n    var scripts = [];\n    var nodelist = html_node.querySelectorAll(\"script\");\n    for (var i in nodelist) {\n      if (nodelist.hasOwnProperty(i)) {\n        scripts.push(nodelist[i])\n      }\n    }\n\n    scripts.forEach( function (oldScript) {\n      var newScript = document.createElement(\"script\");\n      var attrs = [];\n      var nodemap = oldScript.attributes;\n      for (var j in nodemap) {\n        if (nodemap.hasOwnProperty(j)) {\n          attrs.push(nodemap[j])\n        }\n      }\n      attrs.forEach(function(attr) { newScript.setAttribute(attr.name, attr.value) });\n      newScript.appendChild(document.createTextNode(oldScript.innerHTML));\n      oldScript.parentNode.replaceChild(newScript, oldScript);\n    });\n    if (JS_MIME_TYPE in output.data) {\n      toinsert[nchildren-1].children[1].textContent = output.data[JS_MIME_TYPE];\n    }\n    output_area._hv_plot_id = id;\n    if ((window.Bokeh !== undefined) && (id in Bokeh.index)) {\n      window.PyViz.plot_index[id] = Bokeh.index[id];\n    } else {\n      window.PyViz.plot_index[id] = null;\n    }\n  } else if (output.metadata[EXEC_MIME_TYPE][\"server_id\"] !== undefined) {\n    var bk_div = document.createElement(\"div\");\n    bk_div.innerHTML = output.data[HTML_MIME_TYPE];\n    var script_attrs = bk_div.children[0].attributes;\n    for (var i = 0; i < script_attrs.length; i++) {\n      toinsert[toinsert.length - 1].childNodes[1].setAttribute(script_attrs[i].name, script_attrs[i].value);\n    }\n    // store reference to server id on output_area\n    output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE][\"server_id\"];\n  }\n}\n\n/**\n * Handle when an output is cleared or removed\n */\nfunction handle_clear_output(event, handle) {\n  var id = handle.cell.output_area._hv_plot_id;\n  var server_id = handle.cell.output_area._bokeh_server_id;\n  if (((id === undefined) || !(id in PyViz.plot_index)) && (server_id !== undefined)) { return; }\n  var comm = window.PyViz.comm_manager.get_client_comm(\"hv-extension-comm\", \"hv-extension-comm\", function () {});\n  if (server_id !== null) {\n    comm.send({event_type: 'server_delete', 'id': server_id});\n    return;\n  } else if (comm !== null) {\n    comm.send({event_type: 'delete', 'id': id});\n  }\n  delete PyViz.plot_index[id];\n  if ((window.Bokeh !== undefined) & (id in window.Bokeh.index)) {\n    var doc = window.Bokeh.index[id].model.document\n    doc.clear();\n    const i = window.Bokeh.documents.indexOf(doc);\n    if (i > -1) {\n      window.Bokeh.documents.splice(i, 1);\n    }\n  }\n}\n\n/**\n * Handle kernel restart event\n */\nfunction handle_kernel_cleanup(event, handle) {\n  delete PyViz.comms[\"hv-extension-comm\"];\n  window.PyViz.plot_index = {}\n}\n\n/**\n * Handle update_display_data messages\n */\nfunction handle_update_output(event, handle) {\n  handle_clear_output(event, {cell: {output_area: handle.output_area}})\n  handle_add_output(event, handle)\n}\n\nfunction register_renderer(events, OutputArea) {\n  function append_mime(data, metadata, element) {\n    // create a DOM node to render to\n    var toinsert = this.create_output_subarea(\n    metadata,\n    CLASS_NAME,\n    EXEC_MIME_TYPE\n    );\n    this.keyboard_manager.register_events(toinsert);\n    // Render to node\n    var props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};\n    render(props, toinsert[0]);\n    element.append(toinsert);\n    return toinsert\n  }\n\n  events.on('output_added.OutputArea', handle_add_output);\n  events.on('output_updated.OutputArea', handle_update_output);\n  events.on('clear_output.CodeCell', handle_clear_output);\n  events.on('delete.Cell', handle_clear_output);\n  events.on('kernel_ready.Kernel', handle_kernel_cleanup);\n\n  OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {\n    safe: true,\n    index: 0\n  });\n}\n\nif (window.Jupyter !== undefined) {\n  try {\n    var events = require('base/js/events');\n    var OutputArea = require('notebook/js/outputarea').OutputArea;\n    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {\n      register_renderer(events, OutputArea);\n    }\n  } catch(err) {\n  }\n}\n","content_type":"application/javascript"},"application/vnd.holoviews_load.v0+json":{"content":"","content_type":"application/vnd.holoviews_load.v0+json"}}},{"output_type":"display_data","metadata":{"application/vnd.holoviews_exec.v0+json":{"id":"f124af22-6065-4ead-9394-5a9edadbe36d"}},"data":{"application/vnd.holoviews_exec.v0+json":{"content":"","content_type":"application/vnd.holoviews_exec.v0+json"},"text/html":{"content":"<div id='f124af22-6065-4ead-9394-5a9edadbe36d'>\n  <div id=\"bc9072fa-d4cd-4e3f-8708-8be7907c7403\" data-root-id=\"f124af22-6065-4ead-9394-5a9edadbe36d\" style=\"display: contents;\"></div>\n</div>\n<script type=\"application/javascript\">(function(root) {\n  var docs_json = {\"8b1fe0c4-7bf8-4866-bfd7-00f09213fefe\":{\"version\":\"3.7.3\",\"title\":\"Bokeh Application\",\"roots\":[{\"type\":\"object\",\"name\":\"panel.models.browser.BrowserInfo\",\"id\":\"f124af22-6065-4ead-9394-5a9edadbe36d\"},{\"type\":\"object\",\"name\":\"panel.models.comm_manager.CommManager\",\"id\":\"57545e0b-a56b-4135-8a60-6eca21a8c637\",\"attributes\":{\"plot_id\":\"f124af22-6065-4ead-9394-5a9edadbe36d\",\"comm_id\":\"5a2a84a922a64f0599b0dba7673e189a\",\"client_comm_id\":\"8d5c88539ef94108afdbf4dec9f59161\"}}],\"defs\":[{\"type\":\"model\",\"name\":\"ReactiveHTML1\"},{\"type\":\"model\",\"name\":\"FlexBox1\",\"properties\":[{\"name\":\"align_content\",\"kind\":\"Any\",\"default\":\"flex-start\"},{\"name\":\"align_items\",\"kind\":\"Any\",\"default\":\"flex-start\"},{\"name\":\"flex_direction\",\"kind\":\"Any\",\"default\":\"row\"},{\"name\":\"flex_wrap\",\"kind\":\"Any\",\"default\":\"wrap\"},{\"name\":\"gap\",\"kind\":\"Any\",\"default\":\"\"},{\"name\":\"justify_content\",\"kind\":\"Any\",\"default\":\"flex-start\"}]},{\"type\":\"model\",\"name\":\"FloatPanel1\",\"properties\":[{\"name\":\"config\",\"kind\":\"Any\",\"default\":{\"type\":\"map\"}},{\"name\":\"contained\",\"kind\":\"Any\",\"default\":true},{\"name\":\"position\",\"kind\":\"Any\",\"default\":\"right-top\"},{\"name\":\"offsetx\",\"kind\":\"Any\",\"default\":null},{\"name\":\"offsety\",\"kind\":\"Any\",\"default\":null},{\"name\":\"theme\",\"kind\":\"Any\",\"default\":\"primary\"},{\"name\":\"status\",\"kind\":\"Any\",\"default\":\"normalized\"}]},{\"type\":\"model\",\"name\":\"GridStack1\",\"properties\":[{\"name\":\"ncols\",\"kind\":\"Any\",\"default\":null},{\"name\":\"nrows\",\"kind\":\"Any\",\"default\":null},{\"name\":\"allow_resize\",\"kind\":\"Any\",\"default\":true},{\"name\":\"allow_drag\",\"kind\":\"Any\",\"default\":true},{\"name\":\"state\",\"kind\":\"Any\",\"default\":[]}]},{\"type\":\"model\",\"name\":\"drag1\",\"properties\":[{\"name\":\"slider_width\",\"kind\":\"Any\",\"default\":5},{\"name\":\"slider_color\",\"kind\":\"Any\",\"default\":\"black\"},{\"name\":\"value\",\"kind\":\"Any\",\"default\":50}]},{\"type\":\"model\",\"name\":\"click1\",\"properties\":[{\"name\":\"terminal_output\",\"kind\":\"Any\",\"default\":\"\"},{\"name\":\"debug_name\",\"kind\":\"Any\",\"default\":\"\"},{\"name\":\"clears\",\"kind\":\"Any\",\"default\":0}]},{\"type\":\"model\",\"name\":\"FastWrapper1\",\"properties\":[{\"name\":\"object\",\"kind\":\"Any\",\"default\":null},{\"name\":\"style\",\"kind\":\"Any\",\"default\":null}]},{\"type\":\"model\",\"name\":\"NotificationArea1\",\"properties\":[{\"name\":\"js_events\",\"kind\":\"Any\",\"default\":{\"type\":\"map\"}},{\"name\":\"max_notifications\",\"kind\":\"Any\",\"default\":5},{\"name\":\"notifications\",\"kind\":\"Any\",\"default\":[]},{\"name\":\"position\",\"kind\":\"Any\",\"default\":\"bottom-right\"},{\"name\":\"_clear\",\"kind\":\"Any\",\"default\":0},{\"name\":\"types\",\"kind\":\"Any\",\"default\":[{\"type\":\"map\",\"entries\":[[\"type\",\"warning\"],[\"background\",\"#ffc107\"],[\"icon\",{\"type\":\"map\",\"entries\":[[\"className\",\"fas fa-exclamation-triangle\"],[\"tagName\",\"i\"],[\"color\",\"white\"]]}]]},{\"type\":\"map\",\"entries\":[[\"type\",\"info\"],[\"background\",\"#007bff\"],[\"icon\",{\"type\":\"map\",\"entries\":[[\"className\",\"fas fa-info-circle\"],[\"tagName\",\"i\"],[\"color\",\"white\"]]}]]}]}]},{\"type\":\"model\",\"name\":\"Notification\",\"properties\":[{\"name\":\"background\",\"kind\":\"Any\",\"default\":null},{\"name\":\"duration\",\"kind\":\"Any\",\"default\":3000},{\"name\":\"icon\",\"kind\":\"Any\",\"default\":null},{\"name\":\"message\",\"kind\":\"Any\",\"default\":\"\"},{\"name\":\"notification_type\",\"kind\":\"Any\",\"default\":null},{\"name\":\"_rendered\",\"kind\":\"Any\",\"default\":false},{\"name\":\"_destroyed\",\"kind\":\"Any\",\"default\":false}]},{\"type\":\"model\",\"name\":\"TemplateActions1\",\"properties\":[{\"name\":\"open_modal\",\"kind\":\"Any\",\"default\":0},{\"name\":\"close_modal\",\"kind\":\"Any\",\"default\":0}]},{\"type\":\"model\",\"name\":\"BootstrapTemplateActions1\",\"properties\":[{\"name\":\"open_modal\",\"kind\":\"Any\",\"default\":0},{\"name\":\"close_modal\",\"kind\":\"Any\",\"default\":0}]},{\"type\":\"model\",\"name\":\"TemplateEditor1\",\"properties\":[{\"name\":\"layout\",\"kind\":\"Any\",\"default\":[]}]},{\"type\":\"model\",\"name\":\"MaterialTemplateActions1\",\"properties\":[{\"name\":\"open_modal\",\"kind\":\"Any\",\"default\":0},{\"name\":\"close_modal\",\"kind\":\"Any\",\"default\":0}]},{\"type\":\"model\",\"name\":\"ReactiveESM1\",\"properties\":[{\"name\":\"esm_constants\",\"kind\":\"Any\",\"default\":{\"type\":\"map\"}}]},{\"type\":\"model\",\"name\":\"JSComponent1\",\"properties\":[{\"name\":\"esm_constants\",\"kind\":\"Any\",\"default\":{\"type\":\"map\"}}]},{\"type\":\"model\",\"name\":\"ReactComponent1\",\"properties\":[{\"name\":\"esm_constants\",\"kind\":\"Any\",\"default\":{\"type\":\"map\"}}]},{\"type\":\"model\",\"name\":\"AnyWidgetComponent1\",\"properties\":[{\"name\":\"esm_constants\",\"kind\":\"Any\",\"default\":{\"type\":\"map\"}}]},{\"type\":\"model\",\"name\":\"request_value1\",\"properties\":[{\"name\":\"fill\",\"kind\":\"Any\",\"default\":\"none\"},{\"name\":\"_synced\",\"kind\":\"Any\",\"default\":null},{\"name\":\"_request_sync\",\"kind\":\"Any\",\"default\":0}]}]}};\n  var render_items = [{\"docid\":\"8b1fe0c4-7bf8-4866-bfd7-00f09213fefe\",\"roots\":{\"f124af22-6065-4ead-9394-5a9edadbe36d\":\"bc9072fa-d4cd-4e3f-8708-8be7907c7403\"},\"root_ids\":[\"f124af22-6065-4ead-9394-5a9edadbe36d\"]}];\n  var docs = Object.values(docs_json)\n  if (!docs) {\n    return\n  }\n  const py_version = docs[0].version.replace('rc', '-rc.').replace('.dev', '-dev.')\n  async function embed_document(root) {\n    var Bokeh = get_bokeh(root)\n    await Bokeh.embed.embed_items_notebook(docs_json, render_items);\n    for (const render_item of render_items) {\n      for (const root_id of render_item.root_ids) {\n\tconst id_el = document.getElementById(root_id)\n\tif (id_el.children.length && id_el.children[0].hasAttribute('data-root-id')) {\n\t  const root_el = id_el.children[0]\n\t  root_el.id = root_el.id + '-rendered'\n\t  for (const child of root_el.children) {\n            // Ensure JupyterLab does not capture keyboard shortcuts\n            // see: https://jupyterlab.readthedocs.io/en/4.1.x/extension/notebook.html#keyboard-interaction-model\n\t    child.setAttribute('data-lm-suppress-shortcuts', 'true')\n\t  }\n\t}\n      }\n    }\n  }\n  function get_bokeh(root) {\n    if (root.Bokeh === undefined) {\n      return null\n    } else if (root.Bokeh.version !== py_version) {\n      if (root.Bokeh.versions === undefined || !root.Bokeh.versions.has(py_version)) {\n\treturn null\n      }\n      return root.Bokeh.versions.get(py_version);\n    } else if (root.Bokeh.version === py_version) {\n      return root.Bokeh\n    }\n    return null\n  }\n  function is_loaded(root) {\n    var Bokeh = get_bokeh(root)\n    return (Bokeh != null && Bokeh.Panel !== undefined)\n  }\n  if (is_loaded(root)) {\n    embed_document(root);\n  } else {\n    var attempts = 0;\n    var timer = setInterval(function(root) {\n      if (is_loaded(root)) {\n        clearInterval(timer);\n        embed_document(root);\n      } else if (document.readyState == \"complete\") {\n        attempts++;\n        if (attempts > 200) {\n          clearInterval(timer);\n\t  var Bokeh = get_bokeh(root)\n\t  if (Bokeh == null || Bokeh.Panel == null) {\n            console.warn(\"Panel: ERROR: Unable to run Panel code because Bokeh or Panel library is missing\");\n\t  } else {\n\t    console.warn(\"Panel: WARNING: Attempting to render but not all required libraries could be resolved.\")\n\t    embed_document(root)\n\t  }\n        }\n      }\n    }, 25, root)\n  }\n})(window);</script>","content_type":"text/html"}}}],"key":"q9QNZCsQFL"}],"key":"kv3Owfi82R"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import geopandas as gpd\nepsg = 4326 # our data's projection\n\ngdf = gpd.read_file(\"../aoi/feature.geojson\")\ngdf = gdf.set_crs(epsg=epsg)\ngdf.explore()","key":"cewbpIhtWi"},{"type":"output","id":"bnD0j9mauEFRrbgq5UrGV","data":[{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/html":{"content":"<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_b9a69cd409a32d5117aa41b14ac510ea {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n\n            &lt;style&gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            &lt;/style&gt;\n\n            &lt;style&gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            &lt;/style&gt;\n\n            &lt;script&gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            &lt;/script&gt;\n\n        \n    \n                    &lt;style&gt;\n                        .foliumtooltip {\n                            \n                        }\n                       .foliumtooltip table{\n                            margin: auto;\n                        }\n                        .foliumtooltip tr{\n                            text-align: left;\n                        }\n                        .foliumtooltip th{\n                            padding: 2px; padding-right: 8px;\n                        }\n                    &lt;/style&gt;\n            \n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_b9a69cd409a32d5117aa41b14ac510ea&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_b9a69cd409a32d5117aa41b14ac510ea = L.map(\n                &quot;map_b9a69cd409a32d5117aa41b14ac510ea&quot;,\n                {\n                    center: [41.749958454337275, -7.996767585316725],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  &quot;zoom&quot;: 10,\n  &quot;zoomControl&quot;: true,\n  &quot;preferCanvas&quot;: false,\n}\n\n                }\n            );\n            L.control.scale().addTo(map_b9a69cd409a32d5117aa41b14ac510ea);\n\n            \n\n        \n    \n            var tile_layer_1a43fcf969d4d1f0b5b9c38a3c2615f4 = L.tileLayer(\n                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,\n                {\n  &quot;minZoom&quot;: 0,\n  &quot;maxZoom&quot;: 19,\n  &quot;maxNativeZoom&quot;: 19,\n  &quot;noWrap&quot;: false,\n  &quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors&quot;,\n  &quot;subdomains&quot;: &quot;abc&quot;,\n  &quot;detectRetina&quot;: false,\n  &quot;tms&quot;: false,\n  &quot;opacity&quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_1a43fcf969d4d1f0b5b9c38a3c2615f4.addTo(map_b9a69cd409a32d5117aa41b14ac510ea);\n        \n    \n            map_b9a69cd409a32d5117aa41b14ac510ea.fitBounds(\n                [[41.62546618757381, -8.151080551544425], [41.87445072110074, -7.842454619089026]],\n                {}\n            );\n        \n    \n        function geo_json_dee81c954f575d4c126f32f3c8d23fd6_styler(feature) {\n            switch(feature.id) {\n                default:\n                    return {&quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n            }\n        }\n        function geo_json_dee81c954f575d4c126f32f3c8d23fd6_highlighter(feature) {\n            switch(feature.id) {\n                default:\n                    return {&quot;fillOpacity&quot;: 0.75};\n            }\n        }\n        function geo_json_dee81c954f575d4c126f32f3c8d23fd6_pointToLayer(feature, latlng) {\n            var opts = {\n  &quot;stroke&quot;: true,\n  &quot;color&quot;: &quot;#3388ff&quot;,\n  &quot;weight&quot;: 3,\n  &quot;opacity&quot;: 1.0,\n  &quot;lineCap&quot;: &quot;round&quot;,\n  &quot;lineJoin&quot;: &quot;round&quot;,\n  &quot;dashArray&quot;: null,\n  &quot;dashOffset&quot;: null,\n  &quot;fill&quot;: true,\n  &quot;fillColor&quot;: &quot;#3388ff&quot;,\n  &quot;fillOpacity&quot;: 0.2,\n  &quot;fillRule&quot;: &quot;evenodd&quot;,\n  &quot;bubblingMouseEvents&quot;: true,\n  &quot;radius&quot;: 2,\n};\n            \n            let style = geo_json_dee81c954f575d4c126f32f3c8d23fd6_styler(feature)\n            Object.assign(opts, style)\n            \n            return new L.CircleMarker(latlng, opts)\n        }\n\n        function geo_json_dee81c954f575d4c126f32f3c8d23fd6_onEachFeature(feature, layer) {\n\n            layer.on({\n                mouseout: function(e) {\n                    if(typeof e.target.setStyle === &quot;function&quot;){\n                            geo_json_dee81c954f575d4c126f32f3c8d23fd6.resetStyle(e.target);\n                    }\n                },\n                mouseover: function(e) {\n                    if(typeof e.target.setStyle === &quot;function&quot;){\n                        const highlightStyle = geo_json_dee81c954f575d4c126f32f3c8d23fd6_highlighter(e.target.feature)\n                        e.target.setStyle(highlightStyle);\n                    }\n                },\n            });\n        };\n        var geo_json_dee81c954f575d4c126f32f3c8d23fd6 = L.geoJson(null, {\n                onEachFeature: geo_json_dee81c954f575d4c126f32f3c8d23fd6_onEachFeature,\n            \n                style: geo_json_dee81c954f575d4c126f32f3c8d23fd6_styler,\n                pointToLayer: geo_json_dee81c954f575d4c126f32f3c8d23fd6_pointToLayer,\n            ...{\n}\n        });\n\n        function geo_json_dee81c954f575d4c126f32f3c8d23fd6_add (data) {\n            geo_json_dee81c954f575d4c126f32f3c8d23fd6\n                .addData(data);\n        }\n            geo_json_dee81c954f575d4c126f32f3c8d23fd6_add({&quot;bbox&quot;: [-8.151080551544425, 41.62546618757381, -7.842454619089026, 41.87445072110074], &quot;features&quot;: [{&quot;bbox&quot;: [-8.151080551544425, 41.62546618757381, -7.842454619089026, 41.87445072110074], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-8.146996977155997, 41.86752176608837], [-8.151080551544425, 41.62546618757381], [-7.842454619089026, 41.63184962633949], [-7.846980686058243, 41.87445072110074], [-8.146996977155997, 41.86752176608837]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;color&quot;: &quot;red&quot;, &quot;id&quot;: &quot;user-polygon-6c12f10a067368&quot;, &quot;label&quot;: &quot;Polygon 1&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});\n\n        \n    \n    geo_json_dee81c954f575d4c126f32f3c8d23fd6.bindTooltip(\n    function(layer){\n    let div = L.DomUtil.create(&#x27;div&#x27;);\n    \n    let handleObject = feature =&gt; {\n        if (feature === null) {\n            return &#x27;&#x27;;\n        } else if (typeof(feature)==&#x27;object&#x27;) {\n            return JSON.stringify(feature);\n        } else {\n            return feature;\n        }\n    }\n    let fields = [&quot;id&quot;, &quot;label&quot;, &quot;color&quot;];\n    let aliases = [&quot;id&quot;, &quot;label&quot;, &quot;color&quot;];\n    let table = &#x27;&lt;table&gt;&#x27; +\n        String(\n        fields.map(\n        (v,i)=&gt;\n        `&lt;tr&gt;\n            &lt;th&gt;${aliases[i]}&lt;/th&gt;\n            \n            &lt;td&gt;${handleObject(layer.feature.properties[v])}&lt;/td&gt;\n        &lt;/tr&gt;`).join(&#x27;&#x27;))\n    +&#x27;&lt;/table&gt;&#x27;;\n    div.innerHTML=table;\n    \n    return div\n    }\n    ,{\n  &quot;sticky&quot;: true,\n  &quot;className&quot;: &quot;foliumtooltip&quot;,\n});\n                     \n    \n            geo_json_dee81c954f575d4c126f32f3c8d23fd6.addTo(map_b9a69cd409a32d5117aa41b14ac510ea);\n        \n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>","content_type":"text/html"},"text/plain":{"content":"<folium.folium.Map at 0x7fb815590e10>","content_type":"text/plain"}}}],"key":"yuc9vjw3yD"}],"key":"ZAJ6RqxdEc"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What is STAC?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EknvgZEPQi"}],"identifier":"what-is-stac","label":"What is STAC?","html_id":"what-is-stac","implicit":true,"key":"XfuCxtl0TR"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"(summarised from ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pr9Bd5Qqrc"},{"type":"link","url":"https://stacspec.org/en/tutorials/intro-to-stac/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"https://​stacspec​.org​/en​/tutorials​/intro​-to​-stac/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BRx1dzBLWn"}],"urlSource":"https://stacspec.org/en/tutorials/intro-to-stac/","key":"VRZ07aSM9R"},{"type":"text","value":")","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rHmAk0smse"}],"key":"vLcLadkxPF"}],"key":"ycW3The97O"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The SpatioTemporal Asset Catalog (STAC) specification was designed to establish a standard, unified language to talk about geospatial data, allowing it to be more easily searchable and queryable.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"tk53MmnI0Y"}],"key":"AP5Qtp0bb1"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"STAC has been designed to be simple, flexible, and extensible. STAC is a network of JSON files that reference other JSON files, with each JSON file adhering to a specific core specification depending on which STAC component it is describing. This core JSON format can also be customized to fit differing needs, making the STAC specification highly flexible and adaptable.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"kEyHCDNKg1"}],"key":"QJbxFnlj1C"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Therefore, if the STAC specification seems ‘light’, that is because it is light-- by design. Through this flexibility, different domains and tools can easily utilize the STAC specification and make it their own.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"quy05mhvM9"}],"key":"pEmVn6Al7w"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"The Extensions section of the spec is where the community collaborates on more detail about specific data types and new functionality.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"FsukvTi8d8"}],"key":"urhixHdxWd"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"NOTE","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"pUswwdnERR"}],"key":"nLDsgw9jLf"},{"type":"text","value":" STAC helps you catalog and describe at a higher level.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"KvNFBWoX4s"}],"key":"E9RkvHVSeF"}],"key":"GUkO1et7ak"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What is STAC","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qyNlJkcxP4"}],"identifier":"what-is-stac","label":"What is STAC","html_id":"what-is-stac-1","implicit":true,"key":"DYti8jnTPF"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The SpatioTemporal Asset Catalog (STAC) specification was designed to establish a standard, unified language to talk about geospatial data, allowing it to be more easily searchable and queryable.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"sHJdDROhcV"}],"key":"L484iqtM3T"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"STAC has been designed to be simple, flexible, and extensible. STAC is a network of JSON files that reference other JSON files, with each JSON file adhering to a specific core specification depending on which STAC component it is describing. This core JSON format can also be customized to fit differing needs, making the STAC specification highly flexible and adaptable.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"vQYYH7LYOz"}],"key":"BuzLIeCQD1"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Therefore, if the STAC specification seems ‘light’, that is because it is light-- by design. Through this flexibility, different domains and tools can easily utilize the STAC specification and make it their own.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"iXTMmK6keG"}],"key":"qcZDNucOpp"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"The Extensions section of the spec is where the community collaborates on more detail about specific data types and new functionality.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"mSt7bNfnLU"}],"key":"rZ0iMoYlSc"},{"type":"heading","depth":3,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"What is a SpatioTemporal Asset","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"P1VKJlbhAl"}],"identifier":"what-is-a-spatiotemporal-asset","label":"What is a SpatioTemporal Asset","html_id":"what-is-a-spatiotemporal-asset","implicit":true,"key":"QwpbQTSGal"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"A SpatioTemporal Asset is any file that represents information about the Earth captured in a certain place and at a particular time. Examples include spatiotemporal data derived from imagery (from satellites, airplanes, and drones), Synthetic Aperture Radar (SAR), point clouds (from LiDAR, structure from motion, etc.), data cubes, and full-motion video. The key is that the GeoJSON is not the actual ‘thing’, but instead references files and serves as an index to the STAC Assets.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"Fq4kj8YZYY"}],"key":"WdkGwN3Sct"}],"key":"ofNeynvcys"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"STAC Components","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nIDNmPWImD"}],"identifier":"stac-components","label":"STAC Components","html_id":"stac-components","implicit":true,"key":"fuqfVDdJMh"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"There are three component specifications that together make up the core SpatioTemporal Asset Catalog specification. These components are:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"gLcthUSn6k"}],"key":"ddziy7UrlN"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Item - A STAC Item is the foundational building block of STAC. It is a GeoJSON feature supplemented with additional metadata that enables clients to traverse through catalogs. Since an item is a GeoJSON, it can be easily read by any modern GIS or geospatial library. One item can describe one or more SpatioTemporal Asset(s). For example, a common practice of using STAC for imagery is that each band in a scene is its own STAC Asset and there is one STAC Item to represent all the bands in a single scene.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"I4QnUGfN90"}],"key":"JxrFQYJ5om"}],"key":"GQdCYA0QT3"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Catalog - A Catalog is usually the starting point for navigating a STAC. A catalog.json file contains links to some combination of other STAC Catalogs, Collections, and/or Items. We can think of it like a directory tree on a computer.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"OtaAk7OxOk"}],"key":"Rdm3mc5eQi"}],"key":"iITrzPwl1S"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Collection - A STAC Collection builds upon the STAC Catalog specification to include additional metadata about a set of items that exist as part of the collection. It extends the parent catalog by adding additional fields to enable the description of information like the spatial and temporal extent of the data, the license, keywords, providers, etc. Therefore, it can easily be extended for additional collection-level metadata.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"v1xtFwUAtb"}],"key":"M55QKhkSyH"}],"key":"ytZbTOn8ra"}],"key":"RQrFO674ft"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Each component can be used alone, but they work best in concert with one another.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"j9FZU9EdUB"}],"key":"NekImBTnsw"},{"type":"image","url":"/tutorials/build/stacsetup-81bc007932ce9138d08e6f34e5151bc3.png","alt":"stac","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"z0tzGrCqll","urlSource":"../static/stacsetup.png"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"A STAC Item represents one or more spatiotemporal assets as GeoJSON so that it can be easily searched. The STAC Catalog specification provides structural elements to group STAC Items and Collections. STAC Collections are catalogs that add more required metadata and describe a group of related items. Now, let’s dive into each one of these components a bit more in-depth.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"RnBtot74eA"}],"key":"gvOy31hMe1"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"The STAC API specification builds on top of that core and allows us to do dynamic queries over our collections.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Zx5ptQCEis"}],"key":"bdkeV3gOrO"}],"key":"Ucg9MksJzG"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Accessing the EarthCODE Catalog","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zD3FvIlJLN"}],"identifier":"accessing-the-earthcode-catalog","label":"Accessing the EarthCODE Catalog","html_id":"accessing-the-earthcode-catalog","implicit":true,"key":"H9WA5PzcSA"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This section introduces ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"azhLBSB8q1"},{"type":"link","url":"https://stacspec.org/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"STAC","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"T9Ttnv78Ij"}],"urlSource":"https://stacspec.org/","key":"hIyD2jy3sR"},{"type":"text","value":", the SpatioTemporal Asset Catalog. STAC provides a standardized way to structure metadata about spatialotemporal data. The STAC community are building APIs and tools on top of this structure to make working with spatiotemporal data easier.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xX7Pw7oRQW"}],"key":"XNKkGIx7Eo"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Users of STAC will interact most often with Collections and Items (there’s also Catalogs, which group together collections). A Collection is just a collection of items, plus some additional metadata like the license and summaries of what’s available on each item. You can view available collections on the EarthCODE catalog with","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"jna6IE10td"}],"key":"rB2OfMG9Sc"}],"key":"tgBf8teSIh"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Open Science Catalog","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fh2RDoluia"}],"identifier":"open-science-catalog","label":"Open Science Catalog","html_id":"open-science-catalog","implicit":true,"key":"PV8Odl93lJ"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"fZ1VgcNUEp"},{"type":"link","url":"https://opensciencedata.esa.int/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Open Science Data Catalog","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"wWEa7dflYJ"}],"key":"Wva77R9mBM"}],"urlSource":"https://opensciencedata.esa.int/","key":"UegsQ097XY"},{"type":"text","value":" is a publicly accessible platform that enables anyone—whether or not they have a GitHub account—to ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"jUXY2Hy9kh"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"discover and access Earth Observation research","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"soAUJTpayj"}],"key":"dOBzhvtyX7"},{"type":"text","value":". It provides a transparent and structured way to explore the latest results from EO projects by organizing metadata in a consistent and harmonized format.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"PTgx1EZZqg"}],"key":"iuwBLd4rPh"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Built on the open-source ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"h9RX2TzLj9"},{"type":"strong","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"STAC Browser","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"R6qa7keaIY"}],"key":"dFIRGKeITS"},{"type":"text","value":", the catalog allows users to browse and explore interlinked elements such as ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ts189jLYPZ"},{"type":"strong","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"themes, variables, EO missions, projects, products, workflows, and experiments","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"JFAKAlLTLy"}],"key":"EEmOkldmMT"},{"type":"text","value":", all described using ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"QGfpE8m4rF"},{"type":"strong","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"STAC-compliant JSON files","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"PmlA5S0IqT"}],"key":"xHPyk9pYie"},{"type":"text","value":".","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"R6sGPBpOcC"}],"key":"ZHTbA7E7kh"}],"key":"axNtVTSyxX"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"url = \"https://raw.githubusercontent.com/ESA-EarthCODE/open-science-catalog-metadata/main/catalog.json\"\ncat = pystac.Catalog.from_file(url)\ncat","key":"V0sysvEOCX"},{"type":"output","id":"MfoiHTu3xpg4s1QFWScl9","data":[{"output_type":"execute_result","execution_count":14,"metadata":{},"data":{"text/html":{"content":"\n\n<style>\n.pystac-summary {\n    cursor: pointer;\n    display: list-item;\n    list-style: revert;\n    margin-bottom: 0 !important;\n\n    .pystac-l {\n        padding-left: 0.5em;\n        color: rgb(64, 128, 128);\n        font-style: italic;\n    }\n}\n.pystac-row {\n    overflow-wrap: break-word;\n    padding-left: .825em;\n\n    .pystac-k {\n        display: inline-block;\n        margin: 0px 0.5em 0px 0px;\n    }\n    .pystac-v {\n        color: rgb(186, 33, 33);\n    }\n}\n.pystac-k {\n    color: rgb(0, 128, 0);\n    font-weight: 700;\n}\n</style>\n<div class=\"jp-RenderedJSON jp-mod-trusted jp-OutputArea-output\">\n    <div class=\"container\" style=\"line-height: normal;\">\n        <ul style=\"padding: 0px; margin: 0px; list-style: none; display: block;\">\n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"Catalog\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">id</span>\n            <span class=\"pystac-v\">\"osc\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">stac_version</span>\n            <span class=\"pystac-v\">\"1.1.0\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">description</span>\n            <span class=\"pystac-v\">\"A catalog of publicly available geoscience products, datasets, workflows, experiments, and resources developed in the frame of scientific research Projects funded by ESA EO (Earth Observation)\"</span>\n        </li>\n    \n                \n            \n                \n                    <li><details>\n        <summary class=\"pystac-summary\"><span class=\"pystac-k\">links</span><span class=\"pystac-l\">[] 9 items</span></summary>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">0</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"self\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"https://raw.githubusercontent.com/ESA-EarthCODE/open-science-catalog-metadata/main/catalog.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/json\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">1</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"root\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"https://raw.githubusercontent.com/ESA-EarthCODE/open-science-catalog-metadata/main/catalog.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Open Science Catalog\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">2</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"child\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"./projects/catalog.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Projects\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">3</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"child\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"./themes/catalog.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Themes\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">4</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"child\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"./variables/catalog.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Variables\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">5</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"child\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"./eo-missions/catalog.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"EO Missions\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">6</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"child\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"./products/catalog.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Products\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">7</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"child\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"./workflows/catalog.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Workflows\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li><details>\n            <summary class=\"pystac-summary\"><span class=\"pystac-k\">8</span></summary>\n            <ul style=\"margin: 0px; padding: 0px 0px 0px 1.75em; list-style: none; display: block;\">\n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">rel</span>\n            <span class=\"pystac-v\">\"child\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">href</span>\n            <span class=\"pystac-v\">\"./experiments/catalog.json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">type</span>\n            <span class=\"pystac-v\">\"application/json\"</span>\n        </li>\n    \n            \n        \n            \n                \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Experiments\"</span>\n        </li>\n    \n            \n        \n    </ul>\n        </details></li>\n    \n            \n        \n    </ul>\n        \n    </details></li>\n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">updated</span>\n            <span class=\"pystac-v\">\"2025-02-20T11:00:00.000000Z\"</span>\n        </li>\n    \n                \n            \n                \n                    \n        <li class=\"pystac-row\">\n            <span class=\"pystac-k\">title</span>\n            <span class=\"pystac-v\">\"Open Science Catalog\"</span>\n        </li>\n    \n                \n            \n        </ul>\n    </div>\n</div>","content_type":"text/html"},"text/plain":{"content":"<Catalog id=osc>","content_type":"text/plain"}}}],"key":"OQfUCcRcVm"}],"key":"WUxhGFJ1BT"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now let’s search and access the same data we were just looking at, SeasFire:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"T3mqQkQusS"}],"key":"yZ8jlA9Wu4"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"link","url":"https://opensciencedata.esa.int/products/seasfire-cube/collection","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"https://​opensciencedata​.esa​.int​/products​/seasfire​-cube​/collection","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"K76HshgveU"}],"urlSource":"https://opensciencedata.esa.int/products/seasfire-cube/collection","key":"Mc7amPrDTL"}],"key":"fQYtpw57P5"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"In the examples we’ve seen so far, we’ve just been given a STAC item. How do you find the items you want in the first place? That’s where a STAC API comes in.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"nIOsQCE3y4"}],"key":"nz6NHHFiBC"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"A STAC API is some web service that accepts queries and returns STAC objects. The ability to handle queries is what differentiates a STAC API from a static STAC catalog, where items are just present on some file system.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"VdXnheHcfm"}],"key":"Y6VgJuVQAe"}],"key":"V7Fbb7K4h9"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(cat.title, cat.description)","key":"YOtWu1CQcV"},{"type":"output","id":"RQJNRz9fZBg4EGzojSzyG","data":[{"name":"stdout","output_type":"stream","text":"Open Science Catalog A catalog of publicly available geoscience products, datasets, workflows, experiments, and resources developed in the frame of scientific research Projects funded by ESA EO (Earth Observation)\n"}],"key":"wtTRK0DCQ9"}],"key":"OnwC4xFfZY"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"osc_products = cat.get_child(\"products\")\nosc_products","key":"NHSKQYKTep"},{"type":"output","id":"JdzNw4G7Vlf3qb-zRFqEL","data":[{"output_type":"execute_result","execution_count":16,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"fdc0701d9b8a13e7b5f76527c9236922","path":"/tutorials/build/fdc0701d9b8a13e7b5f76527c9236922.html"},"text/plain":{"content":"<Catalog id=products>","content_type":"text/plain"}}}],"key":"De53BAjBda"}],"key":"cOgaXPkM7s"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"search_f = lambda q, coll: q in f\"{coll.id or ''} {coll.title or ''} {coll.description or ''}\".lower()\nfire_colls = [c for c in osc_products.get_all_collections() if search_f('fire',c)]\nfire_colls","key":"ci9MnHtVIc"},{"type":"output","id":"UbxOEFC67_o7_NqlqYP1o","data":[{"output_type":"execute_result","execution_count":17,"metadata":{},"data":{"text/plain":{"content":"[<Collection id=seasfire-cube>]","content_type":"text/plain"}}}],"key":"Xzd4VYAl76"}],"key":"hHI7ikn8EZ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"seas_fire_osc_product = osc_products.get_child('seasfire-cube')\nseas_fire_osc_product","key":"d83iRo7YEe"},{"type":"output","id":"T3irJ7bua-gD1xgZvAtZk","data":[{"output_type":"execute_result","execution_count":18,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"6081475cc6fe9ab16a15850410933478","path":"/tutorials/build/6081475cc6fe9ab16a15850410933478.html"},"text/plain":{"content":"<Collection id=seasfire-cube>","content_type":"text/plain"}}}],"key":"Br5TBXH1ke"}],"key":"l707PEtCwC"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"seas_fire_item = next(seas_fire_osc_product.get_child('seasfire-cube').get_items())\nseas_fire_item","key":"bp1bKiytoM"},{"type":"output","id":"-1rchSNG6TvH-14Q2cYHd","data":[{"output_type":"execute_result","execution_count":19,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"096055318721ae245be431663c82bde1","path":"/tutorials/build/096055318721ae245be431663c82bde1.html"},"text/plain":{"content":"<Item id=seasfire-cube-v.0.4>","content_type":"text/plain"}}}],"key":"xB9ATtzXGx"}],"key":"kcJW1yiXCi"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"You can use the same methods on a variety of catalogs that expose different query parameters. STAC items can either be an API or static assets. We just explored static assets, now we will quickly demo using STAC API.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kQbgMbt8xN"}],"key":"EYhaZGUfxd"}],"key":"XzkxCovPGr"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"catalog = pystac_client.open(\"https://earth-search.aws.element84.com/v1\")\n\nsearch = catalog.search(\n    collections=[\"sentinel-2-l2a\"], \n    bbox=[-6, 50, 2, 56],                      \n    datetime=\"2024-06-01/2024-06-30\",         \n    query={\"eo:cloud_cover\":\"<10\"}               \n)\nprint(f\"{search.matched()} items in June with <10 % cloud\")\n","key":"ylrUkA1Rhl"},{"type":"output","id":"DzijyGx6IPvIGko_CXhKZ","data":[{"name":"stdout","output_type":"stream","text":"966 items in June with <10 % cloud\n"}],"key":"YkpOqRgmi9"}],"key":"K8rC0X45oK"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note that the collection points to another collection, which contains the actual data. The EarthCODE STAC extension describes some metadata that enrich the STAC collection ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gQ7sQ7umc2"},{"type":"link","url":"https://github.com/stac-extensions/osc","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"https://​github​.com​/stac​-extensions​/osc","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"isZn3IBaj0"}],"urlSource":"https://github.com/stac-extensions/osc","error":true,"key":"F06VQCLhB8"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jOBh8KVnkt"}],"key":"kICsJo3VA6"},{"type":"image","url":"/tutorials/build/EarthCODE-STAC-6d721e5f29630397daac7d3bf3c2ff81.png","alt":"img.png","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"H7kRV0QPdz","urlSource":"../static/EarthCODE-STAC.png"}],"key":"z4GQ0zZ6Ci"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Accessing Data from EarthCODE","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TSmt4eUExI"}],"identifier":"accessing-data-from-earthcode","label":"Accessing Data from EarthCODE","html_id":"accessing-data-from-earthcode","implicit":true,"key":"zhYGRBJHHq"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now we will load the actual data from the STAC item we’ve found...","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IEQV9fWW2B"}],"key":"YI49nIWvtr"},{"type":"blockquote","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The SeasFire Cube is a scientific datacube for seasonal fire forecasting around the globe. It has been created for the SeasFire project, that adresses ‘Earth System Deep Learning for Seasonal Fire Forecasting’ and is funded by the European Space Agency (ESA)  in the context of ESA Future EO-1 Science for Society Call. It contains almost 20 years of data (2001-2021) in an 8-days time resolution and 0.25 degrees grid resolution. It has a diverse range of seasonal fire drivers. It expands from atmospheric and climatological ones to vegetation variables, socioeconomic and the target variables related to wildfires such as burned areas, fire radiative power, and wildfire-related CO2 emissions.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"jruEOWIfSq"}],"key":"b7uWci6in7"}],"key":"rzk1Yz8bSa"}],"key":"eMB9wOhKyi"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"seas_fire_item\n# https://s3.waw4-1.cloudferro.com/EarthCODE/Catalogs/seasfire/seasfire-cube_v0.4/seasfire-cube-v.0.4/seasfire-cube-v.0.4.json","key":"UvjU2bYO1l"},{"type":"output","id":"XIzNSoEAI2mwNYaYFABFb","data":[{"output_type":"execute_result","execution_count":21,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"096055318721ae245be431663c82bde1","path":"/tutorials/build/096055318721ae245be431663c82bde1.html"},"text/plain":{"content":"<Item id=seasfire-cube-v.0.4>","content_type":"text/plain"}}}],"key":"BBFBUIdorO"}],"key":"BHxE2cTM70"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Items and Assets","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IEczFXCrGh"}],"identifier":"items-and-assets","label":"Items and Assets","html_id":"items-and-assets","implicit":true,"key":"oSoM2VtTAf"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"STAC is a metadata standard. It doesn’t really deal with data files directly. Instead, it links to the data files under the “assets” property.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"sIxSnfgrZj"}],"key":"Nfq6kZ9pkA"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"As described in ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"EJO4WgVG22"},{"type":"strong","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"link","url":"https://guide.cloudnativegeo.org/","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"https://​guide​.cloudnativegeo​.org/","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"A4W6wSOyca"}],"urlSource":"https://guide.cloudnativegeo.org/","key":"UD2jcBS5RM"}],"key":"pXo0avsQ1Q"},{"type":"text","value":" in this case the STAC catalog contains a collection for each Zarr store and there are collection-level assets that point to the location of the Zarr store. There are no items at all in this setup.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"fjidKpJRLR"}],"key":"S20R9W4M3f"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"In this scenario any STAC metadata exists purely for discovery and cannot be used for filtering or subsetting (see Future Work for more on that). To search the STAC catalog to find collections of interest you will use the Collection Search API Extension. Depending on the level of metadata that has been provided in the STAC catalog you can search by the name of the collection and possibly by the variables – exposed via the Data Cube Extension.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"OqILFFDO0h"}],"key":"vfo50IyFnV"},{"type":"heading","depth":3,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Read straight to xarray","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"oP2qceWAuC"}],"identifier":"read-straight-to-xarray","label":"Read straight to xarray","html_id":"read-straight-to-xarray","implicit":true,"key":"MFM0ksfXl4"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"For a collection of interest, the best approach for accessing the data is to construct the lazily-loaded data cube in xarray (or an xarray.DataTree if the Zarr store has more than one group) and filter from there.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"iPtpJRzLdD"}],"key":"crlxzNxeVb"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"To do this you can use the zarr backend directly or you can use the stac backend to streamline even more. The stac backend is mostly useful if the STAC collection uses the xarray extension.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"UkU95A4Ytb"}],"key":"qe2b0CaOwx"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Constructing the lazy data cube is likely to be very fast if there is a consolidated metadata file OR the data is in Zarr-3 and the Zarr metadata fetch is highly parallelized (read more).","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"cMZm12kjqO"}],"key":"gcgfLfh6PD"}],"key":"yWawdk8vLt"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Loading and Fetching Data Cube - Xarray","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qVy9VEGL1k"}],"identifier":"loading-and-fetching-data-cube-xarray","label":"Loading and Fetching Data Cube - Xarray","html_id":"loading-and-fetching-data-cube-xarray","implicit":true,"key":"mw6vD3Qz5W"}],"key":"WkZ3VCidLY"},{"type":"block","kind":"notebook-code","data":{"scrolled":true},"children":[{"type":"code","lang":"python","executable":true,"value":"http_url = seas_fire_item.assets[\"data\"].href.replace(\n    \"s3://\",\n    f\"{seas_fire_item.properties['storage:schemes'][seas_fire_item.assets['data'].extra_fields['storage:refs'][0]]['platform'].rstrip('/')}/\",\n)\nhttp_url\n","key":"Y9eWDG7S0F"},{"type":"output","id":"6YechGac4HY7jWEFL4cC8","data":[{"output_type":"execute_result","execution_count":22,"metadata":{},"data":{"text/plain":{"content":"'https://s3.waw4-1.cloudferro.com/EarthCODE/OSCAssets/seasfire/seasfire_v0.4.zarr/'","content_type":"text/plain"}}}],"key":"s6Msffhrc4"}],"key":"D1mVg8QdXV"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ds = xarray.open_dataset(\n\thttp_url,\n\tengine='zarr',\n    chunks={},\n\tconsolidated=True\n\t# storage_options = {'token': 'anon'}\n)\nds","key":"Bc7crWZDag"},{"type":"output","id":"ynf1Qb4Zj5c9EdiIMKsvx","data":[{"output_type":"execute_result","execution_count":23,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"bb00e7dbf39435d92eaa2fe29d37033b","path":"/tutorials/build/bb00e7dbf39435d92eaa2fe29d37033b.html"},"text/plain":{"content":"<xarray.Dataset> Size: 164GB\nDimensions:                         (latitude: 720, longitude: 1440, time: 966)\nCoordinates:\n  * latitude                        (latitude) float64 6kB 89.88 ... -89.88\n  * longitude                       (longitude) float64 12kB -179.9 ... 179.9\n  * time                            (time) datetime64[ns] 8kB 2001-01-01 ... ...\nData variables: (12/59)\n    area                            (latitude, longitude) float32 4MB dask.array<chunksize=(180, 360), meta=np.ndarray>\n    biomes                          (latitude, longitude) float32 4MB dask.array<chunksize=(180, 360), meta=np.ndarray>\n    cams_co2fire                    (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    cams_frpfire                    (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    drought_code_max                (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    drought_code_mean               (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    ...                              ...\n    t2m_max                         (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    t2m_mean                        (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    t2m_min                         (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    tp                              (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    vpd                             (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\n    ws10                            (time, latitude, longitude) float32 4GB dask.array<chunksize=(966, 180, 360), meta=np.ndarray>\nAttributes:\n    crs:          EPSG:4326\n    description:  The SeasFire Cube is a scientific datacube for seasonal fir...\n    title:        SeasFire Cube: A Global Dataset for Seasonal Fire Modeling ...","content_type":"text/plain"}}}],"key":"WLYA2KrknV"}],"key":"NdVAJlEcO3"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"gwis = ds.gwis_ba\ngwis","key":"UBkxWIC8EB"},{"type":"output","id":"gnJy8v6oUe_JAoZFHGj1p","data":[{"output_type":"execute_result","execution_count":24,"metadata":{},"data":{"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1f1f1f;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;gwis_ba&#x27; (time: 966, latitude: 720, longitude: 1440)&gt; Size: 4GB\ndask.array&lt;open_dataset-gwis_ba, shape=(966, 720, 1440), dtype=float32, chunksize=(966, 180, 360), chunktype=numpy.ndarray&gt;\nCoordinates:\n  * latitude   (latitude) float64 6kB 89.88 89.62 89.38 ... -89.38 -89.62 -89.88\n  * longitude  (longitude) float64 12kB -179.9 -179.6 -179.4 ... 179.6 179.9\n  * time       (time) datetime64[ns] 8kB 2001-01-01 2001-01-09 ... 2021-12-27\nAttributes:\n    aggregation:      Spatio-Temporal | sum\n    creator_notes:    The missing data for the year 2001 has been filled with...\n    downloaded_from:  https://gwis.jrc.ec.europa.eu/apps/country.profile/down...\n    long_name:        Burned Areas from GWIS\n    provider:         Global Wildfire Information System (GWIS)\n    units:            hectares (ha)</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'gwis_ba'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 966</li><li><span class='xr-has-index'>latitude</span>: 720</li><li><span class='xr-has-index'>longitude</span>: 1440</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-c1aa990c-429d-44d6-b194-fe56075a6ca8' class='xr-array-in' type='checkbox' checked><label for='section-c1aa990c-429d-44d6-b194-fe56075a6ca8' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>dask.array&lt;chunksize=(966, 180, 360), meta=np.ndarray&gt;</span></div><div class='xr-array-data'><table>\n    <tr>\n        <td>\n            <table style=\"border-collapse: collapse;\">\n                <thead>\n                    <tr>\n                        <td> </td>\n                        <th> Array </th>\n                        <th> Chunk </th>\n                    </tr>\n                </thead>\n                <tbody>\n                    \n                    <tr>\n                        <th> Bytes </th>\n                        <td> 3.73 GiB </td>\n                        <td> 238.79 MiB </td>\n                    </tr>\n                    \n                    <tr>\n                        <th> Shape </th>\n                        <td> (966, 720, 1440) </td>\n                        <td> (966, 180, 360) </td>\n                    </tr>\n                    <tr>\n                        <th> Dask graph </th>\n                        <td colspan=\"2\"> 16 chunks in 2 graph layers </td>\n                    </tr>\n                    <tr>\n                        <th> Data type </th>\n                        <td colspan=\"2\"> float32 numpy.ndarray </td>\n                    </tr>\n                </tbody>\n            </table>\n        </td>\n        <td>\n        <svg width=\"227\" height=\"157\" style=\"stroke:rgb(0,0,0);stroke-width:1\" >\n\n  <!-- Horizontal lines -->\n  <line x1=\"10\" y1=\"0\" x2=\"57\" y2=\"47\" style=\"stroke-width:2\" />\n  <line x1=\"10\" y1=\"15\" x2=\"57\" y2=\"62\" />\n  <line x1=\"10\" y1=\"30\" x2=\"57\" y2=\"77\" />\n  <line x1=\"10\" y1=\"45\" x2=\"57\" y2=\"92\" />\n  <line x1=\"10\" y1=\"60\" x2=\"57\" y2=\"107\" style=\"stroke-width:2\" />\n\n  <!-- Vertical lines -->\n  <line x1=\"10\" y1=\"0\" x2=\"10\" y2=\"60\" style=\"stroke-width:2\" />\n  <line x1=\"57\" y1=\"47\" x2=\"57\" y2=\"107\" style=\"stroke-width:2\" />\n\n  <!-- Colored Rectangle -->\n  <polygon points=\"10.0,0.0 57.35294117647059,47.35294117647059 57.35294117647059,107.35294117647058 10.0,60.0\" style=\"fill:#ECB172A0;stroke-width:0\"/>\n\n  <!-- Horizontal lines -->\n  <line x1=\"10\" y1=\"0\" x2=\"130\" y2=\"0\" style=\"stroke-width:2\" />\n  <line x1=\"57\" y1=\"47\" x2=\"177\" y2=\"47\" style=\"stroke-width:2\" />\n\n  <!-- Vertical lines -->\n  <line x1=\"10\" y1=\"0\" x2=\"57\" y2=\"47\" style=\"stroke-width:2\" />\n  <line x1=\"40\" y1=\"0\" x2=\"87\" y2=\"47\" />\n  <line x1=\"70\" y1=\"0\" x2=\"117\" y2=\"47\" />\n  <line x1=\"100\" y1=\"0\" x2=\"147\" y2=\"47\" />\n  <line x1=\"130\" y1=\"0\" x2=\"177\" y2=\"47\" style=\"stroke-width:2\" />\n\n  <!-- Colored Rectangle -->\n  <polygon points=\"10.0,0.0 130.0,0.0 177.35294117647058,47.35294117647059 57.35294117647059,47.35294117647059\" style=\"fill:#ECB172A0;stroke-width:0\"/>\n\n  <!-- Horizontal lines -->\n  <line x1=\"57\" y1=\"47\" x2=\"177\" y2=\"47\" style=\"stroke-width:2\" />\n  <line x1=\"57\" y1=\"62\" x2=\"177\" y2=\"62\" />\n  <line x1=\"57\" y1=\"77\" x2=\"177\" y2=\"77\" />\n  <line x1=\"57\" y1=\"92\" x2=\"177\" y2=\"92\" />\n  <line x1=\"57\" y1=\"107\" x2=\"177\" y2=\"107\" style=\"stroke-width:2\" />\n\n  <!-- Vertical lines -->\n  <line x1=\"57\" y1=\"47\" x2=\"57\" y2=\"107\" style=\"stroke-width:2\" />\n  <line x1=\"87\" y1=\"47\" x2=\"87\" y2=\"107\" />\n  <line x1=\"117\" y1=\"47\" x2=\"117\" y2=\"107\" />\n  <line x1=\"147\" y1=\"47\" x2=\"147\" y2=\"107\" />\n  <line x1=\"177\" y1=\"47\" x2=\"177\" y2=\"107\" style=\"stroke-width:2\" />\n\n  <!-- Colored Rectangle -->\n  <polygon points=\"57.35294117647059,47.35294117647059 177.35294117647058,47.35294117647059 177.35294117647058,107.35294117647058 57.35294117647059,107.35294117647058\" style=\"fill:#ECB172A0;stroke-width:0\"/>\n\n  <!-- Text -->\n  <text x=\"117.352941\" y=\"127.352941\" font-size=\"1.0rem\" font-weight=\"100\" text-anchor=\"middle\" >1440</text>\n  <text x=\"197.352941\" y=\"77.352941\" font-size=\"1.0rem\" font-weight=\"100\" text-anchor=\"middle\" transform=\"rotate(-90,197.352941,77.352941)\">720</text>\n  <text x=\"23.676471\" y=\"103.676471\" font-size=\"1.0rem\" font-weight=\"100\" text-anchor=\"middle\" transform=\"rotate(45,23.676471,103.676471)\">966</text>\n</svg>\n        </td>\n    </tr>\n</table></div></div></li><li class='xr-section-item'><input id='section-0dbb17a9-976c-4b7d-a6c6-3efbffdc27b2' class='xr-section-summary-in' type='checkbox'  checked><label for='section-0dbb17a9-976c-4b7d-a6c6-3efbffdc27b2' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>latitude</span></div><div class='xr-var-dims'>(latitude)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>89.88 89.62 89.38 ... -89.62 -89.88</div><input id='attrs-71f3f99c-9753-44db-92d1-3821a8de18a4' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-71f3f99c-9753-44db-92d1-3821a8de18a4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1ad876f0-d166-4d65-8f40-b2e66786ae39' class='xr-var-data-in' type='checkbox'><label for='data-1ad876f0-d166-4d65-8f40-b2e66786ae39' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees</dd></dl></div><div class='xr-var-data'><pre>array([ 89.875,  89.625,  89.375, ..., -89.375, -89.625, -89.875], shape=(720,))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>longitude</span></div><div class='xr-var-dims'>(longitude)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-179.9 -179.6 ... 179.6 179.9</div><input id='attrs-1ac5ce0f-9ff1-45c6-8917-90abfd2e580f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1ac5ce0f-9ff1-45c6-8917-90abfd2e580f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8b315e09-c616-4b79-8c5b-0a90d46fca98' class='xr-var-data-in' type='checkbox'><label for='data-8b315e09-c616-4b79-8c5b-0a90d46fca98' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees</dd></dl></div><div class='xr-var-data'><pre>array([-179.875, -179.625, -179.375, ...,  179.375,  179.625,  179.875],\n      shape=(1440,))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2001-01-01 ... 2021-12-27</div><input id='attrs-a0c27b8d-3cb3-4e94-b983-e3a9b568779c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a0c27b8d-3cb3-4e94-b983-e3a9b568779c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-36a3419d-afb3-4edf-9ed9-62c4ce808c51' class='xr-var-data-in' type='checkbox'><label for='data-36a3419d-afb3-4edf-9ed9-62c4ce808c51' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Each datetime initializes the first date of the 8 days time resolution. Ex. the 2001-01-01 has all information until 2001-01-07. It&#x27;s year consists of 46 8-days datetimes, and every year begins from first of January (01-01). The last datetime (number 46) of each year, corresponds to 26 or 27 of December, depending if the year is a leap year or not. This means that it contains information for only 6 or 5 days respectively and not for 8 days as the rest.</dd><dt><span>format :</span></dt><dd>YYYY-MM-DD</dd><dt><span>type :</span></dt><dd>datetime</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2001-01-01T00:00:00.000000000&#x27;, &#x27;2001-01-09T00:00:00.000000000&#x27;,\n       &#x27;2001-01-17T00:00:00.000000000&#x27;, ..., &#x27;2021-12-11T00:00:00.000000000&#x27;,\n       &#x27;2021-12-19T00:00:00.000000000&#x27;, &#x27;2021-12-27T00:00:00.000000000&#x27;],\n      shape=(966,), dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-05e307e0-7dea-4523-8f73-1a484ad0b377' class='xr-section-summary-in' type='checkbox'  ><label for='section-05e307e0-7dea-4523-8f73-1a484ad0b377' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>latitude</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-41ab6d7d-bd4c-45e5-b3b6-974be7822308' class='xr-index-data-in' type='checkbox'/><label for='index-41ab6d7d-bd4c-45e5-b3b6-974be7822308' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 89.875,  89.625,  89.375,  89.125,  88.875,  88.625,  88.375,  88.125,\n        87.875,  87.625,\n       ...\n       -87.625, -87.875, -88.125, -88.375, -88.625, -88.875, -89.125, -89.375,\n       -89.625, -89.875],\n      dtype=&#x27;float64&#x27;, name=&#x27;latitude&#x27;, length=720))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>longitude</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-e71f26cc-5800-4e7d-9f24-8837a6acb05c' class='xr-index-data-in' type='checkbox'/><label for='index-e71f26cc-5800-4e7d-9f24-8837a6acb05c' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([-179.875, -179.625, -179.375, -179.125, -178.875, -178.625, -178.375,\n       -178.125, -177.875, -177.625,\n       ...\n        177.625,  177.875,  178.125,  178.375,  178.625,  178.875,  179.125,\n        179.375,  179.625,  179.875],\n      dtype=&#x27;float64&#x27;, name=&#x27;longitude&#x27;, length=1440))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-a7acbdce-ad2d-4fe4-aa18-5c5d5c4a8441' class='xr-index-data-in' type='checkbox'/><label for='index-a7acbdce-ad2d-4fe4-aa18-5c5d5c4a8441' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2001-01-01&#x27;, &#x27;2001-01-09&#x27;, &#x27;2001-01-17&#x27;, &#x27;2001-01-25&#x27;,\n               &#x27;2001-02-02&#x27;, &#x27;2001-02-10&#x27;, &#x27;2001-02-18&#x27;, &#x27;2001-02-26&#x27;,\n               &#x27;2001-03-06&#x27;, &#x27;2001-03-14&#x27;,\n               ...\n               &#x27;2021-10-16&#x27;, &#x27;2021-10-24&#x27;, &#x27;2021-11-01&#x27;, &#x27;2021-11-09&#x27;,\n               &#x27;2021-11-17&#x27;, &#x27;2021-11-25&#x27;, &#x27;2021-12-03&#x27;, &#x27;2021-12-11&#x27;,\n               &#x27;2021-12-19&#x27;, &#x27;2021-12-27&#x27;],\n              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, length=966, freq=None))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-aa8d4af9-44aa-4136-ad35-21a19a9d9eab' class='xr-section-summary-in' type='checkbox'  checked><label for='section-aa8d4af9-44aa-4136-ad35-21a19a9d9eab' class='xr-section-summary' >Attributes: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>aggregation :</span></dt><dd>Spatio-Temporal | sum</dd><dt><span>creator_notes :</span></dt><dd>The missing data for the year 2001 has been filled with NaN values. The dataset is constructed using the ignition dates of the burned areas shapefiles. Each year is divided into 46 periods of 8 days, with the last period in December consisting of either 5 or 6 days, depending on whether it is a leap year.</dd><dt><span>downloaded_from :</span></dt><dd>https://gwis.jrc.ec.europa.eu/apps/country.profile/downloads</dd><dt><span>long_name :</span></dt><dd>Burned Areas from GWIS</dd><dt><span>provider :</span></dt><dd>Global Wildfire Information System (GWIS)</dd><dt><span>units :</span></dt><dd>hectares (ha)</dd></dl></div></li></ul></div></div>","content_type":"text/html"},"text/plain":{"content":"<xarray.DataArray 'gwis_ba' (time: 966, latitude: 720, longitude: 1440)> Size: 4GB\ndask.array<open_dataset-gwis_ba, shape=(966, 720, 1440), dtype=float32, chunksize=(966, 180, 360), chunktype=numpy.ndarray>\nCoordinates:\n  * latitude   (latitude) float64 6kB 89.88 89.62 89.38 ... -89.38 -89.62 -89.88\n  * longitude  (longitude) float64 12kB -179.9 -179.6 -179.4 ... 179.6 179.9\n  * time       (time) datetime64[ns] 8kB 2001-01-01 2001-01-09 ... 2021-12-27\nAttributes:\n    aggregation:      Spatio-Temporal | sum\n    creator_notes:    The missing data for the year 2001 has been filled with...\n    downloaded_from:  https://gwis.jrc.ec.europa.eu/apps/country.profile/down...\n    long_name:        Burned Areas from GWIS\n    provider:         Global Wildfire Information System (GWIS)\n    units:            hectares (ha)","content_type":"text/plain"}}}],"key":"QEZ9bXabJI"}],"key":"zw8C7PoBgk"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"\n\nmin_lon, min_lat, max_lon, max_lat = gdf.total_bounds\n\n# find the nearest points on our grid\nlat_start = gwis.latitude.sel(latitude=max_lat, method=\"nearest\").item()\nlat_stop  = gwis.latitude.sel(latitude=min_lat, method=\"nearest\").item()\nlon_start = gwis.longitude.sel(longitude=min_lon, method=\"nearest\").item()\nlon_stop  = gwis.longitude.sel(longitude=max_lon, method=\"nearest\").item()\n\nlat_slice = slice(lat_start, lat_stop)\nlon_slice = slice(lon_start, lon_stop)\n\nbbox=[lon_stop , lat_stop , lon_start, lat_start]\nbbox","key":"dGI22XAGtG"},{"type":"output","id":"_XIMfPVWrpJ1Guw_Fy7kg","data":[{"output_type":"execute_result","execution_count":25,"metadata":{},"data":{"text/plain":{"content":"[-7.875, 41.625, -8.125, 41.875]","content_type":"text/plain"}}}],"key":"ao2TGmLyoL"}],"key":"uBYBXf5XWx"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"time_oi='2018-08-01'\n","key":"vGSPKkyzBp"},{"type":"output","id":"-0lbi43stsHtxKopCdl6R","data":[],"key":"DKofLz8sLz"}],"key":"VqLV4RkpsU"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"gwis_aoi = gwis.sel(latitude=lat_slice,longitude=lon_slice).sel(time=time_oi,method=\"nearest\")\ngwis_aoi.plot()\n","key":"RSvZsEbYZs"},{"type":"output","id":"_RR89bzSD9EvR--aZwkFQ","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"434e74ffb29f1d9e5886538d73d6453d","path":"/tutorials/build/434e74ffb29f1d9e5886538d73d6453d.png"},"text/plain":{"content":"<Figure size 640x480 with 2 Axes>","content_type":"text/plain"}}}],"key":"su3wNc5moc"}],"key":"LEMmXDQHmz"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Another Example...","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Okq9WKqGfd"}],"identifier":"another-example","label":"Another Example...","html_id":"another-example","implicit":true,"key":"bYcIPKZ7pO"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We will now do something a bit more complicated and fetch data using pystac to search through the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"SKyZlFxefc"},{"type":"link","url":"http://earth-search.aws.element84.com/v1","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"earth​-search​.aws​.element84​.com​/v1","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"EKzPD0nFtv"}],"urlSource":"http://earth-search.aws.element84.com/v1","key":"TiQogrMncM"},{"type":"text","value":" STAC API endpoint. As mentioned in the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"qne9i5NKg3"},{"type":"link","url":"/stac-and-data-access","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"STAC and Data Access guide","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"EwQ2XiA0BK"}],"urlSource":"../earthcode101/stac_and_data_access.ipynb","dataUrl":"/stac-and-data-access.json","internal":true,"protocol":"file","key":"tmcG7pFoPF"},{"type":"text","value":", the STAC API provides us with endpoints to query STAC collections.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"i5xkjDyt8x"}],"key":"qlMzcIXQ9P"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"There is an ecosystem of libraries that implement STAC standards (pystac, odc-stac, stackstac, etc..) that allow us to analyse, load and use data described in STAC. We will briefly explore in the following cells below.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Q7Yo3LavkO"}],"key":"kG18qhmHMl"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"As a first step, we will open a catalog with the pystac library: ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"jYLtXqoa2y"},{"type":"link","url":"https://earth-search.aws.element84.com/v1","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"https://​earth​-search​.aws​.element84​.com​/v1","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"hQvF8SmrsO"}],"urlSource":"https://earth-search.aws.element84.com/v1","key":"kWET3t6V69"},{"type":"text","value":" This catalog contains STAC collections of various datasets (such as sentinel-1 and sentinel-2 data) in cloud optimised formats (COGs in this case) - see ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"UTHykIdhq8"},{"type":"link","url":"https://earth-search.aws.element84.com","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"https://​earth​-search​.aws​.element84​.com","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"cnbrjBaqFt"}],"urlSource":"https://earth-search.aws.element84.com","key":"ssKI1nwHLM"},{"type":"text","value":". for more details. With these formats we are able to use the assets using cloud-native access patterns (see ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"uQLKB1vClb"},{"type":"link","url":"https://guide.cloudnativegeo.org/cookbooks/","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"https://​guide​.cloudnativegeo​.org​/cookbooks/","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"J154CGhtAW"}],"urlSource":"https://guide.cloudnativegeo.org/cookbooks/","key":"bWyH7FvclN"},{"type":"text","value":" for more details).","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ZAlfQ2lAYq"}],"key":"yDc8vWJsAc"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Note that a STAC endpoint like the one below, only returns STAC items and not the actual data. The STAC items returned have Assets defined which link to the actual data (and provide metadata).","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"lM6aE1geOr"}],"key":"RiFfL6VK0X"}],"key":"byC6y175vc"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import pandas as pd\n\nfire_date_t = pd.to_datetime(time_oi) # get the date of the forest fire and a the dates before and after it\nweek_before = (fire_date_t - timedelta(days=7))\nweek_after = (fire_date_t + timedelta(days=7))","key":"zR4dm5c1Hu"},{"type":"output","id":"WkdldN9S4Xvy_sFud54dA","data":[],"key":"ImJp2oogiP"}],"key":"L6b4Thzg0Y"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(week_before.date(), \"---\" , week_after.date())","key":"mOpDqb63E5"},{"type":"output","id":"nQ4JQs8riCbNU8upLzZ4F","data":[{"name":"stdout","output_type":"stream","text":"2018-07-25 --- 2018-08-08\n"}],"key":"kyN5gTQ0h5"}],"key":"eLdiNt0Yiw"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"catalog = pystac_client.open(\"https://earth-search.aws.element84.com/v1\")\nchunk={} # <-- use dask\nres=10 # 10m resolution","key":"x2YgApXwC8"},{"type":"output","id":"8bfuwO39VZqsa6l7h8S8I","data":[],"key":"p4kHVu10mB"}],"key":"L730WqNLJ6"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In the next step we will do two things:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sElXhwDsOP"}],"key":"GzwVn7iTvM"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"1.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"djUmnxUw7g"}],"key":"FhbG1TUHV8"},{"type":"text","value":" Search for multiple cloudless sentinel-2 satellite images within a month of our pre-fire (week_before) date. The STAC API allows us to do a couple of things in a simple API call:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zUM3I48Xis"}],"key":"sdsU0m3W1L"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"We can define an arrea of interest (bbox) and search for items that cover this region","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Nd2O2M05Wz"}],"key":"RCvwWqivS5"}],"key":"HXtkXKdxQH"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"We can subset for the time of interest as well (datetime)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"VBJ4tetg6I"}],"key":"wndKM45J3x"}],"key":"GrnfyqXwDq"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"We can define custom querries over implemented STAC extensions. For example, the Sentinel STAC collection we are querrying implements the eo STAC extension, and defines cloud_cover - this allows us to search for quality assets with minimal cloudy pixels","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"B30DZXBd5r"}],"key":"RSWEU5oiuI"}],"key":"veYbn01ilK"}],"key":"kiKmn21uOU"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"This will return the relevant STAC items - which contain assets that point to our data of interest. We now need to load this data into a dataarray to start analysing it.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"AmjJFGQtp8"}],"key":"qAeDMYQvZx"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"2.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"cGWjs5hGjj"}],"key":"LHy9UU1bdX"},{"type":"text","value":" Note that in the above step, we only have items that point to some data - this data can be tiff, zarr, netcdf, COG, or other SpatioTemporal asset data. In our case, the element84 endpoint points to the data collection of  ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"p0Sr9QXx6e"},{"type":"emphasis","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"link","url":"https://registry.opendata.aws/sentinel-2-l2a-cogs/","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"https://​registry​.opendata​.aws​/sentinel​-2​-l2a​-cogs/","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"QWPKjKLD4a"}],"urlSource":"https://registry.opendata.aws/sentinel-2-l2a-cogs/","key":"OsM3kO6RqY"}],"key":"wIDlYOCnWX"},{"type":"text","value":" - the format of our data is cloud-optimized GeoTiff. A cloud-friendly format such as this enables us cloud-native access patterns, such as easily fetching only our area of interest (as opposed to several tiff files and manually subsetting them after downloading).","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"IBacR9hTly"}],"key":"DkQjTRHoGx"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Libraries such as odc-stac integrate with STAC standards and allow us to load data as well as leveraging the cloud-optimised formats. For example, in the cell below we define how we want to transform/load our data by:","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"IPuxSZnGdT"}],"key":"v4KxOm0Ywy"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":13,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Passing the STAC item (or multiple items) we want to load","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"t8n8kcm4qH"}],"key":"SnYduS8qMM"}],"key":"B39F4ELXlZ"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"defining a particular chunk size (the passed {} asks for the data to be automatically chunked as it is originally);","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"xWBjw0Wnwq"}],"key":"g75om0DLZO"}],"key":"st6DnE2X24"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"We can request only the spectral bands of interest, in this case nir and swir22, to reduce the amount of data that we fetch.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"fgnYAsKlOi"}],"key":"VmMQAjRBu5"}],"key":"Y2TxYNfKPS"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"We can define a resolution to retrieve the data at, note that this will also resample automatically. For example the nir band data has a 10m resolution, but the swir22 - 20m resolution.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"dlrR1ek9ae"}],"key":"lgA1QU6Lxp"}],"key":"v9mX0Fgwwj"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"There are multiple other options as well, such as defining in which projection we want our data in. More information can be found at: ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"ITXtjsDXSZ"},{"type":"link","url":"https://odc-stac.readthedocs.io/en/latest/_api/odc.stac.load.html","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"https://​odc​-stac​.readthedocs​.io​/en​/latest​/​_api​/odc​.stac​.load​.html","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"id69QCzowm"}],"urlSource":"https://odc-stac.readthedocs.io/en/latest/_api/odc.stac.load.html","key":"A3DcEYgr6M"}],"key":"Sy9LZiXD5i"}],"key":"LF0bxrnqfg"}],"key":"HWtiqh7JEJ"}],"key":"D0egAC9rTb"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# STAC search for relevant items\nweek_before_start = (week_before - timedelta(days=30))\ntime_range_start = str(week_before_start.date()) + \"/\" + str(week_before.date())\n\nquery1 = catalog.search(\n    collections=[\"sentinel-2-l2a\"], datetime=time_range_start, limit=100,\n    bbox=bbox, query={\"eo:cloud_cover\": {\"lt\": 20}}\n)\n\nitems = list(query1.items())\nprint(f\"Found: {len(items):d} datasets\")","key":"KFJIK69v1X"},{"type":"output","id":"Ij6EAUh8aEsKninYo6Olg","data":[{"name":"stdout","output_type":"stream","text":"Found: 6 datasets\n"}],"key":"A8WGGcSUZr"}],"key":"m0TOSFxHwm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# plot all the STAC assets\npoly_pre = gpd.GeoSeries([shapely.Polygon(item.geometry['coordinates'][0]) for item in items], name='geometry', crs='epsg:4236')\npoly_pre.explore()","key":"dtTRkrLzUh"},{"type":"output","id":"MDb61-XAfVW0a1s-qnhZd","data":[{"output_type":"execute_result","execution_count":32,"metadata":{},"data":{"text/html":{"content":"<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_320ba81ac041206fcd37515e1cbaf66b {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n\n            &lt;style&gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            &lt;/style&gt;\n\n            &lt;style&gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            &lt;/style&gt;\n\n            &lt;script&gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            &lt;/script&gt;\n\n        \n    \n                    &lt;style&gt;\n                        .foliumtooltip {\n                            \n                        }\n                       .foliumtooltip table{\n                            margin: auto;\n                        }\n                        .foliumtooltip tr{\n                            text-align: left;\n                        }\n                        .foliumtooltip th{\n                            padding: 2px; padding-right: 8px;\n                        }\n                    &lt;/style&gt;\n            \n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_320ba81ac041206fcd37515e1cbaf66b&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_320ba81ac041206fcd37515e1cbaf66b = L.map(\n                &quot;map_320ba81ac041206fcd37515e1cbaf66b&quot;,\n                {\n                    center: [41.955603034783074, -8.340401116075991],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  &quot;zoom&quot;: 10,\n  &quot;zoomControl&quot;: true,\n  &quot;preferCanvas&quot;: false,\n}\n\n                }\n            );\n            L.control.scale().addTo(map_320ba81ac041206fcd37515e1cbaf66b);\n\n            \n\n        \n    \n            var tile_layer_83a124fe4bc61725c19b2462bd91100c = L.tileLayer(\n                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,\n                {\n  &quot;minZoom&quot;: 0,\n  &quot;maxZoom&quot;: 19,\n  &quot;maxNativeZoom&quot;: 19,\n  &quot;noWrap&quot;: false,\n  &quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors&quot;,\n  &quot;subdomains&quot;: &quot;abc&quot;,\n  &quot;detectRetina&quot;: false,\n  &quot;tms&quot;: false,\n  &quot;opacity&quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_83a124fe4bc61725c19b2462bd91100c.addTo(map_320ba81ac041206fcd37515e1cbaf66b);\n        \n    \n            map_320ba81ac041206fcd37515e1cbaf66b.fitBounds(\n                [[41.457390342414385, -9.008034722874328], [42.45381572715176, -7.672767509277656]],\n                {}\n            );\n        \n    \n        function geo_json_93a3d9e34ed1480784e2cd31b24fe335_styler(feature) {\n            switch(feature.id) {\n                default:\n                    return {&quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n            }\n        }\n        function geo_json_93a3d9e34ed1480784e2cd31b24fe335_highlighter(feature) {\n            switch(feature.id) {\n                default:\n                    return {&quot;fillOpacity&quot;: 0.75};\n            }\n        }\n        function geo_json_93a3d9e34ed1480784e2cd31b24fe335_pointToLayer(feature, latlng) {\n            var opts = {\n  &quot;stroke&quot;: true,\n  &quot;color&quot;: &quot;#3388ff&quot;,\n  &quot;weight&quot;: 3,\n  &quot;opacity&quot;: 1.0,\n  &quot;lineCap&quot;: &quot;round&quot;,\n  &quot;lineJoin&quot;: &quot;round&quot;,\n  &quot;dashArray&quot;: null,\n  &quot;dashOffset&quot;: null,\n  &quot;fill&quot;: true,\n  &quot;fillColor&quot;: &quot;#3388ff&quot;,\n  &quot;fillOpacity&quot;: 0.2,\n  &quot;fillRule&quot;: &quot;evenodd&quot;,\n  &quot;bubblingMouseEvents&quot;: true,\n  &quot;radius&quot;: 2,\n};\n            \n            let style = geo_json_93a3d9e34ed1480784e2cd31b24fe335_styler(feature)\n            Object.assign(opts, style)\n            \n            return new L.CircleMarker(latlng, opts)\n        }\n\n        function geo_json_93a3d9e34ed1480784e2cd31b24fe335_onEachFeature(feature, layer) {\n\n            layer.on({\n                mouseout: function(e) {\n                    if(typeof e.target.setStyle === &quot;function&quot;){\n                            geo_json_93a3d9e34ed1480784e2cd31b24fe335.resetStyle(e.target);\n                    }\n                },\n                mouseover: function(e) {\n                    if(typeof e.target.setStyle === &quot;function&quot;){\n                        const highlightStyle = geo_json_93a3d9e34ed1480784e2cd31b24fe335_highlighter(e.target.feature)\n                        e.target.setStyle(highlightStyle);\n                    }\n                },\n            });\n        };\n        var geo_json_93a3d9e34ed1480784e2cd31b24fe335 = L.geoJson(null, {\n                onEachFeature: geo_json_93a3d9e34ed1480784e2cd31b24fe335_onEachFeature,\n            \n                style: geo_json_93a3d9e34ed1480784e2cd31b24fe335_styler,\n                pointToLayer: geo_json_93a3d9e34ed1480784e2cd31b24fe335_pointToLayer,\n            ...{\n}\n        });\n\n        function geo_json_93a3d9e34ed1480784e2cd31b24fe335_add (data) {\n            geo_json_93a3d9e34ed1480784e2cd31b24fe335\n                .addData(data);\n        }\n            geo_json_93a3d9e34ed1480784e2cd31b24fe335_add({&quot;bbox&quot;: [-9.008034722874328, 41.457390342414385, -7.672767509277656, 42.45381572715176], &quot;features&quot;: [{&quot;bbox&quot;: [-9.008034722874328, 41.46078051407024, -7.672767509277656, 42.45381572715176], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-9.008034722874328, 42.45381572715176], [-7.672767509277656, 42.446131748610206], [-7.673123025426216, 42.42928545020038], [-7.727545761295034, 42.288229903434186], [-7.89337063932478, 41.850791929670116], [-7.946878292770221, 41.704427386946904], [-8.03666905904059, 41.46078051407024], [-9.007911439563484, 41.46481385761268], [-9.008034722874328, 42.45381572715176]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-9.008034722874328, 41.46075274405685, -7.672767509277656, 42.45381572715176], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-9.008034722874328, 42.45381572715176], [-7.672767509277656, 42.446131748610206], [-7.673317860478908, 42.42004694901034], [-7.7162212431750845, 42.30880763185324], [-7.826438285685919, 42.01704232358096], [-7.881824457320358, 41.871300041100994], [-7.935575013014319, 41.72512533078298], [-7.990140133591135, 41.57902685662034], [-8.03335878147969, 41.46075274405685], [-9.007911439563484, 41.46481385761268], [-9.008034722874328, 42.45381572715176]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;1&quot;, &quot;properties&quot;: {}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-9.008034722874328, 41.460766623934646, -7.672767509277656, 42.45381572715176], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-9.008034722874328, 42.45381572715176], [-7.672767509277656, 42.446131748610206], [-7.673234860967536, 42.423983072905315], [-7.720448029162221, 42.3019409380687], [-7.8306095486789795, 42.010316410445924], [-7.8861353831830945, 41.86463106625163], [-7.939580265437255, 41.718383633708044], [-7.9941742134349, 41.572380672839586], [-8.035011889215163, 41.460766623934646], [-9.007911439563484, 41.46481385761268], [-9.008034722874328, 42.45381572715176]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;2&quot;, &quot;properties&quot;: {}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-9.007969553098352, 41.457390342414385, -7.672767509277656, 42.45371023298256], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-8.84427562040422, 42.45371023298256], [-7.672767509277656, 42.446131748610206], [-7.6931255155496325, 41.457390342414385], [-9.007911439563484, 41.46481385761268], [-9.007969553098352, 41.93721397531978], [-8.84427562040422, 42.45371023298256]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;3&quot;, &quot;properties&quot;: {}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-9.008034722874328, 41.462224337170014, -7.673984822939619, 42.45381572715176], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-9.008034722874328, 42.45381572715176], [-9.007911549061879, 41.465714688769545], [-8.037210705676504, 41.462224337170014], [-7.892080525107048, 41.8579345908506], [-7.690556606238726, 42.389673089920436], [-7.675652956988463, 42.42426080542091], [-7.673984822939619, 42.446145838981685], [-9.008034722874328, 42.45381572715176]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;4&quot;, &quot;properties&quot;: {}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-9.008034722874328, 41.4607462419779, -7.672767509277656, 42.45381572715176], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-9.008034722874328, 42.45381572715176], [-7.672767509277656, 42.446131748610206], [-7.673298663929032, 42.4209573861298], [-7.704301392798816, 42.33989628942293], [-7.759288648388074, 42.193797890639146], [-7.814615617204363, 42.04786754649582], [-7.92483298265771, 41.756166687919524], [-7.979129428005913, 41.61019911781318], [-8.032585348931754, 41.4607462419779], [-9.007911439563484, 41.46481385761268], [-9.008034722874328, 42.45381572715176]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;5&quot;, &quot;properties&quot;: {}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});\n\n        \n    \n    geo_json_93a3d9e34ed1480784e2cd31b24fe335.bindTooltip(\n    function(layer){\n    let div = L.DomUtil.create(&#x27;div&#x27;);\n    \n    return div\n    }\n    ,{\n  &quot;sticky&quot;: true,\n  &quot;className&quot;: &quot;foliumtooltip&quot;,\n});\n                     \n    \n            geo_json_93a3d9e34ed1480784e2cd31b24fe335.addTo(map_320ba81ac041206fcd37515e1cbaf66b);\n        \n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>","content_type":"text/html"},"text/plain":{"content":"<folium.folium.Map at 0x7fb805d8e850>","content_type":"text/plain"}}}],"key":"RVT3PQkXIW"}],"key":"UG6rfPE0G4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"prefire_ds = stac_load(\n    items,\n    bands=(\"nir\", \"swir22\"),\n    chunks=chunk,  # <-- use Dask\n    resolution=res,\n    crs=\"EPSG:32629\",\n        groupby=\"datetime\",\n    bbox=bbox,\n)\nprefire_ds = prefire_ds.mean(dim=\"time\")\nprefire_ds","key":"d0c8OEgHBc"},{"type":"output","id":"99yCXumIHrwArQRvKIPXX","data":[{"output_type":"execute_result","execution_count":33,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"abee69e53b3824dd2b46965b0b25045d","path":"/tutorials/build/abee69e53b3824dd2b46965b0b25045d.html"},"text/plain":{"content":"<xarray.Dataset> Size: 95MB\nDimensions:      (y: 2800, x: 2112)\nCoordinates:\n  * y            (y) float64 22kB 4.637e+06 4.636e+06 ... 4.609e+06 4.609e+06\n  * x            (x) float64 17kB 5.726e+05 5.726e+05 ... 5.937e+05 5.937e+05\n    spatial_ref  int32 4B 32629\nData variables:\n    nir          (y, x) float64 47MB dask.array<chunksize=(2800, 2112), meta=np.ndarray>\n    swir22       (y, x) float64 47MB dask.array<chunksize=(2800, 2112), meta=np.ndarray>","content_type":"text/plain"}}}],"key":"oyEEAWinEa"}],"key":"lwkLjtxtzv"}],"key":"NSWLT14Vf0"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"EDC Pangeo Cloud Platform","url":"/about-edc-pangeo","group":"EarthCODE Tutorials"},"next":{"title":"Pangeo 101","url":"/pangeo101","group":"EarthCODE Tutorials"}}},"domain":"http://localhost:3000"}